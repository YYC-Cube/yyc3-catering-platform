---

**@file**ï¼šYYCÂ³-æ¥å£æ¶æ„è®¾è®¡æ–‡æ¡£
**@description**ï¼šYYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°çš„æ¥å£æ¶æ„è®¾è®¡æ–‡æ¡£ï¼ŒåŒ…å«æ¥å£è®¾è®¡åŸåˆ™ã€æ¥å£è§„èŒƒã€æ¥å£ç½‘å…³ã€æ¥å£ç›‘æ§ã€æ¥å£é™æµç­‰æ ¸å¿ƒå†…å®¹
**@author**ï¼šYYCÂ³
**@version**ï¼šv1.0.0
**@created**ï¼š2025-01-30
**@updated**ï¼š2025-01-30
**@status**ï¼špublished
**@tags**ï¼šæ¶æ„è®¾è®¡,YYCÂ³,ç³»ç»Ÿæ¶æ„

---
# ğŸ”– YYCÂ³ æ¥å£æ¶æ„è®¾è®¡æ–‡æ¡£

> ***YanYuCloudCube***
> **æ ‡è¯­**ï¼šè¨€å¯è±¡é™ | è¯­æ¢æœªæ¥
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **æ ‡è¯­**ï¼šä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| å±æ€§ | å†…å®¹ |
|------|------|
| **æ–‡æ¡£æ ‡é¢˜** | YYCÂ³ æ¥å£æ¶æ„è®¾è®¡æ–‡æ¡£ |
| **æ–‡æ¡£ç±»å‹** | æ¶æ„è®¾è®¡æ–‡æ¡£ |
| **æ‰€å±é˜¶æ®µ** | ç³»ç»Ÿæ¶æ„è®¾è®¡ |
| **éµå¾ªè§„èŒƒ** | YYCÂ³ å›¢é˜Ÿæ ‡å‡†åŒ–è§„èŒƒ v1.0.0 |
| **ç‰ˆæœ¬å·** | v1.0.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2025-01-30 |
| **ä½œè€…** | YYCÂ³ Team |
| **æ›´æ–°æ—¥æœŸ** | 2025-01-30 |

---

## ğŸ“‘ ç›®å½•

1. [æ¥å£æ¶æ„æ¦‚è¿°](#1-æ¥å£æ¶æ„æ¦‚è¿°)
2. [API è®¾è®¡è§„èŒƒ](#2-api-è®¾è®¡è§„èŒƒ)
3. [æ¥å£åˆ†ç±»](#3-æ¥å£åˆ†ç±»)
4. [æ¥å£å®‰å…¨](#4-æ¥å£å®‰å…¨)
5. [æ¥å£æ–‡æ¡£](#5-æ¥å£æ–‡æ¡£)
6. [æ¥å£æµ‹è¯•](#6-æ¥å£æµ‹è¯•)
7. [æ¥å£ç‰ˆæœ¬ç®¡ç†](#7-æ¥å£ç‰ˆæœ¬ç®¡ç†)
8. [æ¥å£ç›‘æ§](#8-æ¥å£ç›‘æ§)

---

## 1. æ¦‚è¿°

### 1.1 è®¾è®¡ç›®æ ‡

æœ¬æ¶æ„è®¾è®¡æ–‡æ¡£æ—¨åœ¨ä¸ºYYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°æä¾›æ¸…æ™°ã€å®Œæ•´çš„æŠ€æœ¯æ¶æ„æŒ‡å¯¼ã€‚ä¸»è¦ç›®æ ‡åŒ…æ‹¬ï¼š

- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒä¸šåŠ¡å¿«é€Ÿæ‰©å±•ï¼Œæ¨¡å—åŒ–è®¾è®¡ä¾¿äºåŠŸèƒ½è¿­ä»£
- **é«˜æ€§èƒ½**ï¼šä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼Œç¡®ä¿é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ç¨³å®šè¿è¡Œ
- **é«˜å¯ç”¨æ€§**ï¼šå®ç°ç³»ç»Ÿé«˜å¯ç”¨ï¼Œæ•…éšœè‡ªåŠ¨æ¢å¤ï¼Œä¿éšœä¸šåŠ¡è¿ç»­æ€§
- **å®‰å…¨æ€§**ï¼šå»ºç«‹å®Œå–„çš„å®‰å…¨ä½“ç³»ï¼Œä¿æŠ¤æ•°æ®å’Œç³»ç»Ÿå®‰å…¨
- **æ˜“ç»´æŠ¤æ€§**ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œæ–‡æ¡£å®Œå–„ï¼Œä¾¿äºå›¢é˜Ÿåä½œå’Œç»´æŠ¤

é€šè¿‡æœ¬æ¶æ„è®¾è®¡ï¼Œç¡®ä¿å¹³å°èƒ½å¤Ÿæ»¡è¶³å½“å‰ä¸šåŠ¡éœ€æ±‚ï¼Œå¹¶ä¸ºæœªæ¥çš„å‘å±•å¥ å®šåšå®åŸºç¡€ã€‚

### 1.2 è®¾è®¡åŸåˆ™

æ¶æ„è®¾è®¡éµå¾ªä»¥ä¸‹æ ¸å¿ƒåŸåˆ™ï¼š

- **å•ä¸€èŒè´£åŸåˆ™**ï¼šæ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„ä¸šåŠ¡åŠŸèƒ½
- **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•
- **ä¾èµ–å€’ç½®åŸåˆ™**ï¼šé«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œéƒ½ä¾èµ–æŠ½è±¡
- **æ¥å£éš”ç¦»åŸåˆ™**ï¼šä½¿ç”¨ç»†ç²’åº¦çš„æ¥å£ï¼Œé¿å…æ¥å£æ±¡æŸ“
- **æœ€å°‘çŸ¥è¯†åŸåˆ™**ï¼šæ¨¡å—é—´æœ€å°åŒ–ä¾èµ–ï¼Œé™ä½è€¦åˆåº¦

åŒæ—¶éµå¾ªYYCÂ³ã€Œäº”é«˜äº”æ ‡äº”åŒ–ã€æ ¸å¿ƒç†å¿µï¼š
- **äº”é«˜**ï¼šé«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€é«˜å®‰å…¨ã€é«˜æ‰©å±•ã€é«˜å¯ç»´æŠ¤
- **äº”æ ‡**ï¼šæ ‡å‡†åŒ–ã€è§„èŒƒåŒ–ã€è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–ã€å¯è§†åŒ–
- **äº”åŒ–**ï¼šæµç¨‹åŒ–ã€æ–‡æ¡£åŒ–ã€å·¥å…·åŒ–ã€æ•°å­—åŒ–ã€ç”Ÿæ€åŒ–

### 1.3 æŠ€æœ¯é€‰å‹

æŠ€æœ¯æ ˆé€‰æ‹©åŸºäºä»¥ä¸‹è€ƒè™‘ï¼š

**å‰ç«¯æŠ€æœ¯æ ˆ**
- React 18+ï¼šé‡‡ç”¨ç°ä»£åŒ–å‰ç«¯æ¡†æ¶ï¼Œç»„ä»¶åŒ–å¼€å‘
- TypeScript 5.0+ï¼šç±»å‹å®‰å…¨ï¼Œæé«˜ä»£ç è´¨é‡
- Next.js 14+ï¼šSSR/SSGæ”¯æŒï¼Œä¼˜åŒ–SEOå’Œæ€§èƒ½
- Tailwind CSSï¼šåŸå­åŒ–CSSï¼Œå¿«é€Ÿæ„å»ºUI

**åç«¯æŠ€æœ¯æ ˆ**
- Node.js 18+ï¼šé«˜æ€§èƒ½JavaScriptè¿è¡Œæ—¶
- Express/Fastifyï¼šè½»é‡çº§Webæ¡†æ¶
- PostgreSQL 15+ï¼šå…³ç³»å‹æ•°æ®åº“ï¼ŒACIDä¿è¯
- Redis 7+ï¼šç¼“å­˜å’Œä¼šè¯å­˜å‚¨

**åŸºç¡€è®¾æ–½**
- Dockerï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼Œç¯å¢ƒä¸€è‡´æ€§
- Kubernetesï¼šå®¹å™¨ç¼–æ’ï¼Œè‡ªåŠ¨åŒ–è¿ç»´
- Nginxï¼šåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡
- Prometheus + Grafanaï¼šç›‘æ§å’Œå‘Šè­¦

**å¼€å‘å·¥å…·**
- Gitï¼šç‰ˆæœ¬æ§åˆ¶
- ESLint + Prettierï¼šä»£ç è§„èŒƒ
- Jest + Vitestï¼šå•å…ƒæµ‹è¯•
- GitHub Actionsï¼šCI/CDè‡ªåŠ¨åŒ–

## 2. æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

YYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†ä¸ºä»¥ä¸‹å±‚æ¬¡ï¼š

**è¡¨ç°å±‚ï¼ˆPresentation Layerï¼‰**
- Webå‰ç«¯ï¼šReact + Next.jsæ„å»ºçš„å•é¡µåº”ç”¨
- ç§»åŠ¨ç«¯ï¼šå“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šè®¾å¤‡è®¿é—®
- ç®¡ç†åå°ï¼šç‹¬ç«‹çš„ç®¡ç†ç•Œé¢

**åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰**
- APIç½‘å…³ï¼šç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±åˆ†å‘
- ä¸šåŠ¡æœåŠ¡ï¼šè®¢å•ã€ç”¨æˆ·ã€å•†å“ç­‰æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- è®¤è¯æˆæƒï¼šJWTè®¤è¯ï¼ŒRBACæƒé™æ§åˆ¶

**é¢†åŸŸå±‚ï¼ˆDomain Layerï¼‰**
- é¢†åŸŸæ¨¡å‹ï¼šæ ¸å¿ƒä¸šåŠ¡å®ä½“å’Œè§„åˆ™
- é¢†åŸŸæœåŠ¡ï¼šå¤æ‚ä¸šåŠ¡é€»è¾‘å°è£…
- ä»“å‚¨æ¥å£ï¼šæ•°æ®è®¿é—®æŠ½è±¡

**åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructure Layerï¼‰**
- æ•°æ®åº“ï¼šPostgreSQLä¸»ä»æ¶æ„
- ç¼“å­˜ï¼šRedisé›†ç¾¤
- æ¶ˆæ¯é˜Ÿåˆ—ï¼šRabbitMQ/Kafka
- æ–‡ä»¶å­˜å‚¨ï¼šOSS/MinIO

**è·¨å±‚å…³æ³¨ç‚¹**
- æ—¥å¿—ç›‘æ§ï¼šELK Stack
- é…ç½®ç®¡ç†ï¼šApollo/Nacos
- æœåŠ¡å‘ç°ï¼šConsul/Eureka
- é“¾è·¯è¿½è¸ªï¼šJaeger/SkyWalking

### 2.2 æ¨¡å—åˆ’åˆ†

ç³»ç»ŸæŒ‰ç…§ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†ä¸ºä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š

**ç”¨æˆ·æ¨¡å—ï¼ˆUser Moduleï¼‰**
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€è®¤è¯
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- æƒé™å’Œè§’è‰²ç®¡ç†

**å•†å“æ¨¡å—ï¼ˆProduct Moduleï¼‰**
- å•†å“ä¿¡æ¯ç®¡ç†
- å•†å“åˆ†ç±»å’Œæ ‡ç­¾
- åº“å­˜ç®¡ç†

**è®¢å•æ¨¡å—ï¼ˆOrder Moduleï¼‰**
- è®¢å•åˆ›å»ºå’Œæ”¯ä»˜
- è®¢å•çŠ¶æ€æµè½¬
- è®¢å•æŸ¥è¯¢å’Œç»Ÿè®¡

**æ”¯ä»˜æ¨¡å—ï¼ˆPayment Moduleï¼‰**
- æ”¯ä»˜æ¥å£é›†æˆ
- æ”¯ä»˜çŠ¶æ€åŒæ­¥
- é€€æ¬¾å¤„ç†

**è¥é”€æ¨¡å—ï¼ˆMarketing Moduleï¼‰**
- ä¼˜æƒ åˆ¸ç®¡ç†
- ä¿ƒé”€æ´»åŠ¨
- ä¼šå‘˜ç§¯åˆ†

**æŠ¥è¡¨æ¨¡å—ï¼ˆReport Moduleï¼‰**
- é”€å”®æŠ¥è¡¨
- æ•°æ®åˆ†æ
- å¯è§†åŒ–å±•ç¤º

**ç³»ç»Ÿæ¨¡å—ï¼ˆSystem Moduleï¼‰**
- é…ç½®ç®¡ç†
- æ—¥å¿—ç®¡ç†
- ç›‘æ§å‘Šè­¦

### 2.3 æ•°æ®æµå‘

## 3. æŠ€æœ¯å®ç°

### 3.1 æ ¸å¿ƒæŠ€æœ¯

### 3.2 å…³é”®ç®—æ³•

### 3.3 æ€§èƒ½ä¼˜åŒ–

## 4. æ¥å£è®¾è®¡

### 4.1 APIæ¥å£

### 4.2 æ•°æ®æ¥å£

### 4.3 æ¶ˆæ¯æ¥å£

## 5. éƒ¨ç½²æ–¹æ¡ˆ

### 5.1 éƒ¨ç½²æ¶æ„

### 5.2 é…ç½®ç®¡ç†

### 5.3 ç›‘æ§å‘Šè­¦

## 6. é™„å½•

### 6.1 æœ¯è¯­è¡¨

### 6.2 å‚è€ƒèµ„æ–™

## 1. æ¥å£æ¶æ„æ¦‚è¿°

### 1.1 æ¶æ„ç®€ä»‹

YYCÂ³ é‡‡ç”¨ RESTful API è®¾è®¡é£æ ¼ï¼Œé€šè¿‡ API ç½‘å…³ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ¥å£ï¼Œæä¾›ç»Ÿä¸€çš„è®¤è¯ã€æˆæƒã€é™æµã€ç†”æ–­ç­‰åŠŸèƒ½ã€‚

### 1.2 æ¶æ„å±‚æ¬¡

```
å®¢æˆ·ç«¯
  â†“
API ç½‘å…³ï¼ˆè®¤è¯ã€æˆæƒã€é™æµã€ç†”æ–­ï¼‰
  â†“
å¾®æœåŠ¡å±‚ï¼ˆç”¨æˆ·æœåŠ¡ã€è®¢å•æœåŠ¡ã€å•†å“æœåŠ¡ç­‰ï¼‰
  â†“
æ•°æ®å±‚ï¼ˆMySQLã€Redisã€MongoDB ç­‰ï¼‰
```

### 1.3 æŠ€æœ¯é€‰å‹

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| Hono | Web æ¡†æ¶ |
| Zod | æ•°æ®éªŒè¯ |
| JWT | è®¤è¯ä»¤ç‰Œ |
| Swagger/OpenAPI | æ¥å£æ–‡æ¡£ |
| Postman | æ¥å£æµ‹è¯• |

---

## 2. API è®¾è®¡è§„èŒƒ

### 2.1 RESTful è§„èŒƒ

#### 2.1.1 URL è®¾è®¡

- ä½¿ç”¨åè¯è€ŒéåŠ¨è¯
- ä½¿ç”¨å¤æ•°å½¢å¼
- ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦
- å±‚çº§ä¸è¶…è¿‡ 3 å±‚

**ç¤ºä¾‹**ï¼š
```
âœ… æ­£ç¡®ï¼š
GET    /api/users
GET    /api/users/:id
POST   /api/users
PUT    /api/users/:id
DELETE /api/users/:id

âŒ é”™è¯¯ï¼š
GET    /api/getUsers
GET    /api/user
GET    /api/users/:id/orders/:id/items
```

#### 2.1.2 HTTP æ–¹æ³•

| æ–¹æ³• | ç”¨é€” | æ˜¯å¦å¹‚ç­‰ |
|------|------|----------|
| GET | è·å–èµ„æº | æ˜¯ |
| POST | åˆ›å»ºèµ„æº | å¦ |
| PUT | å®Œæ•´æ›´æ–°èµ„æº | æ˜¯ |
| PATCH | éƒ¨åˆ†æ›´æ–°èµ„æº | å¦ |
| DELETE | åˆ é™¤èµ„æº | æ˜¯ |

#### 2.1.3 HTTP çŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|----------|
| 200 OK | è¯·æ±‚æˆåŠŸ | GETã€PUTã€PATCHã€DELETE æˆåŠŸ |
| 201 Created | èµ„æºåˆ›å»ºæˆåŠŸ | POST æˆåŠŸ |
| 204 No Content | è¯·æ±‚æˆåŠŸä½†æ— è¿”å›å†…å®¹ | DELETE æˆåŠŸ |
| 400 Bad Request | è¯·æ±‚å‚æ•°é”™è¯¯ | å‚æ•°éªŒè¯å¤±è´¥ |
| 401 Unauthorized | æœªè®¤è¯ | ç¼ºå°‘æˆ–æ— æ•ˆçš„è®¤è¯ä»¤ç‰Œ |
| 403 Forbidden | æ— æƒé™ | å·²è®¤è¯ä½†æ— æƒé™è®¿é—® |
| 404 Not Found | èµ„æºä¸å­˜åœ¨ | è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ |
| 409 Conflict | èµ„æºå†²çª | èµ„æºå·²å­˜åœ¨æˆ–çŠ¶æ€å†²çª |
| 422 Unprocessable Entity | è¯·æ±‚æ ¼å¼æ­£ç¡®ä½†è¯­ä¹‰é”™è¯¯ | ä¸šåŠ¡é€»è¾‘é”™è¯¯ |
| 429 Too Many Requests | è¯·æ±‚è¿‡å¤š | è¶…è¿‡é™æµé˜ˆå€¼ |
| 500 Internal Server Error | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æœåŠ¡å™¨å¼‚å¸¸ |
| 503 Service Unavailable | æœåŠ¡ä¸å¯ç”¨ | æœåŠ¡ç»´æŠ¤æˆ–è¿‡è½½ |

### 2.2 è¯·æ±‚è§„èŒƒ

#### 2.2.1 è¯·æ±‚å¤´

```http
Content-Type: application/json
Accept: application/json
Authorization: Bearer {token}
X-Request-ID: {uuid}
X-Client-Version: 1.0.0
```

#### 2.2.2 è¯·æ±‚ä½“

```json
{
  "username": "test@example.com",
  "password": "password123",
  "nickname": "æµ‹è¯•ç”¨æˆ·"
}
```

#### 2.2.3 æŸ¥è¯¢å‚æ•°

```
GET /api/users?page=1&pageSize=20&status=1&keyword=test
```

### 2.3 å“åº”è§„èŒƒ

#### 2.3.1 æˆåŠŸå“åº”

```json
{
  "success": true,
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": "123",
    "username": "test@example.com",
    "nickname": "æµ‹è¯•ç”¨æˆ·"
  },
  "timestamp": 1706592000000
}
```

#### 2.3.2 åˆ—è¡¨å“åº”

```json
{
  "success": true,
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "items": [
      {
        "id": "123",
        "username": "test@example.com"
      }
    ],
    "pagination": {
      "page": 1,
      "pageSize": 20,
      "total": 100,
      "totalPages": 5
    }
  },
  "timestamp": 1706592000000
}
```

#### 2.3.3 é”™è¯¯å“åº”

```json
{
  "success": false,
  "code": 400,
  "message": "è¯·æ±‚å‚æ•°é”™è¯¯",
  "errors": [
    {
      "field": "email",
      "message": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"
    },
    {
      "field": "password",
      "message": "å¯†ç é•¿åº¦ä¸èƒ½å°‘äº8ä½"
    }
  ],
  "timestamp": 1706592000000
}
```

### 2.4 æ•°æ®éªŒè¯

#### 2.4.1 éªŒè¯è§„åˆ™

ä½¿ç”¨ Zod è¿›è¡Œæ•°æ®éªŒè¯ã€‚

```typescript
import { z } from 'zod';

// ç”¨æˆ·åˆ›å»ºéªŒè¯
const createUserSchema = z.object({
  email: z.string().email('é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'),
  password: z.string().min(8, 'å¯†ç é•¿åº¦ä¸èƒ½å°‘äº8ä½'),
  nickname: z.string().min(2, 'æ˜µç§°é•¿åº¦ä¸èƒ½å°‘äº2ä½').optional()
});

// è®¢å•åˆ›å»ºéªŒè¯
const createOrderSchema = z.object({
  userId: z.string().uuid('ç”¨æˆ·IDæ ¼å¼ä¸æ­£ç¡®'),
  items: z.array(z.object({
    productId: z.string().uuid('å•†å“IDæ ¼å¼ä¸æ­£ç¡®'),
    quantity: z.number().int().positive('æ•°é‡å¿…é¡»ä¸ºæ­£æ•´æ•°')
  })).min(1, 'è®¢å•è‡³å°‘åŒ…å«ä¸€ä¸ªå•†å“'),
  address: z.object({
    province: z.string(),
    city: z.string(),
    district: z.string(),
    detail: z.string()
  })
});
```

#### 2.4.2 éªŒè¯ä¸­é—´ä»¶

```typescript
import { zValidator } from '@hono/zod-validator';
import { Hono } from 'hono';

const app = new Hono();

// ä½¿ç”¨éªŒè¯ä¸­é—´ä»¶
app.post('/users', zValidator('json', createUserSchema), async (c) => {
  const data = c.req.valid('json');
  // å¤„ç†ä¸šåŠ¡é€»è¾‘
  return c.json({ success: true, data });
});
```

---

## 3. æ¥å£åˆ†ç±»

### 3.1 ç”¨æˆ·æ¥å£

#### 3.1.1 ç”¨æˆ·æ³¨å†Œ

```http
POST /api/users/register
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "email": "test@example.com",
  "password": "password123",
  "nickname": "æµ‹è¯•ç”¨æˆ·",
  "phone": "13800138000"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "code": 201,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "id": "123",
    "email": "test@example.com",
    "nickname": "æµ‹è¯•ç”¨æˆ·",
    "createdAt": "2025-01-30T00:00:00Z"
  }
}
```

#### 3.1.2 ç”¨æˆ·ç™»å½•

```http
POST /api/users/login
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "email": "test@example.com",
  "password": "password123"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": "123",
      "email": "test@example.com",
      "nickname": "æµ‹è¯•ç”¨æˆ·"
    }
  }
}
```

#### 3.1.3 è·å–ç”¨æˆ·ä¿¡æ¯

```http
GET /api/users/profile
Authorization: Bearer {token}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": "123",
    "email": "test@example.com",
    "nickname": "æµ‹è¯•ç”¨æˆ·",
    "avatarUrl": "https://example.com/avatar.jpg",
    "phone": "138****8000",
    "createdAt": "2025-01-30T00:00:00Z"
  }
}
```

---

### 3.2 å•†å“æ¥å£

#### 3.2.1 è·å–å•†å“åˆ—è¡¨

```http
GET /api/products?page=1&pageSize=20&categoryId=123&keyword=test&sort=price&order=asc
```

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| page | number | å¦ | é¡µç ï¼Œé»˜è®¤ 1 |
| pageSize | number | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20 |
| categoryId | string | å¦ | åˆ†ç±» ID |
| keyword | string | å¦ | æœç´¢å…³é”®è¯ |
| sort | string | å¦ | æ’åºå­—æ®µï¼šprice, sales, createdAt |
| order | string | å¦ | æ’åºæ–¹å¼ï¼šasc, desc |

**å“åº”**ï¼š
```json
{
  "success": true,
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "items": [
      {
        "id": "123",
        "name": "å•†å“åç§°",
        "price": 99.99,
        "originalPrice": 129.99,
        "stock": 100,
        "sales": 50,
        "images": ["https://example.com/image1.jpg"],
        "status": 1
      }
    ],
    "pagination": {
      "page": 1,
      "pageSize": 20,
      "total": 100,
      "totalPages": 5
    }
  }
}
```

#### 3.2.2 è·å–å•†å“è¯¦æƒ…

```http
GET /api/products/:id
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": "123",
    "name": "å•†å“åç§°",
    "description": "å•†å“æè¿°",
    "price": 99.99,
    "originalPrice": 129.99,
    "costPrice": 79.99,
    "stock": 100,
    "sales": 50,
    "images": [
      "https://example.com/image1.jpg",
      "https://example.com/image2.jpg"
    ],
    "specifications": {
      "color": ["çº¢è‰²", "è“è‰²", "é»‘è‰²"],
      "size": ["S", "M", "L", "XL"]
    },
    "category": {
      "id": "123",
      "name": "åˆ†ç±»åç§°"
    },
    "status": 1,
    "createdAt": "2025-01-30T00:00:00Z"
  }
}
```

---

### 3.3 è®¢å•æ¥å£

#### 3.3.1 åˆ›å»ºè®¢å•

```http
POST /api/orders
Authorization: Bearer {token}
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "items": [
    {
      "productId": "123",
      "sku": "123-001",
      "quantity": 2
    }
  ],
  "address": {
    "province": "å¹¿ä¸œçœ",
    "city": "æ·±åœ³å¸‚",
    "district": "å—å±±åŒº",
    "detail": "ç§‘æŠ€å›­å—åŒº",
    "contactName": "å¼ ä¸‰",
    "contactPhone": "13800138000"
  },
  "couponId": "456",
  "remark": "å¤‡æ³¨ä¿¡æ¯"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "code": 201,
  "message": "è®¢å•åˆ›å»ºæˆåŠŸ",
  "data": {
    "id": "123",
    "orderNo": "20250130000001",
    "totalAmount": 199.98,
    "discountAmount": 20,
    "actualAmount": 179.98,
    "status": 0,
    "items": [
      {
        "productId": "123",
        "productName": "å•†å“åç§°",
        "sku": "123-001",
        "price": 99.99,
        "quantity": 2,
        "totalAmount": 199.98
      }
    ],
    "createdAt": "2025-01-30T00:00:00Z"
  }
}
```

#### 3.3.2 è·å–è®¢å•åˆ—è¡¨

```http
GET /api/orders?page=1&pageSize=20&status=1
Authorization: Bearer {token}
```

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| page | number | å¦ | é¡µç ï¼Œé»˜è®¤ 1 |
| pageSize | number | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20 |
| status | number | å¦ | è®¢å•çŠ¶æ€ï¼š0-å¾…æ”¯ä»˜ï¼Œ1-å·²æ”¯ä»˜ï¼Œ2-é…é€ä¸­ï¼Œ3-å·²å®Œæˆï¼Œ4-å·²å–æ¶ˆï¼Œ5-å·²é€€æ¬¾ |

**å“åº”**ï¼š
```json
{
  "success": true,
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "items": [
      {
        "id": "123",
        "orderNo": "20250130000001",
        "totalAmount": 199.98,
        "actualAmount": 179.98,
        "status": 1,
        "paymentStatus": 1,
        "items": [
          {
            "productName": "å•†å“åç§°",
            "quantity": 2,
            "totalAmount": 199.98
          }
        ],
        "createdAt": "2025-01-30T00:00:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "pageSize": 20,
      "total": 10,
      "totalPages": 1
    }
  }
}
```

#### 3.3.3 è®¢å•æ”¯ä»˜

```http
POST /api/orders/:id/pay
Authorization: Bearer {token}
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "paymentMethod": "wechat"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "code": 200,
  "message": "æ”¯ä»˜æˆåŠŸ",
  "data": {
    "paymentNo": "20250130000001",
    "paymentUrl": "weixin://wxpay/bizpayurl?pr=xxxxx",
    "qrCode": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
  }
}
```

---

### 3.4 æ”¯ä»˜æ¥å£

#### 3.4.1 æ”¯ä»˜å›è°ƒ

```http
POST /api/payments/callback
```

**è¯·æ±‚ä½“**ï¼ˆå¾®ä¿¡æ”¯ä»˜ï¼‰ï¼š
```json
{
  "id": "123",
  "create_time": "2025-01-30T00:00:00+08:00",
  "resource_type": "encrypt-resource",
  "event_type": "TRANSACTION.SUCCESS",
  "resource": {
    "algorithm": "AEAD_AES_256_GCM",
    "ciphertext": "xxxxx",
    "nonce": "xxxxx",
    "associated_data": "xxxxx"
  }
}
```

**å“åº”**ï¼š
```json
{
  "code": "SUCCESS",
  "message": "æˆåŠŸ"
}
```

---

## 4. æ¥å£å®‰å…¨

### 4.1 è®¤è¯æœºåˆ¶

#### 4.1.1 JWT è®¤è¯

ä½¿ç”¨ JWTï¼ˆJSON Web Tokenï¼‰è¿›è¡Œèº«ä»½è®¤è¯ã€‚

**Token ç»“æ„**ï¼š
```
Header.Payload.Signature
```

**Payload ç¤ºä¾‹**ï¼š
```json
{
  "userId": "123",
  "email": "test@example.com",
  "roles": ["user"],
  "exp": 1706678400,
  "iat": 1706592000
}
```

#### 4.1.2 Token ç”Ÿæˆ

```typescript
import jwt from 'jsonwebtoken';

function generateToken(user: User): string {
  const payload = {
    userId: user.id,
    email: user.email,
    roles: user.roles
  };
  
  return jwt.sign(payload, process.env.JWT_SECRET, {
    expiresIn: '7d'
  });
}
```

#### 4.1.3 Token éªŒè¯

```typescript
function verifyToken(token: string): any {
  try {
    return jwt.verify(token, process.env.JWT_SECRET);
  } catch (error) {
    throw new Error('Token æ— æ•ˆæˆ–å·²è¿‡æœŸ');
  }
}
```

### 4.2 æˆæƒæœºåˆ¶

#### 4.2.1 RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰

åŸºäºç”¨æˆ·è§’è‰²æ§åˆ¶æ¥å£è®¿é—®æƒé™ã€‚

**è§’è‰²å®šä¹‰**ï¼š
| è§’è‰² | æƒé™ |
|------|------|
| admin | æ‰€æœ‰æƒé™ |
| user | åŸºç¡€æƒé™ |
| guest | åªè¯»æƒé™ |

#### 4.2.2 æƒé™ä¸­é—´ä»¶

```typescript
import { Hono } from 'hono';

function requireRole(roles: string[]) {
  return async (c: any, next: any) => {
    const user = c.get('user');
    
    if (!user) {
      return c.json({ success: false, code: 401, message: 'æœªè®¤è¯' }, 401);
    }
    
    if (!roles.includes(user.role)) {
      return c.json({ success: false, code: 403, message: 'æ— æƒé™' }, 403);
    }
    
    await next();
  };
}

// ä½¿ç”¨æƒé™ä¸­é—´ä»¶
app.get('/admin/users', requireRole(['admin']), async (c) => {
  // åªæœ‰ admin è§’è‰²å¯ä»¥è®¿é—®
});
```

### 4.3 æ¥å£é™æµ

#### 4.3.1 é™æµç­–ç•¥

- **IP é™æµ**ï¼šé™åˆ¶å•ä¸ª IP çš„è¯·æ±‚é¢‘ç‡
- **ç”¨æˆ·é™æµ**ï¼šé™åˆ¶å•ä¸ªç”¨æˆ·çš„è¯·æ±‚é¢‘ç‡
- **æ¥å£é™æµ**ï¼šé™åˆ¶å•ä¸ªæ¥å£çš„è¯·æ±‚é¢‘ç‡

#### 4.3.2 é™æµå®ç°

```typescript
import { Ratelimit } from '@upstash/ratelimit';
import { Redis } from '@upstash/redis';

const ratelimit = new Ratelimit({
  redis: Redis.fromEnv(),
  limiter: Ratelimit.slidingWindow(10, '10 s'),
  analytics: true,
});

async function rateLimitMiddleware(c: any, next: any) {
  const ip = c.req.header('x-forwarded-for') || c.req.header('x-real-ip');
  const { success } = await ratelimit.limit(ip);
  
  if (!success) {
    return c.json({ success: false, code: 429, message: 'è¯·æ±‚è¿‡äºé¢‘ç¹' }, 429);
  }
  
  await next();
}
```

### 4.4 æ•°æ®åŠ å¯†

#### 4.4.1 ä¼ è¾“åŠ å¯†

- ä½¿ç”¨ HTTPS åŠ å¯†æ•°æ®ä¼ è¾“
- ä½¿ç”¨ TLS 1.2+ åè®®

#### 4.4.2 æ•æ„Ÿæ•°æ®åŠ å¯†

```typescript
import crypto from 'crypto';

function encrypt(text: string): string {
  const algorithm = 'aes-256-cbc';
  const key = crypto.scryptSync(process.env.ENCRYPTION_KEY, 'salt', 32);
  const iv = crypto.randomBytes(16);
  
  const cipher = crypto.createCipheriv(algorithm, key, iv);
  let encrypted = cipher.update(text, 'utf8', 'hex');
  encrypted += cipher.final('hex');
  
  return iv.toString('hex') + ':' + encrypted;
}

function decrypt(encrypted: string): string {
  const algorithm = 'aes-256-cbc';
  const key = crypto.scryptSync(process.env.ENCRYPTION_KEY, 'salt', 32);
  const [ivHex, encrypted] = encrypted.split(':');
  const iv = Buffer.from(ivHex, 'hex');
  
  const decipher = crypto.createDecipheriv(algorithm, key, iv);
  let decrypted = decipher.update(encrypted, 'hex', 'utf8');
  decrypted += decipher.final('utf8');
  
  return decrypted;
}
```

---

## 5. æ¥å£æ–‡æ¡£

### 5.1 OpenAPI è§„èŒƒ

ä½¿ç”¨ OpenAPI 3.0 è§„èŒƒç¼–å†™æ¥å£æ–‡æ¡£ã€‚

#### 5.1.1 æ–‡æ¡£ç»“æ„

```yaml
openapi: 3.0.0
info:
  title: YYCÂ³ API
  version: 1.0.0
  description: YYCÂ³ é¤é¥®å¹³å° API æ–‡æ¡£
servers:
  - url: https://api.yyc3.com
    description: ç”Ÿäº§ç¯å¢ƒ
  - url: https://api-dev.yyc3.com
    description: å¼€å‘ç¯å¢ƒ
paths:
  /api/users:
    post:
      summary: ç”¨æˆ·æ³¨å†Œ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegister'
      responses:
        '201':
          description: æ³¨å†ŒæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
components:
  schemas:
    UserRegister:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          minLength: 8
        nickname:
          type: string
    User:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
        nickname:
          type: string
```

### 5.2 Swagger UI

ä½¿ç”¨ Swagger UI å±•ç¤ºæ¥å£æ–‡æ¡£ã€‚

```typescript
import { swaggerUI } from '@hono/swagger-ui';
import { OpenAPIHono } from '@hono/zod-openapi';

const app = new OpenAPIHono();

app.doc('/doc', {
  openapi: '3.0.0',
  info: {
    version: '1.0.0',
    title: 'YYCÂ³ API',
  },
});

app.get('/swagger', swaggerUI({ url: '/doc' }));
```

### 5.3 æ¥å£æ–‡æ¡£ç®¡ç†

- **æ–‡æ¡£ä½ç½®**ï¼š`/docs/api`
- **æ–‡æ¡£æ ¼å¼**ï¼šOpenAPI 3.0 YAML
- **æ–‡æ¡£æ›´æ–°**ï¼šæ¯æ¬¡æ¥å£å˜æ›´åæ›´æ–°æ–‡æ¡£
- **æ–‡æ¡£å®¡æ ¸**ï¼šæ¥å£æ–‡æ¡£éœ€è¦ç»è¿‡å®¡æ ¸æ‰èƒ½å‘å¸ƒ

---

## 6. æ¥å£æµ‹è¯•

### 6.1 å•å…ƒæµ‹è¯•

ä½¿ç”¨ Vitest è¿›è¡Œæ¥å£å•å…ƒæµ‹è¯•ã€‚

```typescript
import { describe, it, expect, beforeEach } from 'vitest';
import { app } from '../app';

describe('User API', () => {
  beforeEach(() => {
    // åˆå§‹åŒ–æµ‹è¯•æ•°æ®
  });

  it('åº”è¯¥æˆåŠŸæ³¨å†Œç”¨æˆ·', async () => {
    const response = await app.request('/api/users/register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        email: 'test@example.com',
        password: 'password123'
      })
    });

    expect(response.status).toBe(201);
    const data = await response.json();
    expect(data.success).toBe(true);
    expect(data.data.email).toBe('test@example.com');
  });

  it('åº”è¯¥è¿”å›é‚®ç®±æ ¼å¼é”™è¯¯', async () => {
    const response = await app.request('/api/users/register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        email: 'invalid-email',
        password: 'password123'
      })
    });

    expect(response.status).toBe(400);
    const data = await response.json();
    expect(data.success).toBe(false);
  });
});
```

### 6.2 é›†æˆæµ‹è¯•

ä½¿ç”¨ Supertest è¿›è¡Œæ¥å£é›†æˆæµ‹è¯•ã€‚

```typescript
import request from 'supertest';
import { app } from '../app';

describe('User API Integration', () => {
  it('åº”è¯¥æˆåŠŸç™»å½•å¹¶è·å–ç”¨æˆ·ä¿¡æ¯', async () => {
    // æ³¨å†Œ
    await request(app)
      .post('/api/users/register')
      .send({
        email: 'test@example.com',
        password: 'password123'
      });

    // ç™»å½•
    const loginResponse = await request(app)
      .post('/api/users/login')
      .send({
        email: 'test@example.com',
        password: 'password123'
      });

    const token = loginResponse.body.data.token;

    // è·å–ç”¨æˆ·ä¿¡æ¯
    const profileResponse = await request(app)
      .get('/api/users/profile')
      .set('Authorization', `Bearer ${token}`);

    expect(profileResponse.status).toBe(200);
    expect(profileResponse.body.data.email).toBe('test@example.com');
  });
});
```

### 6.3 å‹åŠ›æµ‹è¯•

ä½¿ç”¨ Artillery è¿›è¡Œæ¥å£å‹åŠ›æµ‹è¯•ã€‚

```yaml
# load-test.yml
config:
  target: 'http://localhost:3201'
  phases:
    - duration: 60
      arrivalRate: 10
  processor: './load-test-processor.js'

scenarios:
  - name: 'ç”¨æˆ·ç™»å½•'
    flow:
      - post:
          url: '/api/users/login'
          json:
            email: 'test@example.com'
            password: 'password123'
      - think: 1
```

è¿è¡Œå‹åŠ›æµ‹è¯•ï¼š
```bash
artillery run load-test.yml
```

---

## 7. æ¥å£ç‰ˆæœ¬ç®¡ç†

### 7.1 ç‰ˆæœ¬ç­–ç•¥

é‡‡ç”¨ URL ç‰ˆæœ¬ç­–ç•¥ï¼Œåœ¨ URL ä¸­åŒ…å«ç‰ˆæœ¬å·ã€‚

```
/api/v1/users
/api/v2/users
```

### 7.2 ç‰ˆæœ¬å…¼å®¹æ€§

- **å‘åå…¼å®¹**ï¼šæ–°ç‰ˆæœ¬ä¿æŒå‘åå…¼å®¹
- **å¼ƒç”¨é€šçŸ¥**ï¼šæå‰é€šçŸ¥æ¥å£å¼ƒç”¨
- **å¼ƒç”¨æœŸé™**ï¼šå¼ƒç”¨æ¥å£ä¿ç•™ 3 ä¸ªæœˆ

### 7.3 ç‰ˆæœ¬åˆ‡æ¢

```typescript
import { Hono } from 'hono';

const v1 = new Hono();
const v2 = new Hono();

// v1 æ¥å£
v1.get('/users', async (c) => {
  return c.json({ version: 'v1' });
});

// v2 æ¥å£
v2.get('/users', async (c) => {
  return c.json({ version: 'v2' });
});

// æŒ‚è½½ç‰ˆæœ¬è·¯ç”±
app.route('/api/v1', v1);
app.route('/api/v2', v2);
```

---

## 8. æ¥å£ç›‘æ§

### 8.1 ç›‘æ§æŒ‡æ ‡

#### 8.1.1 æ€§èƒ½æŒ‡æ ‡

- **å“åº”æ—¶é—´**ï¼šæ¥å£å¹³å‡å“åº”æ—¶é—´
- **ååé‡**ï¼šæ¯ç§’è¯·æ±‚æ•°ï¼ˆQPSï¼‰
- **é”™è¯¯ç‡**ï¼šæ¥å£é”™è¯¯ç‡
- **å¹¶å‘æ•°**ï¼šåŒæ—¶å¤„ç†çš„è¯·æ±‚æ•°

#### 8.1.2 ä¸šåŠ¡æŒ‡æ ‡

- **è°ƒç”¨é‡**ï¼šæ¥å£æ€»è°ƒç”¨é‡
- **æˆåŠŸç‡**ï¼šæ¥å£æˆåŠŸç‡
- **è¶…æ—¶ç‡**ï¼šæ¥å£è¶…æ—¶ç‡

### 8.2 æ—¥å¿—è®°å½•

#### 8.2.1 è¯·æ±‚æ—¥å¿—

è®°å½•æ¯ä¸ªæ¥å£è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ã€‚

```typescript
import { logger } from 'hono/logger';

app.use('*', logger((message) => {
  console.log({
    method: message.method,
    path: message.path,
    status: message.status,
    latency: message.latency,
    ip: message.remoteAddress
  });
}));
```

#### 8.2.2 é”™è¯¯æ—¥å¿—

è®°å½•æ¥å£é”™è¯¯ä¿¡æ¯ã€‚

```typescript
app.onError((err, c) => {
  console.error({
    error: err.message,
    stack: err.stack,
    path: c.req.path,
    method: c.req.method
  });
  
  return c.json({
    success: false,
    code: 500,
    message: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
  }, 500);
});
```

### 8.3 å‘Šè­¦è§„åˆ™

#### 8.3.1 æ€§èƒ½å‘Šè­¦

- **å“åº”æ—¶é—´å‘Šè­¦**ï¼šå“åº”æ—¶é—´ > 1ç§’
- **é”™è¯¯ç‡å‘Šè­¦**ï¼šé”™è¯¯ç‡ > 5%
- **è¶…æ—¶ç‡å‘Šè­¦**ï¼šè¶…æ—¶ç‡ > 1%

#### 8.3.2 å‘Šè­¦é€šçŸ¥

- é‚®ä»¶é€šçŸ¥
- çŸ­ä¿¡é€šçŸ¥
- é’‰é’‰é€šçŸ¥
- ä¼ä¸šå¾®ä¿¡é€šçŸ¥

---

## ğŸ“„ æ–‡æ¡£æ ‡å°¾ (Footer)

> ã€Œ***YanYuCloudCube***ã€
> ã€Œ***<admin@0379.email>***ã€
> ã€Œ***Words Initiate Quadrants, Language Serves as Core for the Future***ã€
> ã€Œ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***ã€




## æ¦‚è¿°

### æ¶æ„æ¦‚è¿°

æœ¬æ¶æ„æ–‡æ¡£è¯¦ç»†æè¿°äº†ç³»ç»Ÿçš„æ•´ä½“æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬æ¶æ„ç›®æ ‡ã€è®¾è®¡åŸåˆ™ã€æŠ€æœ¯é€‰å‹ç­‰å…³é”®ä¿¡æ¯ã€‚

#### æ¶æ„ç›®æ ‡

- **é«˜å¯ç”¨æ€§**ï¼šç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œï¼Œæ•…éšœè‡ªåŠ¨æ¢å¤
- **é«˜æ€§èƒ½**ï¼šå“åº”è¿…é€Ÿï¼Œèµ„æºåˆ©ç”¨é«˜æ•ˆ
- **é«˜å®‰å…¨æ€§**ï¼šæ•°æ®åŠ å¯†ï¼Œæƒé™ä¸¥æ ¼æ§åˆ¶
- **é«˜æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºåŠŸèƒ½æ‰©å±•
- **é«˜å¯ç»´æŠ¤æ€§**ï¼šä»£ç æ¸…æ™°ï¼Œæ–‡æ¡£å®Œå–„

#### è®¾è®¡åŸåˆ™

- **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
- **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- **ä¾èµ–å€’ç½®**ï¼šä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°
- **æ¥å£éš”ç¦»**ï¼šä½¿ç”¨ç»†ç²’åº¦çš„æ¥å£
- **è¿ªç±³ç‰¹æ³•åˆ™**ï¼šæœ€å°‘çŸ¥è¯†åŸåˆ™



## æ¶æ„è®¾è®¡

### æ¶æ„è®¾è®¡

#### æ•´ä½“æ¶æ„

ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬ï¼š

- **è¡¨ç°å±‚**ï¼šè´Ÿè´£ç”¨æˆ·ç•Œé¢å’Œäº¤äº’
- **åº”ç”¨å±‚**ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘
- **ä¸šåŠ¡å±‚**ï¼šå®ç°æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½
- **æ•°æ®å±‚**ï¼šç®¡ç†æ•°æ®å­˜å‚¨å’Œè®¿é—®
- **åŸºç¡€è®¾æ–½å±‚**ï¼šæä¾›åŸºç¡€æœåŠ¡æ”¯æŒ

#### æ¨¡å—åˆ’åˆ†

ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ç‰¹å®šåŠŸèƒ½ï¼š

- **ç”¨æˆ·æ¨¡å—**ï¼šç”¨æˆ·ç®¡ç†å’Œè®¤è¯
- **è®¢å•æ¨¡å—**ï¼šè®¢å•å¤„ç†å’Œç®¡ç†
- **æ”¯ä»˜æ¨¡å—**ï¼šæ”¯ä»˜é›†æˆå’Œå¤„ç†
- **é€šçŸ¥æ¨¡å—**ï¼šæ¶ˆæ¯é€šçŸ¥å’Œæ¨é€
- **æŠ¥è¡¨æ¨¡å—**ï¼šæ•°æ®ç»Ÿè®¡å’Œåˆ†æ

#### æŠ€æœ¯é€‰å‹

- **å‰ç«¯æ¡†æ¶**ï¼šReact / Vue
- **åç«¯æ¡†æ¶**ï¼šNode.js / Express / Fastify
- **æ•°æ®åº“**ï¼šPostgreSQL / MongoDB
- **ç¼“å­˜**ï¼šRedis
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šRabbitMQ / Kafka



## æŠ€æœ¯å®ç°

### æŠ€æœ¯å®ç°

#### æ ¸å¿ƒæŠ€æœ¯æ ˆ

```typescript
// æ ¸å¿ƒä¾èµ–
{
  "dependencies": {
    "react": "^18.0.0",
    "typescript": "^5.0.0",
    "express": "^4.18.0",
    "prisma": "^5.0.0",
    "redis": "^4.6.0"
  }
}
```

#### å…³é”®å®ç°

1. **æœåŠ¡å±‚å®ç°**
```typescript
class UserService {
  async createUser(data: CreateUserDto): Promise<User> {
    // éªŒè¯è¾“å…¥
    this.validateUserData(data);
    
    // åŠ å¯†å¯†ç 
    const hashedPassword = await this.hashPassword(data.password);
    
    // åˆ›å»ºç”¨æˆ·
    const user = await this.userRepository.create({
      ...data,
      password: hashedPassword
    });
    
    return user;
  }
}
```

2. **ä¸­é—´ä»¶å®ç°**
```typescript
const authMiddleware = async (req: Request, res: Response, next: NextFunction) => {
  const token = req.headers.authorization?.split(' ')[1];
  
  if (!token) {
    return res.status(401).json({ error: 'æœªæˆæƒè®¿é—®' });
  }
  
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.user = decoded;
    next();
  } catch (error) {
    return res.status(401).json({ error: 'ä»¤ç‰Œæ— æ•ˆ' });
  }
};
```



## éƒ¨ç½²æ–¹æ¡ˆ

### éƒ¨ç½²æ–¹æ¡ˆ

#### éƒ¨ç½²æ¶æ„

é‡‡ç”¨å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆï¼Œä½¿ç”¨Dockerå’ŒKubernetesè¿›è¡Œç¼–æ’ã€‚

#### éƒ¨ç½²æ­¥éª¤

1. **ç¯å¢ƒå‡†å¤‡**
```bash
# å®‰è£…Docker
curl -fsSL https://get.docker.com | sh

# å®‰è£…Kubernetes
# æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©ç›¸åº”çš„å®‰è£…æ–¹å¼
```

2. **æ„å»ºé•œåƒ**
```bash
# æ„å»ºåº”ç”¨é•œåƒ
docker build -t yyc3-app:latest .

# æ¨é€åˆ°é•œåƒä»“åº“
docker push registry.example.com/yyc3-app:latest
```

3. **éƒ¨ç½²åˆ°Kubernetes**
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: yyc3-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: yyc3-app
  template:
    metadata:
      labels:
        app: yyc3-app
    spec:
      containers:
      - name: app
        image: registry.example.com/yyc3-app:latest
        ports:
        - containerPort: 3000
        env:
        - name: NODE_ENV
          value: "production"
```

4. **é…ç½®æœåŠ¡**
```yaml
apiVersion: v1
kind: Service
metadata:
  name: yyc3-app-service
spec:
  selector:
    app: yyc3-app
  ports:
  - protocol: TCP
    port: 80
    targetPort: 3000
  type: LoadBalancer
```



## æ€§èƒ½ä¼˜åŒ–

### æ€§èƒ½ä¼˜åŒ–

#### å‰ç«¯ä¼˜åŒ–

1. **ä»£ç åˆ†å‰²**
```typescript
// è·¯ç”±çº§åˆ«ä»£ç åˆ†å‰²
const Home = lazy(() => import('./pages/Home'));
const About = lazy(() => import('./pages/About'));

function App() {
  return (
    <Suspense fallback={<Loading />}>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
      </Routes>
    </Suspense>
  );
}
```

2. **ç¼“å­˜ç­–ç•¥**
```typescript
// React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
const MemoizedComponent = React.memo(({ data }) => {
  return <div>{data.value}</div>;
});

// useMemo ç¼“å­˜è®¡ç®—ç»“æœ
const expensiveValue = useMemo(() => {
  return computeExpensiveValue(data);
}, [data]);
```

#### åç«¯ä¼˜åŒ–

1. **æ•°æ®åº“ä¼˜åŒ–**
```typescript
// ä½¿ç”¨ç´¢å¼•
CREATE INDEX idx_user_email ON users(email);

// æŸ¥è¯¢ä¼˜åŒ–
const users = await prisma.user.findMany({
  select: {
    id: true,
    name: true,
    email: true
  },
  where: {
    active: true
  },
  take: 100
});
```

2. **ç¼“å­˜ç­–ç•¥**
```typescript
// Redisç¼“å­˜
async function getUser(id: string): Promise<User> {
  const cacheKey = `user:${id}`;
  
  // å°è¯•ä»ç¼“å­˜è·å–
  const cached = await redis.get(cacheKey);
  if (cached) {
    return JSON.parse(cached);
  }
  
  // ä»æ•°æ®åº“è·å–
  const user = await prisma.user.findUnique({ where: { id } });
  
  // å†™å…¥ç¼“å­˜
  await redis.setex(cacheKey, 3600, JSON.stringify(user));
  
  return user;
}
```



## å®‰å…¨è€ƒè™‘

### å®‰å…¨è€ƒè™‘

#### è®¤è¯ä¸æˆæƒ

1. **JWTè®¤è¯**
```typescript
// ç”ŸæˆJWTä»¤ç‰Œ
const token = jwt.sign(
  { userId: user.id, role: user.role },
  process.env.JWT_SECRET,
  { expiresIn: '24h' }
);

// éªŒè¯JWTä»¤ç‰Œ
const decoded = jwt.verify(token, process.env.JWT_SECRET);
```

2. **RBACæˆæƒ**
```typescript
// è§’è‰²æƒé™æ£€æŸ¥
function checkPermission(user: User, resource: string, action: string): boolean {
  const permissions = rolePermissions[user.role];
  return permissions.some(p => 
    p.resource === resource && p.actions.includes(action)
  );
}
```

#### æ•°æ®ä¿æŠ¤

1. **è¾“å…¥éªŒè¯**
```typescript
// ä½¿ç”¨Zodè¿›è¡Œè¾“å…¥éªŒè¯
const createUserSchema = z.object({
  email: z.string().email(),
  password: z.string().min(8).regex(/[A-Z]/),
  name: z.string().min(2)
});

const validated = createUserSchema.parse(input);
```

2. **æ•°æ®åŠ å¯†**
```typescript
// ä½¿ç”¨bcryptåŠ å¯†å¯†ç 
const hashedPassword = await bcrypt.hash(password, 10);

// éªŒè¯å¯†ç 
const isValid = await bcrypt.compare(password, hashedPassword);
```

#### å®‰å…¨å¤´é…ç½®

```typescript
// Expresså®‰å…¨å¤´é…ç½®
app.use(helmet());
app.use(cors({
  origin: process.env.ALLOWED_ORIGINS?.split(','),
  credentials: true
}));
```



## ç›‘æ§å‘Šè­¦

### ç›‘æ§å‘Šè­¦

#### ç›‘æ§æŒ‡æ ‡

1. **ç³»ç»ŸæŒ‡æ ‡**
- CPUä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- ç£ç›˜ä½¿ç”¨ç‡
- ç½‘ç»œI/O

2. **åº”ç”¨æŒ‡æ ‡**
- è¯·æ±‚é‡(RPS)
- å“åº”æ—¶é—´
- é”™è¯¯ç‡
- å¹¶å‘ç”¨æˆ·æ•°

3. **ä¸šåŠ¡æŒ‡æ ‡**
- ç”¨æˆ·æ³¨å†Œæ•°
- è®¢å•åˆ›å»ºæ•°
- æ”¯ä»˜æˆåŠŸç‡
- ç”¨æˆ·æ´»è·ƒåº¦

#### ç›‘æ§å·¥å…·

```typescript
// PrometheusæŒ‡æ ‡æ”¶é›†
import { Counter, Histogram, Gauge } from 'prom-client';

const requestCounter = new Counter({
  name: 'http_requests_total',
  help: 'Total number of HTTP requests',
  labelNames: ['method', 'route', 'status']
});

const responseTime = new Histogram({
  name: 'http_request_duration_seconds',
  help: 'HTTP request duration in seconds',
  labelNames: ['method', 'route']
});

// ä½¿ç”¨ä¸­é—´ä»¶è®°å½•æŒ‡æ ‡
app.use((req, res, next) => {
  const start = Date.now();
  
  res.on('finish', () => {
    const duration = (Date.now() - start) / 1000;
    requestCounter.inc({
      method: req.method,
      route: req.route?.path || req.path,
      status: res.statusCode
    });
    responseTime.observe({
      method: req.method,
      route: req.route?.path || req.path
    }, duration);
  });
  
  next();
});
```

#### å‘Šè­¦è§„åˆ™

```yaml
groups:
- name: api_alerts
  rules:
  - alert: HighErrorRate
    expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "APIé”™è¯¯ç‡è¿‡é«˜"
      description: "5åˆ†é’Ÿå†…é”™è¯¯ç‡è¶…è¿‡5%"
  
  - alert: HighResponseTime
    expr: histogram_quantile(0.95, http_request_duration_seconds) > 1
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "APIå“åº”æ—¶é—´è¿‡é•¿"
      description: "95%åˆ†ä½å“åº”æ—¶é—´è¶…è¿‡1ç§’"
```



## æœ€ä½³å®è·µ

### æœ€ä½³å®è·µ

#### ä»£ç è§„èŒƒ

1. **å‘½åè§„èŒƒ**
```typescript
// å˜é‡ï¼šcamelCase
const userName = 'John';

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;

// ç±»ï¼šPascalCase
class UserService { }

// æ¥å£ï¼šPascalCaseï¼Œå‰ç¼€Iï¼ˆå¯é€‰ï¼‰
interface IUserService { }
```

2. **æ³¨é‡Šè§„èŒƒ**
```typescript
/**
 * åˆ›å»ºç”¨æˆ·
 * @param email - ç”¨æˆ·é‚®ç®±
 * @param password - ç”¨æˆ·å¯†ç 
 * @returns åˆ›å»ºçš„ç”¨æˆ·å¯¹è±¡
 * @throws {Error} å½“é‚®ç®±å·²å­˜åœ¨æ—¶æŠ›å‡ºé”™è¯¯
 */
async function createUser(
  email: string, 
  password: string
): Promise<User> {
  // å®ç°
}
```

#### é”™è¯¯å¤„ç†

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
class AppError extends Error {
  constructor(
    public statusCode: number,
    public message: string,
    public isOperational = true
  ) {
    super(message);
    this.name = this.constructor.name;
    Error.captureStackTrace(this, this.constructor);
  }
}

// ä½¿ç”¨é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((err: Error, req: Request, res: Response, next: NextFunction) => {
  if (err instanceof AppError) {
    return res.status(err.statusCode).json({
      success: false,
      error: err.message
    });
  }
  
  // è®°å½•æœªé¢„æœŸçš„é”™è¯¯
  logger.error('Unexpected error:', err);
  
  return res.status(500).json({
    success: false,
    error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
  });
});
```

#### æ—¥å¿—è®°å½•

```typescript
// ç»“æ„åŒ–æ—¥å¿—
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

// ä½¿ç”¨æ—¥å¿—
logger.info('User created', { userId: user.id, email: user.email });
logger.error('Database connection failed', { error: error.message });
```



## æœ€ä½³å®è·µ

### æœ€ä½³å®è·µ

#### ä»£ç è§„èŒƒ

1. **å‘½åè§„èŒƒ**
```typescript
// å˜é‡ï¼šcamelCase
const userName = 'John';

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;

// ç±»ï¼šPascalCase
class UserService { }

// æ¥å£ï¼šPascalCaseï¼Œå‰ç¼€Iï¼ˆå¯é€‰ï¼‰
interface IUserService { }
```

2. **æ³¨é‡Šè§„èŒƒ**
```typescript
/**
 * åˆ›å»ºç”¨æˆ·
 * @param email - ç”¨æˆ·é‚®ç®±
 * @param password - ç”¨æˆ·å¯†ç 
 * @returns åˆ›å»ºçš„ç”¨æˆ·å¯¹è±¡
 * @throws {Error} å½“é‚®ç®±å·²å­˜åœ¨æ—¶æŠ›å‡ºé”™è¯¯
 */
async function createUser(
  email: string, 
  password: string
): Promise<User> {
  // å®ç°
}
```

#### é”™è¯¯å¤„ç†

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
class AppError extends Error {
  constructor(
    public statusCode: number,
    public message: string,
    public isOperational = true
  ) {
    super(message);
    this.name = this.constructor.name;
    Error.captureStackTrace(this, this.constructor);
  }
}

// ä½¿ç”¨é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((err: Error, req: Request, res: Response, next: NextFunction) => {
  if (err instanceof AppError) {
    return res.status(err.statusCode).json({
      success: false,
      error: err.message
    });
  }
  
  // è®°å½•æœªé¢„æœŸçš„é”™è¯¯
  logger.error('Unexpected error:', err);
  
  return res.status(500).json({
    success: false,
    error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
  });
});
```

#### æ—¥å¿—è®°å½•

```typescript
// ç»“æ„åŒ–æ—¥å¿—
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

// ä½¿ç”¨æ—¥å¿—
logger.info('User created', { userId: user.id, email: user.email });
logger.error('Database connection failed', { error: error.message });
```


## ç›¸å…³æ–‡æ¡£

- [ğŸ”– YYCÂ³ API æ¥å£è®¾è®¡æ–‡æ¡£](YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»/05-YYC3-Cater--æ¶æ„ç±»-APIæ¥å£è®¾è®¡æ–‡æ¡£.md) - YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»
- [ğŸ”– YYCÂ³ ç›‘æ§æ¶æ„è®¾è®¡æ–‡æ¡£](YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»/09-YYC3-Cater--æ¶æ„ç±»-ç›‘æ§æ¶æ„è®¾è®¡æ–‡æ¡£.md) - YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»
- [ğŸ”– YYCÂ³ æ™ºèƒ½æ¶æ„è®¾è®¡æ–‡æ¡£](YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»/08-YYC3-Cater--æ¶æ„ç±»-æ™ºèƒ½æ¶æ„è®¾è®¡æ–‡æ¡£.md) - YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»
- [YYC3 åˆç°ç³»ç»Ÿè‰²](YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»/16-YYC3-Cater--æ¶æ„ç±»-ç³»ç»Ÿè‰²è®¾è®¡è§„èŒƒ.md) - YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»
- [ğŸ”– YYCÂ³ å¾®æœåŠ¡æ¶æ„è®¾è®¡æ–‡æ¡£](YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»/03-YYC3-Cater--æ¶æ„ç±»-å¾®æœåŠ¡æ¶æ„è®¾è®¡æ–‡æ¡£.md) - YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»
