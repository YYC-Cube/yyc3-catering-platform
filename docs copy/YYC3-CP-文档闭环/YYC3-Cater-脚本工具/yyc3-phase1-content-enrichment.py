#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
@file: yyc3-phase1-content-enrichment.py
@description: YYCÂ³æ–‡æ¡£é—­ç¯ç³»ç»Ÿç¬¬ä¸€é˜¶æ®µï¼ˆP0ï¼‰å†…å®¹è¡¥å……è„šæœ¬
@author: YYCÂ³
@version: 1.0.0
@created: 2025-01-30
@copyright: Copyright (c) 2025 YYCÂ³
@license: MIT
"""

import os
import re
from pathlib import Path
from typing import Dict, List

# æ–‡æ¡£æ ¹ç›®å½•
DOCS_ROOT = "/Users/yanyu/yyc3-catering-platform/docs/YYC3-Cater-Platform-æ–‡æ¡£é—­ç¯"

# å†…å®¹è¡¥å……æ¨¡æ¿
CONTENT_TEMPLATES = {
    "æ¶æ„è®¾è®¡": {
        "1.1 è®¾è®¡ç›®æ ‡": """
æœ¬æ¶æ„è®¾è®¡æ–‡æ¡£æ—¨åœ¨ä¸ºYYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°æä¾›æ¸…æ™°ã€å®Œæ•´çš„æŠ€æœ¯æ¶æ„æŒ‡å¯¼ã€‚ä¸»è¦ç›®æ ‡åŒ…æ‹¬ï¼š

- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒä¸šåŠ¡å¿«é€Ÿæ‰©å±•ï¼Œæ¨¡å—åŒ–è®¾è®¡ä¾¿äºåŠŸèƒ½è¿­ä»£
- **é«˜æ€§èƒ½**ï¼šä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼Œç¡®ä¿é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ç¨³å®šè¿è¡Œ
- **é«˜å¯ç”¨æ€§**ï¼šå®ç°ç³»ç»Ÿé«˜å¯ç”¨ï¼Œæ•…éšœè‡ªåŠ¨æ¢å¤ï¼Œä¿éšœä¸šåŠ¡è¿ç»­æ€§
- **å®‰å…¨æ€§**ï¼šå»ºç«‹å®Œå–„çš„å®‰å…¨ä½“ç³»ï¼Œä¿æŠ¤æ•°æ®å’Œç³»ç»Ÿå®‰å…¨
- **æ˜“ç»´æŠ¤æ€§**ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œæ–‡æ¡£å®Œå–„ï¼Œä¾¿äºå›¢é˜Ÿåä½œå’Œç»´æŠ¤

é€šè¿‡æœ¬æ¶æ„è®¾è®¡ï¼Œç¡®ä¿å¹³å°èƒ½å¤Ÿæ»¡è¶³å½“å‰ä¸šåŠ¡éœ€æ±‚ï¼Œå¹¶ä¸ºæœªæ¥çš„å‘å±•å¥ å®šåšå®åŸºç¡€ã€‚
""",
        "1.2 è®¾è®¡åŸåˆ™": """
æ¶æ„è®¾è®¡éµå¾ªä»¥ä¸‹æ ¸å¿ƒåŸåˆ™ï¼š

- **å•ä¸€èŒè´£åŸåˆ™**ï¼šæ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„ä¸šåŠ¡åŠŸèƒ½
- **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•
- **ä¾èµ–å€’ç½®åŸåˆ™**ï¼šé«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œéƒ½ä¾èµ–æŠ½è±¡
- **æ¥å£éš”ç¦»åŸåˆ™**ï¼šä½¿ç”¨ç»†ç²’åº¦çš„æ¥å£ï¼Œé¿å…æ¥å£æ±¡æŸ“
- **æœ€å°‘çŸ¥è¯†åŸåˆ™**ï¼šæ¨¡å—é—´æœ€å°åŒ–ä¾èµ–ï¼Œé™ä½è€¦åˆåº¦

åŒæ—¶éµå¾ªYYCÂ³ã€Œäº”é«˜äº”æ ‡äº”åŒ–ã€æ ¸å¿ƒç†å¿µï¼š
- **äº”é«˜**ï¼šé«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€é«˜å®‰å…¨ã€é«˜æ‰©å±•ã€é«˜å¯ç»´æŠ¤
- **äº”æ ‡**ï¼šæ ‡å‡†åŒ–ã€è§„èŒƒåŒ–ã€è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–ã€å¯è§†åŒ–
- **äº”åŒ–**ï¼šæµç¨‹åŒ–ã€æ–‡æ¡£åŒ–ã€å·¥å…·åŒ–ã€æ•°å­—åŒ–ã€ç”Ÿæ€åŒ–
""",
        "1.3 æŠ€æœ¯é€‰å‹": """
æŠ€æœ¯æ ˆé€‰æ‹©åŸºäºä»¥ä¸‹è€ƒè™‘ï¼š

**å‰ç«¯æŠ€æœ¯æ ˆ**
- React 18+ï¼šé‡‡ç”¨ç°ä»£åŒ–å‰ç«¯æ¡†æ¶ï¼Œç»„ä»¶åŒ–å¼€å‘
- TypeScript 5.0+ï¼šç±»å‹å®‰å…¨ï¼Œæé«˜ä»£ç è´¨é‡
- Next.js 14+ï¼šSSR/SSGæ”¯æŒï¼Œä¼˜åŒ–SEOå’Œæ€§èƒ½
- Tailwind CSSï¼šåŸå­åŒ–CSSï¼Œå¿«é€Ÿæ„å»ºUI

**åç«¯æŠ€æœ¯æ ˆ**
- Node.js 18+ï¼šé«˜æ€§èƒ½JavaScriptè¿è¡Œæ—¶
- Express/Fastifyï¼šè½»é‡çº§Webæ¡†æ¶
- PostgreSQL 15+ï¼šå…³ç³»å‹æ•°æ®åº“ï¼ŒACIDä¿è¯
- Redis 7+ï¼šç¼“å­˜å’Œä¼šè¯å­˜å‚¨

**åŸºç¡€è®¾æ–½**
- Dockerï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼Œç¯å¢ƒä¸€è‡´æ€§
- Kubernetesï¼šå®¹å™¨ç¼–æ’ï¼Œè‡ªåŠ¨åŒ–è¿ç»´
- Nginxï¼šåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡
- Prometheus + Grafanaï¼šç›‘æ§å’Œå‘Šè­¦

**å¼€å‘å·¥å…·**
- Gitï¼šç‰ˆæœ¬æ§åˆ¶
- ESLint + Prettierï¼šä»£ç è§„èŒƒ
- Jest + Vitestï¼šå•å…ƒæµ‹è¯•
- GitHub Actionsï¼šCI/CDè‡ªåŠ¨åŒ–
""",
        "2.1 æ•´ä½“æ¶æ„": """
YYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†ä¸ºä»¥ä¸‹å±‚æ¬¡ï¼š

**è¡¨ç°å±‚ï¼ˆPresentation Layerï¼‰**
- Webå‰ç«¯ï¼šReact + Next.jsæ„å»ºçš„å•é¡µåº”ç”¨
- ç§»åŠ¨ç«¯ï¼šå“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šè®¾å¤‡è®¿é—®
- ç®¡ç†åå°ï¼šç‹¬ç«‹çš„ç®¡ç†ç•Œé¢

**åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰**
- APIç½‘å…³ï¼šç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±åˆ†å‘
- ä¸šåŠ¡æœåŠ¡ï¼šè®¢å•ã€ç”¨æˆ·ã€å•†å“ç­‰æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- è®¤è¯æˆæƒï¼šJWTè®¤è¯ï¼ŒRBACæƒé™æ§åˆ¶

**é¢†åŸŸå±‚ï¼ˆDomain Layerï¼‰**
- é¢†åŸŸæ¨¡å‹ï¼šæ ¸å¿ƒä¸šåŠ¡å®ä½“å’Œè§„åˆ™
- é¢†åŸŸæœåŠ¡ï¼šå¤æ‚ä¸šåŠ¡é€»è¾‘å°è£…
- ä»“å‚¨æ¥å£ï¼šæ•°æ®è®¿é—®æŠ½è±¡

**åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructure Layerï¼‰**
- æ•°æ®åº“ï¼šPostgreSQLä¸»ä»æ¶æ„
- ç¼“å­˜ï¼šRedisé›†ç¾¤
- æ¶ˆæ¯é˜Ÿåˆ—ï¼šRabbitMQ/Kafka
- æ–‡ä»¶å­˜å‚¨ï¼šOSS/MinIO

**è·¨å±‚å…³æ³¨ç‚¹**
- æ—¥å¿—ç›‘æ§ï¼šELK Stack
- é…ç½®ç®¡ç†ï¼šApollo/Nacos
- æœåŠ¡å‘ç°ï¼šConsul/Eureka
- é“¾è·¯è¿½è¸ªï¼šJaeger/SkyWalking
""",
        "2.2 æ¨¡å—åˆ’åˆ†": """
ç³»ç»ŸæŒ‰ç…§ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†ä¸ºä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š

**ç”¨æˆ·æ¨¡å—ï¼ˆUser Moduleï¼‰**
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€è®¤è¯
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- æƒé™å’Œè§’è‰²ç®¡ç†

**å•†å“æ¨¡å—ï¼ˆProduct Moduleï¼‰**
- å•†å“ä¿¡æ¯ç®¡ç†
- å•†å“åˆ†ç±»å’Œæ ‡ç­¾
- åº“å­˜ç®¡ç†

**è®¢å•æ¨¡å—ï¼ˆOrder Moduleï¼‰**
- è®¢å•åˆ›å»ºå’Œæ”¯ä»˜
- è®¢å•çŠ¶æ€æµè½¬
- è®¢å•æŸ¥è¯¢å’Œç»Ÿè®¡

**æ”¯ä»˜æ¨¡å—ï¼ˆPayment Moduleï¼‰**
- æ”¯ä»˜æ¥å£é›†æˆ
- æ”¯ä»˜çŠ¶æ€åŒæ­¥
- é€€æ¬¾å¤„ç†

**è¥é”€æ¨¡å—ï¼ˆMarketing Moduleï¼‰**
- ä¼˜æƒ åˆ¸ç®¡ç†
- ä¿ƒé”€æ´»åŠ¨
- ä¼šå‘˜ç§¯åˆ†

**æŠ¥è¡¨æ¨¡å—ï¼ˆReport Moduleï¼‰**
- é”€å”®æŠ¥è¡¨
- æ•°æ®åˆ†æ
- å¯è§†åŒ–å±•ç¤º

**ç³»ç»Ÿæ¨¡å—ï¼ˆSystem Moduleï¼‰**
- é…ç½®ç®¡ç†
- æ—¥å¿—ç®¡ç†
- ç›‘æ§å‘Šè­¦
"""
    },
    "å¼€å‘å®æ–½": {
        "1.1 åŠŸèƒ½è¯´æ˜": """
æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†YYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°ç›¸å…³åŠŸèƒ½çš„å®ç°æ–¹æ¡ˆã€‚é€šè¿‡æœ¬æ–‡æ¡£ï¼Œå¼€å‘äººå‘˜å¯ä»¥ï¼š

- ç†è§£åŠŸèƒ½éœ€æ±‚å’Œä¸šåŠ¡é€»è¾‘
- æŒæ¡æŠ€æœ¯å®ç°æ–¹æ¡ˆ
- äº†è§£æ¥å£è®¾è®¡å’Œæ•°æ®ç»“æ„
- å¿«é€Ÿä¸Šæ‰‹å¼€å‘å’Œç»´æŠ¤

åŠŸèƒ½å®ç°éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š
- **ç”¨æˆ·å‹å¥½**ï¼šç•Œé¢ç®€æ´ï¼Œæ“ä½œæµç•…
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå“åº”è¿…é€Ÿï¼Œä½“éªŒæµç•…
- **å®‰å…¨å¯é **ï¼šæ•°æ®å®‰å…¨ï¼Œç³»ç»Ÿç¨³å®š
- **æ˜“äºæ‰©å±•**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºè¿­ä»£
""",
        "1.2 æŠ€æœ¯æ ˆ": """
æœ¬åŠŸèƒ½å®ç°ä½¿ç”¨ä»¥ä¸‹æŠ€æœ¯æ ˆï¼š

**å‰ç«¯æŠ€æœ¯**
- React 18+ï¼šç»„ä»¶åŒ–å¼€å‘
- TypeScript 5.0+ï¼šç±»å‹å®‰å…¨
- Ant Designï¼šUIç»„ä»¶åº“
- Axiosï¼šHTTPå®¢æˆ·ç«¯

**åç«¯æŠ€æœ¯**
- Node.js 18+ï¼šæœåŠ¡ç«¯è¿è¡Œæ—¶
- Expressï¼šWebæ¡†æ¶
- TypeScriptï¼šç±»å‹å®‰å…¨
- Prismaï¼šORMæ¡†æ¶

**æ•°æ®åº“**
- PostgreSQL 15+ï¼šå…³ç³»å‹æ•°æ®åº“
- Redis 7+ï¼šç¼“å­˜æ•°æ®åº“

**å·¥å…·é“¾**
- ESLintï¼šä»£ç æ£€æŸ¥
- Prettierï¼šä»£ç æ ¼å¼åŒ–
- Jestï¼šå•å…ƒæµ‹è¯•
- GitHub Actionsï¼šCI/CD
""",
        "1.3 å¼€å‘ç¯å¢ƒ": """
å¼€å‘ç¯å¢ƒé…ç½®è¦æ±‚ï¼š

**ç³»ç»Ÿè¦æ±‚**
- æ“ä½œç³»ç»Ÿï¼šmacOS/Linux/Windows
- Node.jsï¼š18.0.0æˆ–æ›´é«˜ç‰ˆæœ¬
- npmï¼š9.0.0æˆ–æ›´é«˜ç‰ˆæœ¬
- Gitï¼š2.30.0æˆ–æ›´é«˜ç‰ˆæœ¬

**æ•°æ®åº“**
- PostgreSQLï¼š15.0æˆ–æ›´é«˜ç‰ˆæœ¬
- Redisï¼š7.0æˆ–æ›´é«˜ç‰ˆæœ¬

**å¼€å‘å·¥å…·**
- VS Codeï¼šæ¨èIDE
- Postmanï¼šAPIæµ‹è¯•å·¥å…·
- DBeaverï¼šæ•°æ®åº“ç®¡ç†å·¥å…·

**ç¯å¢ƒå˜é‡**
åˆ›å»º`.env`æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å˜é‡ï¼š
```env
NODE_ENV=development
PORT=3000
DATABASE_URL=postgresql://user:password@localhost:5432/yyc3
REDIS_URL=redis://localhost:6379
JWT_SECRET=your-secret-key
```
"""
    },
    "æŠ€å·§ç±»": {
        "1.1 æŠ€å·§è¯´æ˜": """
æœ¬æ–‡æ¡£åˆ†äº«äº†YYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°å¼€å‘è¿‡ç¨‹ä¸­çš„å®ç”¨æŠ€å·§å’Œæœ€ä½³å®è·µã€‚é€šè¿‡å­¦ä¹ å’Œåº”ç”¨è¿™äº›æŠ€å·§ï¼Œå¯ä»¥ï¼š

- æé«˜å¼€å‘æ•ˆç‡
- ä¼˜åŒ–ä»£ç è´¨é‡
- å‡å°‘å¸¸è§é”™è¯¯
- æå‡å›¢é˜Ÿåä½œèƒ½åŠ›

æŠ€å·§æ¥æºäºå®é™…é¡¹ç›®ç»éªŒï¼Œç»è¿‡å®è·µéªŒè¯ï¼Œå…·æœ‰å¾ˆå¼ºçš„å®ç”¨æ€§å’Œå¯æ“ä½œæ€§ã€‚
""",
        "1.2 é€‚ç”¨åœºæ™¯": """
æœ¬æŠ€å·§é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š

- **æ—¥å¸¸å¼€å‘**ï¼šæé«˜ç¼–ç æ•ˆç‡ï¼Œå‡å°‘é‡å¤å·¥ä½œ
- **ä»£ç å®¡æŸ¥**ï¼šä½œä¸ºä»£ç è´¨é‡æ£€æŸ¥çš„å‚è€ƒæ ‡å‡†
- **å›¢é˜ŸåŸ¹è®­**ï¼šæ–°æˆå‘˜å¿«é€Ÿäº†è§£é¡¹ç›®è§„èŒƒ
- **é—®é¢˜æ’æŸ¥**ï¼šå¿«é€Ÿå®šä½å’Œè§£å†³å¸¸è§é—®é¢˜
- **æ€§èƒ½ä¼˜åŒ–**ï¼šè¯†åˆ«å’Œä¼˜åŒ–æ€§èƒ½ç“¶é¢ˆ

åœ¨ä½¿ç”¨è¿™äº›æŠ€å·§æ—¶ï¼Œè¯·æ ¹æ®å®é™…é¡¹ç›®æƒ…å†µè¿›è¡Œè°ƒæ•´å’Œä¼˜åŒ–ã€‚
""",
        "1.3 æ³¨æ„äº‹é¡¹": """
åœ¨åº”ç”¨è¿™äº›æŠ€å·§æ—¶ï¼Œè¯·æ³¨æ„ä»¥ä¸‹äº‹é¡¹ï¼š

- **å› åœ°åˆ¶å®œ**ï¼šæ ¹æ®é¡¹ç›®å®é™…æƒ…å†µé€‰æ‹©åˆé€‚çš„æŠ€å·§
- **æŒç»­å­¦ä¹ **ï¼šæŠ€æœ¯å’Œæœ€ä½³å®è·µåœ¨ä¸æ–­æ¼”è¿›ï¼Œä¿æŒå­¦ä¹ æ€åº¦
- **å›¢é˜Ÿåä½œ**ï¼šä¸å›¢é˜Ÿæˆå‘˜åˆ†äº«å’Œè®¨è®ºï¼Œå½¢æˆå…±è¯†
- **æ–‡æ¡£æ›´æ–°**ï¼šåŠæ—¶æ›´æ–°æ–‡æ¡£ï¼Œä¿æŒå†…å®¹çš„æ—¶æ•ˆæ€§
- **åé¦ˆæ”¹è¿›**ï¼šæ”¶é›†ä½¿ç”¨åé¦ˆï¼ŒæŒç»­æ”¹è¿›å’Œä¼˜åŒ–

è®°ä½ï¼Œæ²¡æœ‰é“¶å¼¹ï¼Œåˆé€‚çš„æ‰æ˜¯æœ€å¥½çš„ã€‚
"""
    },
    "é»˜è®¤": {
        "1.1 è¯´æ˜": """
æœ¬æ–‡æ¡£æ˜¯YYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°æ–‡æ¡£ä½“ç³»çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ—¨åœ¨æä¾›æ¸…æ™°ã€å®Œæ•´ã€å‡†ç¡®çš„ä¿¡æ¯ã€‚

é€šè¿‡æœ¬æ–‡æ¡£ï¼Œè¯»è€…å¯ä»¥ï¼š
- äº†è§£ç›¸å…³æ¦‚å¿µå’ŒèƒŒæ™¯
- æŒæ¡æ ¸å¿ƒå†…å®¹å’Œè¦ç‚¹
- è·å¾—å®ç”¨çš„æŒ‡å¯¼å’Œå¸®åŠ©
- å‚è€ƒç›¸å…³çš„èµ„æºå’Œèµ„æ–™

æ–‡æ¡£éµå¾ªYYCÂ³å›¢é˜Ÿæ ‡å‡†åŒ–è§„èŒƒï¼Œç¡®ä¿å†…å®¹è´¨é‡å’Œä¸€è‡´æ€§ã€‚
""",
        "1.2 ç›®æ ‡": """
æœ¬æ–‡æ¡£çš„ä¸»è¦ç›®æ ‡åŒ…æ‹¬ï¼š

- **ä¿¡æ¯ä¼ é€’**ï¼šå‡†ç¡®ä¼ é€’ç›¸å…³ä¿¡æ¯å’ŒçŸ¥è¯†
- **æŒ‡å¯¼å®è·µ**ï¼šæä¾›å®ç”¨çš„æŒ‡å¯¼å’Œå‚è€ƒ
- **é™ä½æˆæœ¬**ï¼šå‡å°‘æ²Ÿé€šæˆæœ¬å’Œå­¦ä¹ æˆæœ¬
- **æé«˜æ•ˆç‡**ï¼šå¸®åŠ©è¯»è€…å¿«é€Ÿç†è§£å’Œåº”ç”¨

é€šè¿‡å®ç°è¿™äº›ç›®æ ‡ï¼Œæ–‡æ¡£èƒ½å¤Ÿä¸ºé¡¹ç›®çš„æˆåŠŸåšå‡ºé‡è¦è´¡çŒ®ã€‚
""",
        "1.3 èŒƒå›´": """
æœ¬æ–‡æ¡£çš„é€‚ç”¨èŒƒå›´ï¼š

- **é€‚ç”¨å¯¹è±¡**ï¼šå¼€å‘äººå‘˜ã€æµ‹è¯•äººå‘˜ã€è¿ç»´äººå‘˜ã€äº§å“ç»ç†ç­‰
- **é€‚ç”¨é˜¶æ®µ**ï¼šå¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ã€è¿ç»´ç­‰å„ä¸ªé˜¶æ®µ
- **é€‚ç”¨åœºæ™¯**ï¼šæ—¥å¸¸å¼€å‘ã€é—®é¢˜æ’æŸ¥ã€ç³»ç»Ÿç»´æŠ¤ç­‰

è¶…å‡ºæœ¬æ–‡æ¡£èŒƒå›´çš„å†…å®¹ï¼Œè¯·å‚è€ƒå…¶ä»–ç›¸å…³æ–‡æ¡£ã€‚
"""
    }
}


class ContentEnricher:
    """å†…å®¹è¡¥å……å™¨"""
    
    def __init__(self, docs_root: str):
        self.docs_root = Path(docs_root)
        self.stats = {
            "total_docs": 0,
            "enriched_docs": 0,
            "added_sections": 0
        }
    
    def find_all_markdown_files(self) -> List[Path]:
        """æŸ¥æ‰¾æ‰€æœ‰Markdownæ–‡ä»¶"""
        md_files = []
        for root, dirs, files in os.walk(self.docs_root):
            if "è„šæœ¬å·¥å…·" in root:
                continue
            for file in files:
                if file.endswith('.md'):
                    md_files.append(Path(root) / file)
        return md_files
    
    def determine_document_phase(self, file_path: Path) -> str:
        """ç¡®å®šæ–‡æ¡£æ‰€å±é˜¶æ®µ"""
        path_str = str(file_path)
        
        if 'æ¶æ„è®¾è®¡' in path_str:
            return 'æ¶æ„è®¾è®¡'
        elif 'å¼€å‘å®æ–½' in path_str:
            return 'å¼€å‘å®æ–½'
        elif 'æŠ€å·§ç±»' in path_str:
            return 'æŠ€å·§ç±»'
        else:
            return 'é»˜è®¤'
    
    def enrich_document(self, file_path: Path) -> bool:
        """è¡¥å……æ–‡æ¡£å†…å®¹"""
        try:
            with open(file_path, 'r', encoding='utf-8') as f:
                content = f.read()
        except Exception as e:
            print(f"âŒ æ— æ³•è¯»å–æ–‡ä»¶ {file_path}: {e}")
            return False
        
        phase = self.determine_document_phase(file_path)
        template = CONTENT_TEMPLATES.get(phase, CONTENT_TEMPLATES['é»˜è®¤'])
        
        new_content = content
        enriched = False
        
        # è¡¥å……å„ä¸ªç« èŠ‚çš„å†…å®¹
        for section_title, section_content in template.items():
            # æ£€æŸ¥ç« èŠ‚æ˜¯å¦å­˜åœ¨ä¸”å†…å®¹ä¸ºç©º
            section_pattern = rf'### {re.escape(section_title)}\s*\n\s*\n'
            if re.search(section_pattern, new_content):
                print(f"  ğŸ“ è¡¥å……ç« èŠ‚: {section_title}")
                # æ›¿æ¢ç©ºç« èŠ‚
                new_content = re.sub(
                    rf'### {re.escape(section_title)}\s*\n\s*\n',
                    f'### {section_title}\n{section_content}\n',
                    new_content,
                    count=1
                )
                enriched = True
                self.stats['added_sections'] += 1
        
        # ä¿å­˜æ”¹è¿›åçš„æ–‡æ¡£
        if enriched:
            try:
                with open(file_path, 'w', encoding='utf-8') as f:
                    f.write(new_content)
                self.stats['enriched_docs'] += 1
                print(f"  âœ… å·²è¡¥å……å†…å®¹: {file_path.name}")
                return True
            except Exception as e:
                print(f"  âŒ ä¿å­˜å¤±è´¥: {e}")
                return False
        
        return False
    
    def run(self, dry_run: bool = False):
        """è¿è¡Œå†…å®¹è¡¥å……æµç¨‹"""
        print("ğŸš€ å¼€å§‹æ‰§è¡Œç¬¬ä¸€é˜¶æ®µï¼ˆP0ï¼‰å†…å®¹è¡¥å……...")
        print(f"ğŸ“ æ–‡æ¡£æ ¹ç›®å½•: {self.docs_root}")
        print()
        
        # æŸ¥æ‰¾æ‰€æœ‰Markdownæ–‡ä»¶
        md_files = self.find_all_markdown_files()
        self.stats['total_docs'] = len(md_files)
        
        print(f"ğŸ“Š æ‰¾åˆ° {len(md_files)} ä¸ªMarkdownæ–‡ä»¶")
        print()
        
        # è¡¥å……æ¯ä¸ªæ–‡æ¡£çš„å†…å®¹
        for i, file_path in enumerate(md_files, 1):
            print(f"[{i}/{len(md_files)}] å¤„ç†: {file_path.name}")
            
            if not dry_run:
                self.enrich_document(file_path)
            
            print()
        
        # æ‰“å°ç»Ÿè®¡ä¿¡æ¯
        self.print_stats()
    
    def print_stats(self):
        """æ‰“å°ç»Ÿè®¡ä¿¡æ¯"""
        print("=" * 60)
        print("ğŸ“Š å†…å®¹è¡¥å……ç»Ÿè®¡")
        print("=" * 60)
        print(f"æ€»æ–‡æ¡£æ•°: {self.stats['total_docs']}")
        print(f"å·²è¡¥å……æ–‡æ¡£: {self.stats['enriched_docs']}")
        print(f"å·²è¡¥å……ç« èŠ‚: {self.stats['added_sections']}")
        print("=" * 60)


def main():
    """ä¸»å‡½æ•°"""
    import argparse
    
    parser = argparse.ArgumentParser(description='YYCÂ³æ–‡æ¡£é—­ç¯ç³»ç»Ÿç¬¬ä¸€é˜¶æ®µï¼ˆP0ï¼‰å†…å®¹è¡¥å……è„šæœ¬')
    parser.add_argument('--dry-run', action='store_true', help='ä»…åˆ†æï¼Œä¸ä¿®æ”¹æ–‡ä»¶')
    parser.add_argument('--docs-root', default=DOCS_ROOT, help='æ–‡æ¡£æ ¹ç›®å½•')
    
    args = parser.parse_args()
    
    enricher = ContentEnricher(args.docs_root)
    enricher.run(dry_run=args.dry_run)


if __name__ == '__main__':
    main()
