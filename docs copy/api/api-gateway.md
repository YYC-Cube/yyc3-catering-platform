# API 网关 API 文档

## 概述

API 网关是 YYC³ 餐饮平台的统一入口，负责路由请求、认证授权、限流熔断、日志记录等功能。

## 基础信息

- 服务名称：api-gateway
- 默认端口：3200
- 环境变量：
  - `PORT`：服务端口
  - `SERVICE_NAME`：服务名称
  - `NODE_ENV`：运行环境
  - `JWT_SECRET`：JWT 密钥
  - `RATE_LIMIT_WINDOW_MS`：限流窗口时间
  - `RATE_LIMIT_MAX_REQUESTS`：限流最大请求数

## 健康检查

### 获取服务健康状态

**请求**
- 方法：GET
- 路径：/health
- 认证：不需要

**响应**

```json
{
  "success": true,
  "status": "UP",
  "timestamp": "2025-01-30T08:00:00Z",
  "service": "api-gateway"
}
```

### 获取版本信息

**请求**
- 方法：GET
- 路径：/version
- 认证：不需要

**响应**

```json
{
  "success": true,
  "version": "1.0.0",
  "service": "api-gateway"
}
```

## 服务路由

### 用户服务路由

所有用户相关的请求都会被路由到用户服务：

- `/api/users/*` → 用户服务

### 餐厅服务路由

所有餐厅相关的请求都会被路由到餐厅服务：

- `/api/restaurants/*` → 餐厅服务

### 订单服务路由

所有订单相关的请求都会被路由到订单服务：

- `/api/orders/*` → 订单服务

### 通知服务路由

所有通知相关的请求都会被路由到通知服务：

- `/api/notifications/*` → 通知服务

### 支付服务路由

所有支付相关的请求都会被路由到支付服务：

- `/api/payments/*` → 支付服务

## 认证与授权

API 网关使用 JWT 进行认证，认证失败的请求会被拒绝。部分接口支持可选认证。

## 限流策略

API 网关实现了基于 IP 的限流策略，默认配置为：
- 窗口时间：60秒
- 最大请求数：100次

## 日志记录

API 网关会记录所有请求的详细信息，包括：
- 请求方法、路径、IP
- 响应状态码、响应时间
- 请求头、响应头
- 错误信息（如果有）

## 错误处理

API 网关会统一处理所有服务的错误，并返回标准化的错误响应。

## 联系我们

如有任何问题或建议，请联系 YYC³ 团队。
