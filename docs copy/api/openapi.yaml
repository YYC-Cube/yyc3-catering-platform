openapi: 3.0.3
info:
  title: YYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å° API
  description: |
    YYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å° RESTful API æ–‡æ¡£

    ## å¹³å°æ¦‚è¿°
    YYCÂ³æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–ç®¡ç†å¹³å°ï¼Œæä¾›ä»ç‚¹é¤ã€å¨æˆ¿ç®¡ç†ã€ä¼šå‘˜ç®¡ç†åˆ°è¥é”€æ´»åŠ¨çš„å…¨æ–¹ä½è§£å†³æ–¹æ¡ˆã€‚

    ## ä¸»è¦åŠŸèƒ½
    - ğŸ½ï¸ èœå•ç®¡ç†ï¼šèœå“ç®¡ç†ã€åˆ†ç±»ç®¡ç†ã€æ¨èç®¡ç†
    - ğŸ“‹ è®¢å•ç®¡ç†ï¼šè®¢å•å¤„ç†ã€çŠ¶æ€è·Ÿè¸ªã€ç»Ÿè®¡åˆ†æ
    - ğŸ‘¥ ä¼šå‘˜ç®¡ç†ï¼šä¼šå‘˜ä¿¡æ¯ã€ç­‰çº§ç§¯åˆ†ã€æ¶ˆè´¹è®°å½•
    - ğŸ¯ è¥é”€æ´»åŠ¨ï¼šä¼˜æƒ åˆ¸ã€ä¿ƒé”€æ´»åŠ¨ã€æ•°æ®åˆ†æ
    - ğŸ’³ æ”¯ä»˜ç®¡ç†ï¼šå¤šç§æ”¯ä»˜æ–¹å¼ã€äº¤æ˜“è®°å½•ã€é€€æ¬¾å¤„ç†
    - ğŸª é—¨åº—ç®¡ç†ï¼šå¤šé—¨åº—æ”¯æŒã€å‘˜å·¥ç®¡ç†ã€è¿è¥åˆ†æ
    - ğŸ“Š æŠ¥è¡¨åˆ†æï¼šé”€å”®æŠ¥è¡¨ã€è´¢åŠ¡æŠ¥è¡¨ã€è¿è¥æŠ¥è¡¨

    ## è®¤è¯æ–¹å¼
    æœ¬APIä½¿ç”¨JWT Bearer Tokenè¿›è¡Œèº«ä»½è®¤è¯ã€‚è¯·åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ï¼š
    ```
    Authorization: Bearer <your_token>
    ```

    ## ç¯å¢ƒä¿¡æ¯
    - ç”Ÿäº§ç¯å¢ƒ: https://api.yyc3.com
    - æµ‹è¯•ç¯å¢ƒ: https://api-test.yyc3.com
    - å¼€å‘ç¯å¢ƒ: http://localhost:3006

  version: 1.0.0
  contact:
    name: YYCÂ³æŠ€æœ¯æ”¯æŒ
    email: support@yyc3.com
    url: https://www.yyc3.com
  license:
    name: MIT License
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.yyc3.com/v1
    description: ç”Ÿäº§ç¯å¢ƒ
  - url: https://api-test.yyc3.com/v1
    description: æµ‹è¯•ç¯å¢ƒ
  - url: http://localhost:3006/v1
    description: å¼€å‘ç¯å¢ƒ

tags:
  - name: è®¤è¯
    description: ç”¨æˆ·è®¤è¯å’Œæˆæƒç›¸å…³æ¥å£
  - name: ç”¨æˆ·ç®¡ç†
    description: ç³»ç»Ÿç”¨æˆ·ç®¡ç†æ¥å£
  - name: é—¨åº—ç®¡ç†
    description: é—¨åº—å’Œå‘˜å·¥ç®¡ç†æ¥å£
  - name: èœå•ç®¡ç†
    description: èœå“ã€åˆ†ç±»å’Œé€‰é¡¹ç®¡ç†æ¥å£
  - name: è®¢å•ç®¡ç†
    description: è®¢å•å¤„ç†å’ŒçŠ¶æ€ç®¡ç†æ¥å£
  - name: ä¼šå‘˜ç®¡ç†
    description: ä¼šå‘˜ä¿¡æ¯å’Œç§¯åˆ†ç®¡ç†æ¥å£
  - name: è¥é”€æ´»åŠ¨
    description: è¥é”€æ´»åŠ¨å’Œä¼˜æƒ åˆ¸ç®¡ç†æ¥å£
  - name: æ”¯ä»˜ç®¡ç†
    description: æ”¯ä»˜é…ç½®å’Œäº¤æ˜“ç®¡ç†æ¥å£
  - name: æŠ¥è¡¨åˆ†æ
    description: å„ç§ç»Ÿè®¡æŠ¥è¡¨æ¥å£
  - name: ç³»ç»Ÿç®¡ç†
    description: ç³»ç»Ÿé…ç½®å’Œæ—¥å¿—ç®¡ç†æ¥å£

paths:
  # è®¤è¯æ¥å£
  /auth/login:
    post:
      tags: [è®¤è¯]
      summary: ç”¨æˆ·ç™»å½•
      description: ç”¨æˆ·ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ç™»å½•ç³»ç»Ÿ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
            examples:
              admin_login:
                summary: ç®¡ç†å‘˜ç™»å½•
                value:
                  username: "admin"
                  password: "password123"
              staff_login:
                summary: å‘˜å·¥ç™»å½•
                value:
                  username: "staff001"
                  password: "password123"
      responses:
        '200':
          description: ç™»å½•æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
              examples:
                success:
                  summary: ç™»å½•æˆåŠŸ
                  value:
                    success: true
                    data:
                      token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                      refreshToken: "refresh_token_here"
                      user:
                        id: 1
                        username: "admin"
                        email: "admin@yyc3.com"
                        fullName: "ç®¡ç†å‘˜"
                        role: "super_admin"
                        avatar: "https://example.com/avatar.jpg"
                      expiresIn: 3600
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/ValidationError'

  /auth/refresh:
    post:
      tags: [è®¤è¯]
      summary: åˆ·æ–°è®¿é—®ä»¤ç‰Œ
      description: ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œè·å–æ–°çš„è®¿é—®ä»¤ç‰Œ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [refreshToken]
              properties:
                refreshToken:
                  type: string
                  description: åˆ·æ–°ä»¤ç‰Œ
      responses:
        '200':
          description: åˆ·æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      token:
                        type: string
                        description: æ–°çš„è®¿é—®ä»¤ç‰Œ
                      expiresIn:
                        type: integer
                        description: ä»¤ç‰Œè¿‡æœŸæ—¶é—´(ç§’)
        '401':
          $ref: '#/components/responses/Unauthorized'

  /auth/logout:
    post:
      tags: [è®¤è¯]
      summary: ç”¨æˆ·ç™»å‡º
      description: ç”¨æˆ·ç™»å‡ºï¼Œä½¿å½“å‰ä»¤ç‰Œå¤±æ•ˆ
      security:
        - bearerAuth: []
      responses:
        '200':
          description: ç™»å‡ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ç”¨æˆ·ç®¡ç†æ¥å£
  /users:
    get:
      tags: [ç”¨æˆ·ç®¡ç†]
      summary: è·å–ç”¨æˆ·åˆ—è¡¨
      description: åˆ†é¡µè·å–ç³»ç»Ÿç”¨æˆ·åˆ—è¡¨
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Search'
        - name: role
          in: query
          description: æŒ‰è§’è‰²ç­›é€‰
          schema:
            type: string
            enum: [super_admin, admin, manager, staff]
        - name: status
          in: query
          description: æŒ‰çŠ¶æ€ç­›é€‰
          schema:
            type: string
            enum: [active, inactive, locked]
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedUsersResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

    post:
      tags: [ç”¨æˆ·ç®¡ç†]
      summary: åˆ›å»ºç”¨æˆ·
      description: åˆ›å»ºæ–°çš„ç³»ç»Ÿç”¨æˆ·
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '422':
          $ref: '#/components/responses/ValidationError'

  /users/{id}:
    get:
      tags: [ç”¨æˆ·ç®¡ç†]
      summary: è·å–ç”¨æˆ·è¯¦æƒ…
      description: æ ¹æ®IDè·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/UserId'
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

    put:
      tags: [ç”¨æˆ·ç®¡ç†]
      summary: æ›´æ–°ç”¨æˆ·ä¿¡æ¯
      description: æ›´æ–°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/UserId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/ValidationError'

    delete:
      tags: [ç”¨æˆ·ç®¡ç†]
      summary: åˆ é™¤ç”¨æˆ·
      description: åˆ é™¤æŒ‡å®šçš„ç”¨æˆ·
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/UserId'
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  # é—¨åº—ç®¡ç†æ¥å£
  /stores:
    get:
      tags: [é—¨åº—ç®¡ç†]
      summary: è·å–é—¨åº—åˆ—è¡¨
      description: åˆ†é¡µè·å–é—¨åº—åˆ—è¡¨
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Search'
        - name: status
          in: query
          description: æŒ‰çŠ¶æ€ç­›é€‰
          schema:
            type: string
            enum: [active, inactive, maintenance]
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedStoresResponse'

    post:
      tags: [é—¨åº—ç®¡ç†]
      summary: åˆ›å»ºé—¨åº—
      description: åˆ›å»ºæ–°çš„é—¨åº—
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateStoreRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoreResponse'

  /stores/{id}:
    get:
      tags: [é—¨åº—ç®¡ç†]
      summary: è·å–é—¨åº—è¯¦æƒ…
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/StoreId'
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoreResponse'

    put:
      tags: [é—¨åº—ç®¡ç†]
      summary: æ›´æ–°é—¨åº—ä¿¡æ¯
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/StoreId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateStoreRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoreResponse'

    delete:
      tags: [é—¨åº—ç®¡ç†]
      summary: åˆ é™¤é—¨åº—
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/StoreId'
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ

  # èœå•ç®¡ç†æ¥å£
  /menu/categories:
    get:
      tags: [èœå•ç®¡ç†]
      summary: è·å–èœå“åˆ†ç±»åˆ—è¡¨
      security:
        - bearerAuth: []
      parameters:
        - name: storeId
          in: query
          description: é—¨åº—IDï¼Œä¸ºç©ºåˆ™è·å–å…¨å±€åˆ†ç±»
          schema:
            type: integer
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/MenuCategory'

    post:
      tags: [èœå•ç®¡ç†]
      summary: åˆ›å»ºèœå“åˆ†ç±»
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMenuCategoryRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MenuCategory'

  /menu/items:
    get:
      tags: [èœå•ç®¡ç†]
      summary: è·å–èœå“åˆ—è¡¨
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
        - name: categoryId
          in: query
          description: åˆ†ç±»ID
          schema:
            type: integer
        - name: storeId
          in: query
          description: é—¨åº—ID
          schema:
            type: integer
        - name: isAvailable
          in: query
          description: æ˜¯å¦å¯å”®
          schema:
            type: boolean
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMenuItemsResponse'

    post:
      tags: [èœå•ç®¡ç†]
      summary: åˆ›å»ºèœå“
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMenuItemRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MenuItem'

  # è®¢å•ç®¡ç†æ¥å£
  /orders:
    get:
      tags: [è®¢å•ç®¡ç†]
      summary: è·å–è®¢å•åˆ—è¡¨
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
        - name: status
          in: query
          description: è®¢å•çŠ¶æ€
          schema:
            type: string
            enum: [pending, confirmed, preparing, ready, serving, completed, cancelled, refunded]
        - name: storeId
          in: query
          description: é—¨åº—ID
          schema:
            type: integer
        - name: startDate
          in: query
          description: å¼€å§‹æ—¥æœŸ
          schema:
            type: string
            format: date-time
        - name: endDate
          in: query
          description: ç»“æŸæ—¥æœŸ
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedOrdersResponse'

    post:
      tags: [è®¢å•ç®¡ç†]
      summary: åˆ›å»ºè®¢å•
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'

  /orders/{id}:
    get:
      tags: [è®¢å•ç®¡ç†]
      summary: è·å–è®¢å•è¯¦æƒ…
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/OrderId'
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'

    patch:
      tags: [è®¢å•ç®¡ç†]
      summary: æ›´æ–°è®¢å•çŠ¶æ€
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/OrderId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: string
                  enum: [pending, confirmed, preparing, ready, serving, completed, cancelled]
                reason:
                  type: string
                  description: çŠ¶æ€å˜æ›´åŸå› 
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'

  # ä¼šå‘˜ç®¡ç†æ¥å£
  /members:
    get:
      tags: [ä¼šå‘˜ç®¡ç†]
      summary: è·å–ä¼šå‘˜åˆ—è¡¨
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Search'
        - name: levelId
          in: query
          description: ä¼šå‘˜ç­‰çº§ID
          schema:
            type: integer
        - name: status
          in: query
          description: ä¼šå‘˜çŠ¶æ€
          schema:
            type: string
            enum: [active, inactive, blacklisted]
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMembersResponse'

    post:
      tags: [ä¼šå‘˜ç®¡ç†]
      summary: åˆ›å»ºä¼šå‘˜
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMemberRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Member'

  /members/{id}:
    get:
      tags: [ä¼šå‘˜ç®¡ç†]
      summary: è·å–ä¼šå‘˜è¯¦æƒ…
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/MemberId'
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Member'

  /members/{id}/points/adjust:
    post:
      tags: [ä¼šå‘˜ç®¡ç†]
      summary: è°ƒæ•´ä¼šå‘˜ç§¯åˆ†
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/MemberId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdjustPointsRequest'
      responses:
        '200':
          description: è°ƒæ•´æˆåŠŸ

  # è¥é”€æ´»åŠ¨æ¥å£
  /marketing/activities:
    get:
      tags: [è¥é”€æ´»åŠ¨]
      summary: è·å–è¥é”€æ´»åŠ¨åˆ—è¡¨
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
        - name: type
          in: query
          description: æ´»åŠ¨ç±»å‹
          schema:
            type: string
            enum: [coupon, discount, points_exchange, flash_sale, group_buy, lucky_draw, recommend_reward]
        - name: status
          in: query
          description: æ´»åŠ¨çŠ¶æ€
          schema:
            type: string
            enum: [draft, published, active, paused, expired, cancelled]
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMarketingActivitiesResponse'

    post:
      tags: [è¥é”€æ´»åŠ¨]
      summary: åˆ›å»ºè¥é”€æ´»åŠ¨
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMarketingActivityRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MarketingActivity'

  # æ”¯ä»˜ç®¡ç†æ¥å£
  /payment/configs:
    get:
      tags: [æ”¯ä»˜ç®¡ç†]
      summary: è·å–æ”¯ä»˜é…ç½®åˆ—è¡¨
      security:
        - bearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/PaymentConfig'

    post:
      tags: [æ”¯ä»˜ç®¡ç†]
      summary: åˆ›å»ºæ”¯ä»˜é…ç½®
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePaymentConfigRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentConfig'

  /payment/transactions:
    get:
      tags: [æ”¯ä»˜ç®¡ç†]
      summary: è·å–äº¤æ˜“è®°å½•åˆ—è¡¨
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
        - name: paymentMethod
          in: query
          description: æ”¯ä»˜æ–¹å¼
          schema:
            type: string
            enum: [alipay, wechat, unionpay, cash, credit_card, member_balance]
        - name: status
          in: query
          description: äº¤æ˜“çŠ¶æ€
          schema:
            type: string
            enum: [pending, processing, success, failed, cancelled, refunded]
        - name: startDate
          in: query
          description: å¼€å§‹æ—¥æœŸ
          schema:
            type: string
            format: date-time
        - name: endDate
          in: query
          description: ç»“æŸæ—¥æœŸ
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedPaymentTransactionsResponse'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT Bearer Tokenè®¤è¯

  parameters:
    Page:
      name: page
      in: query
      description: é¡µç ï¼Œä»1å¼€å§‹
      schema:
        type: integer
        minimum: 1
        default: 1

    Limit:
      name: limit
      in: query
      description: æ¯é¡µæ•°é‡
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20

    Search:
      name: search
      in: query
      description: æœç´¢å…³é”®è¯
      schema:
        type: string
        maxLength: 100

    UserId:
      name: id
      in: path
      description: ç”¨æˆ·ID
      required: true
      schema:
        type: integer
        minimum: 1

    StoreId:
      name: id
      in: path
      description: é—¨åº—ID
      required: true
      schema:
        type: integer
        minimum: 1

    OrderId:
      name: id
      in: path
      description: è®¢å•ID
      required: true
      schema:
        type: integer
        minimum: 1

    MemberId:
      name: id
      in: path
      description: ä¼šå‘˜ID
      required: true
      schema:
        type: integer
        minimum: 1

  schemas:
    # é€šç”¨å“åº”æ ¼å¼
    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "æ“ä½œæˆåŠŸ"
        data:
          type: object
          description: å“åº”æ•°æ®
        timestamp:
          type: string
          format: date-time
          description: å“åº”æ—¶é—´

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            code:
              type: string
              description: é”™è¯¯ä»£ç 
              example: "VALIDATION_ERROR"
            message:
              type: string
              description: é”™è¯¯ä¿¡æ¯
              example: "è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥"
            statusCode:
              type: integer
              description: HTTPçŠ¶æ€ç 
              example: 400
            details:
              type: object
              description: é”™è¯¯è¯¦æƒ…
            timestamp:
              type: string
              format: date-time
              description: é”™è¯¯æ—¶é—´

    # åˆ†é¡µå“åº”æ ¼å¼
    Pagination:
      type: object
      properties:
        page:
          type: integer
          description: å½“å‰é¡µç 
          example: 1
        limit:
          type: integer
          description: æ¯é¡µæ•°é‡
          example: 20
        total:
          type: integer
          description: æ€»è®°å½•æ•°
          example: 100
        totalPages:
          type: integer
          description: æ€»é¡µæ•°
          example: 5

    # è®¤è¯ç›¸å…³
    LoginRequest:
      type: object
      required: [username, password]
      properties:
        username:
          type: string
          description: ç”¨æˆ·å
          example: "admin"
          minLength: 3
          maxLength: 50
        password:
          type: string
          description: å¯†ç 
          example: "password123"
          minLength: 6
          maxLength: 100
        rememberMe:
          type: boolean
          description: è®°ä½ç™»å½•çŠ¶æ€
          default: false

    LoginResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            token:
              type: string
              description: JWTè®¿é—®ä»¤ç‰Œ
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            refreshToken:
              type: string
              description: åˆ·æ–°ä»¤ç‰Œ
              example: "refresh_token_here"
            user:
              $ref: '#/components/schemas/User'
            expiresIn:
              type: integer
              description: ä»¤ç‰Œè¿‡æœŸæ—¶é—´(ç§’)
              example: 3600

    # ç”¨æˆ·ç›¸å…³
    User:
      type: object
      properties:
        id:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        username:
          type: string
          description: ç”¨æˆ·å
          example: "admin"
        email:
          type: string
          description: é‚®ç®±
          example: "admin@yyc3.com"
        fullName:
          type: string
          description: å…¨å
          example: "ç³»ç»Ÿç®¡ç†å‘˜"
        phone:
          type: string
          description: æ‰‹æœºå·
          example: "13800138000"
        avatar:
          type: string
          description: å¤´åƒURL
          example: "https://example.com/avatar.jpg"
        role:
          type: string
          enum: [super_admin, admin, manager, staff]
          description: ç”¨æˆ·è§’è‰²
          example: "admin"
        status:
          type: string
          enum: [active, inactive, locked]
          description: ç”¨æˆ·çŠ¶æ€
          example: "active"
        lastLoginAt:
          type: string
          format: date-time
          description: æœ€åç™»å½•æ—¶é—´
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    CreateUserRequest:
      type: object
      required: [username, email, password, role]
      properties:
        username:
          type: string
          minLength: 3
          maxLength: 50
          description: ç”¨æˆ·å
        email:
          type: string
          format: email
          description: é‚®ç®±
        password:
          type: string
          minLength: 6
          maxLength: 100
          description: å¯†ç 
        fullName:
          type: string
          maxLength: 100
          description: å…¨å
        phone:
          type: string
          description: æ‰‹æœºå·
        role:
          type: string
          enum: [super_admin, admin, manager, staff]
          description: ç”¨æˆ·è§’è‰²
        status:
          type: string
          enum: [active, inactive]
          default: "active"
          description: ç”¨æˆ·çŠ¶æ€

    UpdateUserRequest:
      type: object
      properties:
        email:
          type: string
          format: email
          description: é‚®ç®±
        fullName:
          type: string
          maxLength: 100
          description: å…¨å
        phone:
          type: string
          description: æ‰‹æœºå·
        avatar:
          type: string
          description: å¤´åƒURL
        role:
          type: string
          enum: [super_admin, admin, manager, staff]
          description: ç”¨æˆ·è§’è‰²
        status:
          type: string
          enum: [active, inactive, locked]
          description: ç”¨æˆ·çŠ¶æ€

    UserResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/User'

    PaginatedUsersResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/User'
                pagination:
                  $ref: '#/components/schemas/Pagination'

    # é—¨åº—ç›¸å…³
    Store:
      type: object
      properties:
        id:
          type: integer
          description: é—¨åº—ID
          example: 1
        storeCode:
          type: string
          description: é—¨åº—ç¼–ç 
          example: "STORE001"
        name:
          type: string
          description: é—¨åº—åç§°
          example: "YYCÂ³æ——èˆ°åº—"
        description:
          type: string
          description: é—¨åº—æè¿°
        address:
          type: string
          description: é—¨åº—åœ°å€
          example: "åŒ—äº¬å¸‚æœé˜³åŒºä¸‰é‡Œå±¯è·¯19å·"
        longitude:
          type: number
          description: ç»åº¦
          example: 116.447728
        latitude:
          type: number
          description: çº¬åº¦
          example: 39.937576
        phone:
          type: string
          description: é—¨åº—ç”µè¯
          example: "010-12345678"
        businessHours:
          type: object
          description: è¥ä¸šæ—¶é—´
          example:
            monday: "09:00-22:00"
            tuesday: "09:00-22:00"
        managerId:
          type: integer
          description: åº—é•¿ID
          example: 1
        status:
          type: string
          enum: [active, inactive, maintenance]
          description: é—¨åº—çŠ¶æ€
          example: "active"
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    CreateStoreRequest:
      type: object
      required: [storeCode, name, address, phone]
      properties:
        storeCode:
          type: string
          description: é—¨åº—ç¼–ç 
          example: "STORE001"
        name:
          type: string
          description: é—¨åº—åç§°
          example: "YYCÂ³æ——èˆ°åº—"
        description:
          type: string
          description: é—¨åº—æè¿°
        address:
          type: string
          description: é—¨åº—åœ°å€
          example: "åŒ—äº¬å¸‚æœé˜³åŒºä¸‰é‡Œå±¯è·¯19å·"
        longitude:
          type: number
          description: ç»åº¦
        latitude:
          type: number
          description: çº¬åº¦
        phone:
          type: string
          description: é—¨åº—ç”µè¯
        businessHours:
          type: object
          description: è¥ä¸šæ—¶é—´
        managerId:
          type: integer
          description: åº—é•¿ID

    UpdateStoreRequest:
      type: object
      properties:
        name:
          type: string
          description: é—¨åº—åç§°
        description:
          type: string
          description: é—¨åº—æè¿°
        address:
          type: string
          description: é—¨åº—åœ°å€
        longitude:
          type: number
          description: ç»åº¦
        latitude:
          type: number
          description: çº¬åº¦
        phone:
          type: string
          description: é—¨åº—ç”µè¯
        businessHours:
          type: object
          description: è¥ä¸šæ—¶é—´
        managerId:
          type: integer
          description: åº—é•¿ID
        status:
          type: string
          enum: [active, inactive, maintenance]
          description: é—¨åº—çŠ¶æ€

    StoreResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/Store'

    PaginatedStoresResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/Store'
                pagination:
                  $ref: '#/components/schemas/Pagination'

    # èœå•ç›¸å…³
    MenuCategory:
      type: object
      properties:
        id:
          type: integer
          description: åˆ†ç±»ID
          example: 1
        name:
          type: string
          description: åˆ†ç±»åç§°
          example: "çƒ­é”€èœå“"
        description:
          type: string
          description: åˆ†ç±»æè¿°
        image:
          type: string
          description: åˆ†ç±»å›¾ç‰‡
          example: "https://example.com/category.jpg"
        sortOrder:
          type: integer
          description: æ’åº
          example: 1
        isActive:
          type: boolean
          description: æ˜¯å¦å¯ç”¨
          example: true
        storeId:
          type: integer
          description: é—¨åº—ID
          example: 1

    CreateMenuCategoryRequest:
      type: object
      required: [name]
      properties:
        name:
          type: string
          description: åˆ†ç±»åç§°
          example: "çƒ­é”€èœå“"
        description:
          type: string
          description: åˆ†ç±»æè¿°
        image:
          type: string
          description: åˆ†ç±»å›¾ç‰‡
        sortOrder:
          type: integer
          description: æ’åº
          default: 0
        isActive:
          type: boolean
          description: æ˜¯å¦å¯ç”¨
          default: true
        storeId:
          type: integer
          description: é—¨åº—ID

    MenuItem:
      type: object
      properties:
        id:
          type: integer
          description: èœå“ID
          example: 1
        itemCode:
          type: string
          description: èœå“ç¼–ç 
          example: "ITEM001"
        name:
          type: string
          description: èœå“åç§°
          example: "å®«ä¿é¸¡ä¸"
        description:
          type: string
          description: èœå“æè¿°
          example: "ç»å…¸å·èœï¼Œé¸¡è‚‰å«©æ»‘ï¼ŒèŠ±ç”Ÿé¦™è„†"
        categoryId:
          type: integer
          description: åˆ†ç±»ID
          example: 1
        price:
          type: number
          description: ä»·æ ¼
          example: 38.00
        originalPrice:
          type: number
          description: åŸä»·
          example: 45.00
        image:
          type: string
          description: èœå“å›¾ç‰‡
          example: "https://example.com/item.jpg"
        isRecommended:
          type: boolean
          description: æ˜¯å¦æ¨è
          example: true
        isAvailable:
          type: boolean
          description: æ˜¯å¦å¯å”®
          example: true
        sortOrder:
          type: integer
          description: æ’åº
          example: 1
        storeId:
          type: integer
          description: é—¨åº—ID
          example: 1
        createdBy:
          type: integer
          description: åˆ›å»ºäººID
          example: 1
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    CreateMenuItemRequest:
      type: object
      required: [name, categoryId, price]
      properties:
        name:
          type: string
          description: èœå“åç§°
          example: "å®«ä¿é¸¡ä¸"
        description:
          type: string
          description: èœå“æè¿°
        categoryId:
          type: integer
          description: åˆ†ç±»ID
          example: 1
        price:
          type: number
          description: ä»·æ ¼
          example: 38.00
        originalPrice:
          type: number
          description: åŸä»·
        image:
          type: string
          description: èœå“å›¾ç‰‡
        isRecommended:
          type: boolean
          description: æ˜¯å¦æ¨è
          default: false
        isAvailable:
          type: boolean
          description: æ˜¯å¦å¯å”®
          default: true
        sortOrder:
          type: integer
          description: æ’åº
          default: 0
        storeId:
          type: integer
          description: é—¨åº—ID

    PaginatedMenuItemsResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/MenuItem'
                pagination:
                  $ref: '#/components/schemas/Pagination'

    # è®¢å•ç›¸å…³
    Order:
      type: object
      properties:
        id:
          type: integer
          description: è®¢å•ID
          example: 1
        orderNo:
          type: string
          description: è®¢å•å·
          example: "ORD202401010001"
        storeId:
          type: integer
          description: é—¨åº—ID
          example: 1
        memberId:
          type: integer
          description: ä¼šå‘˜ID
          example: 1
        tableNumber:
          type: string
          description: æ¡Œå·
          example: "A01"
        orderType:
          type: string
          enum: [dine_in, takeaway, delivery]
          description: è®¢å•ç±»å‹
          example: "dine_in"
        subtotal:
          type: number
          description: å°è®¡
          example: 156.00
        totalAmount:
          type: number
          description: æ€»é‡‘é¢
          example: 156.00
        status:
          type: string
          enum: [pending, confirmed, preparing, ready, serving, completed, cancelled, refunded]
          description: è®¢å•çŠ¶æ€
          example: "confirmed"
        paymentStatus:
          type: string
          enum: [unpaid, paid, refunded, partial_refunded]
          description: æ”¯ä»˜çŠ¶æ€
          example: "unpaid"
        items:
          type: array
          description: è®¢å•æ˜ç»†
          items:
            $ref: '#/components/schemas/OrderItem'
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    OrderItem:
      type: object
      properties:
        id:
          type: integer
          description: æ˜ç»†ID
          example: 1
        itemId:
          type: integer
          description: èœå“ID
          example: 1
        itemName:
          type: string
          description: èœå“åç§°
          example: "å®«ä¿é¸¡ä¸"
        quantity:
          type: integer
          description: æ•°é‡
          example: 2
        unitPrice:
          type: number
          description: å•ä»·
          example: 38.00
        totalPrice:
          type: number
          description: å°è®¡
          example: 76.00
        specialRequests:
          type: string
          description: ç‰¹æ®Šè¦æ±‚
          example: "ä¸è¦è¾£"

    CreateOrderRequest:
      type: object
      required: [storeId, items]
      properties:
        storeId:
          type: integer
          description: é—¨åº—ID
          example: 1
        memberId:
          type: integer
          description: ä¼šå‘˜ID
          example: 1
        tableNumber:
          type: string
          description: æ¡Œå·
          example: "A01"
        orderType:
          type: string
          enum: [dine_in, takeaway, delivery]
          description: è®¢å•ç±»å‹
          default: "dine_in"
        peopleCount:
          type: integer
          description: ç”¨é¤äººæ•°
          example: 2
        items:
          type: array
          description: è®¢å•æ˜ç»†
          items:
            type: object
            required: [itemId, quantity]
            properties:
              itemId:
                type: integer
                description: èœå“ID
                example: 1
              quantity:
                type: integer
                description: æ•°é‡
                example: 2
              specId:
                type: integer
                description: è§„æ ¼ID
              options:
                type: array
                description: é€‰é¡¹
                items:
                  type: object
                  properties:
                    optionId:
                      type: integer
                      description: é€‰é¡¹ID
                    quantity:
                      type: integer
                      description: æ•°é‡
        specialRequests:
          type: string
          description: ç‰¹æ®Šè¦æ±‚
          example: "ä¸è¦è¾£"

    PaginatedOrdersResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/Order'
                pagination:
                  $ref: '#/components/schemas/Pagination'

    # ä¼šå‘˜ç›¸å…³
    Member:
      type: object
      properties:
        id:
          type: integer
          description: ä¼šå‘˜ID
          example: 1
        memberNo:
          type: string
          description: ä¼šå‘˜å·
          example: "M202401010001"
        userId:
          type: integer
          description: å…³è”ç”¨æˆ·ID
          example: 1
        phone:
          type: string
          description: æ‰‹æœºå·
          example: "13800138000"
        email:
          type: string
          description: é‚®ç®±
          example: "member@example.com"
        nickname:
          type: string
          description: æ˜µç§°
          example: "ç¾é£Ÿè¾¾äºº"
        realName:
          type: string
          description: çœŸå®å§“å
          example: "å¼ ä¸‰"
        avatar:
          type: string
          description: å¤´åƒ
          example: "https://example.com/avatar.jpg"
        levelId:
          type: integer
          description: ç­‰çº§ID
          example: 1
        points:
          type: integer
          description: å½“å‰ç§¯åˆ†
          example: 1580
        totalPoints:
          type: integer
          description: æ€»ç§¯åˆ†
          example: 2580
        balance:
          type: number
          description: è´¦æˆ·ä½™é¢
          example: 128.50
        totalSpent:
          type: number
          description: ç´¯è®¡æ¶ˆè´¹
          example: 2580.00
        orderCount:
          type: integer
          description: è®¢å•æ•°é‡
          example: 15
        status:
          type: string
          enum: [active, inactive, blacklisted]
          description: ä¼šå‘˜çŠ¶æ€
          example: "active"
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    CreateMemberRequest:
      type: object
      required: [phone]
      properties:
        phone:
          type: string
          description: æ‰‹æœºå·
          example: "13800138000"
        email:
          type: string
          description: é‚®ç®±
          example: "member@example.com"
        nickname:
          type: string
          description: æ˜µç§°
          example: "ç¾é£Ÿè¾¾äºº"
        realName:
          type: string
          description: çœŸå®å§“å
          example: "å¼ ä¸‰"
        gender:
          type: string
          enum: [male, female, unknown]
          description: æ€§åˆ«
          default: "unknown"
        birthday:
          type: string
          format: date
          description: ç”Ÿæ—¥
          example: "1990-01-01"
        source:
          type: string
          enum: [register, import, staff_add]
          description: æ¥æº
          default: "register"
        status:
          type: string
          enum: [active, inactive]
          description: ä¼šå‘˜çŠ¶æ€
          default: "active"

    AdjustPointsRequest:
      type: object
      required: [points, reason]
      properties:
        points:
          type: integer
          description: ç§¯åˆ†å˜åŠ¨æ•°é‡ï¼ˆæ­£ä¸ºå¢åŠ ï¼Œè´Ÿä¸ºæ‰£å‡ï¼‰
          example: 100
        reason:
          type: string
          description: å˜åŠ¨åŸå› 
          example: "æ¶ˆè´¹å¥–åŠ±"
        type:
          type: string
          enum: [earn, redeem, expire, adjust, gift]
          description: ç§¯åˆ†ç±»å‹
          default: "adjust"

    PaginatedMembersResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/Member'
                pagination:
                  $ref: '#/components/schemas/Pagination'

    # è¥é”€æ´»åŠ¨ç›¸å…³
    MarketingActivity:
      type: object
      properties:
        id:
          type: integer
          description: æ´»åŠ¨ID
          example: 1
        activityId:
          type: string
          description: æ´»åŠ¨ç¼–å·
          example: "ACT202401010001"
        name:
          type: string
          description: æ´»åŠ¨åç§°
          example: "æ˜¥èŠ‚ä¼˜æƒ æ´»åŠ¨"
        description:
          type: string
          description: æ´»åŠ¨æè¿°
        type:
          type: string
          enum: [coupon, discount, points_exchange, flash_sale, group_buy, lucky_draw, recommend_reward]
          description: æ´»åŠ¨ç±»å‹
          example: "discount"
        status:
          type: string
          enum: [draft, published, active, paused, expired, cancelled]
          description: æ´»åŠ¨çŠ¶æ€
          example: "active"
        banner:
          type: string
          description: æ´»åŠ¨æ¨ªå¹…
          example: "https://example.com/banner.jpg"
        startTime:
          type: string
          format: date-time
          description: å¼€å§‹æ—¶é—´
        endTime:
          type: string
          format: date-time
          description: ç»“æŸæ—¶é—´
        maxParticipants:
          type: integer
          description: æœ€å¤§å‚ä¸äººæ•°
          example: 1000
        currentParticipants:
          type: integer
          description: å½“å‰å‚ä¸äººæ•°
          example: 256
        conditions:
          type: object
          description: å‚ä¸æ¡ä»¶
        rewards:
          type: object
          description: å¥–åŠ±è®¾ç½®
        createdBy:
          type: integer
          description: åˆ›å»ºäººID
          example: 1
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    CreateMarketingActivityRequest:
      type: object
      required: [name, type, startTime, endTime, conditions, rewards]
      properties:
        name:
          type: string
          description: æ´»åŠ¨åç§°
          example: "æ˜¥èŠ‚ä¼˜æƒ æ´»åŠ¨"
        description:
          type: string
          description: æ´»åŠ¨æè¿°
        type:
          type: string
          enum: [coupon, discount, points_exchange, flash_sale, group_buy, lucky_draw, recommend_reward]
          description: æ´»åŠ¨ç±»å‹
          example: "discount"
        banner:
          type: string
          description: æ´»åŠ¨æ¨ªå¹…
        startTime:
          type: string
          format: date-time
          description: å¼€å§‹æ—¶é—´
        endTime:
          type: string
          format: date-time
          description: ç»“æŸæ—¶é—´
        maxParticipants:
          type: integer
          description: æœ€å¤§å‚ä¸äººæ•°
        targetAudience:
          type: array
          description: ç›®æ ‡äººç¾¤
          items:
            type: string
        conditions:
          type: object
          description: å‚ä¸æ¡ä»¶
        rewards:
          type: object
          description: å¥–åŠ±è®¾ç½®

    PaginatedMarketingActivitiesResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/MarketingActivity'
                pagination:
                  $ref: '#/components/schemas/Pagination'

    # æ”¯ä»˜ç›¸å…³
    PaymentConfig:
      type: object
      properties:
        id:
          type: integer
          description: é…ç½®ID
          example: 1
        method:
          type: string
          enum: [alipay, wechat, unionpay, cash, credit_card, debit_card, digital_wallet, member_balance]
          description: æ”¯ä»˜æ–¹å¼
          example: "alipay"
        name:
          type: string
          description: é…ç½®åç§°
          example: "æ”¯ä»˜å®é…ç½®"
        displayName:
          type: string
          description: æ˜¾ç¤ºåç§°
          example: "æ”¯ä»˜å®"
        description:
          type: string
          description: æè¿°
        enabled:
          type: boolean
          description: æ˜¯å¦å¯ç”¨
          example: true
        config:
          type: object
          description: é…ç½®ä¿¡æ¯
          properties:
            appId:
              type: string
              description: åº”ç”¨ID
            merchantId:
              type: string
              description: å•†æˆ·ID
            apiKey:
              type: string
              description: APIå¯†é’¥
            notifyUrl:
              type: string
              description: å›è°ƒåœ°å€
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    CreatePaymentConfigRequest:
      type: object
      required: [method, name, displayName, config]
      properties:
        method:
          type: string
          enum: [alipay, wechat, unionpay, cash, credit_card, debit_card, digital_wallet, member_balance]
          description: æ”¯ä»˜æ–¹å¼
          example: "alipay"
        name:
          type: string
          description: é…ç½®åç§°
          example: "æ”¯ä»˜å®é…ç½®"
        displayName:
          type: string
          description: æ˜¾ç¤ºåç§°
          example: "æ”¯ä»˜å®"
        description:
          type: string
          description: æè¿°
        enabled:
          type: boolean
          description: æ˜¯å¦å¯ç”¨
          default: true
        config:
          type: object
          required: [appId, merchantId]
          properties:
            appId:
              type: string
              description: åº”ç”¨ID
            merchantId:
              type: string
              description: å•†æˆ·ID
            apiKey:
              type: string
              description: APIå¯†é’¥
            notifyUrl:
              type: string
              description: å›è°ƒåœ°å€

    PaymentTransaction:
      type: object
      properties:
        id:
          type: integer
          description: äº¤æ˜“ID
          example: 1
        transactionId:
          type: string
          description: äº¤æ˜“å·
          example: "TXN202401010001"
        orderId:
          type: string
          description: å…³è”è®¢å•å·
          example: "ORD202401010001"
        paymentMethod:
          type: string
          enum: [alipay, wechat, unionpay, cash, credit_card, member_balance]
          description: æ”¯ä»˜æ–¹å¼
          example: "alipay"
        amount:
          type: number
          description: é‡‘é¢
          example: 156.00
        status:
          type: string
          enum: [pending, processing, success, failed, cancelled, refunded]
          description: äº¤æ˜“çŠ¶æ€
          example: "success"
        paymentTime:
          type: string
          format: date-time
          description: æ”¯ä»˜æ—¶é—´
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    PaginatedPaymentTransactionsResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/PaymentTransaction'
                pagination:
                  $ref: '#/components/schemas/Pagination'

  responses:
    Unauthorized:
      description: æœªæˆæƒè®¿é—®
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/ErrorResponse'
              - type: object
                example:
                  success: false
                  error:
                    code: "AUTHENTICATION_ERROR"
                    message: "è®¤è¯å¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•"
                    statusCode: 401
                    timestamp: "2024-01-01T12:00:00.000Z"

    Forbidden:
      description: æƒé™ä¸è¶³
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/ErrorResponse'
              - type: object
                example:
                  success: false
                  error:
                    code: "AUTHORIZATION_ERROR"
                    message: "æƒé™ä¸è¶³ï¼Œæ— æ³•è®¿é—®è¯¥èµ„æº"
                    statusCode: 403
                    timestamp: "2024-01-01T12:00:00.000Z"

    NotFound:
      description: èµ„æºæœªæ‰¾åˆ°
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/ErrorResponse'
              - type: object
                example:
                  success: false
                  error:
                    code: "NOT_FOUND_ERROR"
                    message: "è¯·æ±‚çš„èµ„æºæœªæ‰¾åˆ°"
                    statusCode: 404
                    timestamp: "2024-01-01T12:00:00.000Z"

    ValidationError:
      description: è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/ErrorResponse'
              - type: object
                example:
                  success: false
                  error:
                    code: "VALIDATION_ERROR"
                    message: "è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥"
                    statusCode: 422
                    details:
                      - field: "email"
                        message: "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"
                        value: "invalid-email"
                    timestamp: "2024-01-01T12:00:00.000Z"

    TooManyRequests:
      description: è¯·æ±‚è¿‡äºé¢‘ç¹
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/ErrorResponse'
              - type: object
                example:
                  success: false
                  error:
                    code: "RATE_LIMIT_ERROR"
                    message: "è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•"
                    statusCode: 429
                    details:
                      retryAfter: 60
                    timestamp: "2024-01-01T12:00:00.000Z"
      headers:
        Retry-After:
          description: é‡è¯•ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰
          schema:
            type: integer
            example: 60

    InternalServerError:
      description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/ErrorResponse'
              - type: object
                example:
                  success: false
                  error:
                    code: "INTERNAL_ERROR"
                    message: "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"
                    statusCode: 500
                    timestamp: "2024-01-01T12:00:00.000Z"

# ç¤ºä¾‹æ–‡æ¡£å’Œä½¿ç”¨è¯´æ˜
x-tag-groups:
  - name: æ ¸å¿ƒåŠŸèƒ½
    tags:
      - è®¤è¯
      - ç”¨æˆ·ç®¡ç†
      - é—¨åº—ç®¡ç†
  - name: ä¸šåŠ¡åŠŸèƒ½
    tags:
      - èœå•ç®¡ç†
      - è®¢å•ç®¡ç†
      - ä¼šå‘˜ç®¡ç†
  - name: è¥é”€åŠŸèƒ½
    tags:
      - è¥é”€æ´»åŠ¨
      - æ”¯ä»˜ç®¡ç†
  - name: ç®¡ç†åŠŸèƒ½
    tags:
      - æŠ¥è¡¨åˆ†æ
      - ç³»ç»Ÿç®¡ç†

# é¢å¤–çš„è¯´æ˜
x-apisguru-categories:
  - restaurant
  - management
  - crm
  - pos

# è”ç³»ä¿¡æ¯
x-logo:
  url: https://www.yyc3.com/logo.png
  backgroundColor: "#FFFFFF"
  altText: "YYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°"

# å¤–éƒ¨æ–‡æ¡£
x-externalDocs:
  description: YYCÂ³å¹³å°è¯¦ç»†æ–‡æ¡£
  url: https://docs.yyc3.com

# æœåŠ¡å™¨ä¿¡æ¯æ‰©å±•
x-servers:
  - url: https://api.yyc3.com/v1
    description: ç”Ÿäº§ç¯å¢ƒ
    variables:
      protocol:
        enum: [https]
        default: https
      version:
        enum: [v1, v2]
        default: v1

# å…¨å±€å®‰å…¨é…ç½®
security:
  - bearerAuth: []