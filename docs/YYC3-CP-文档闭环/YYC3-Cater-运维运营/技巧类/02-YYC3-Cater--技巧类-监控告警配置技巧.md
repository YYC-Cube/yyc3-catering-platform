---

**@file**ï¼šYYCÂ³-ç›‘æ§å‘Šè­¦é…ç½®æŠ€å·§
**@description**ï¼šYYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°çš„ç›‘æ§å‘Šè­¦é…ç½®æŠ€å·§
**@author**ï¼šYYCÂ³
**@version**ï¼šv1.0.0
**@created**ï¼š2025-01-30
**@updated**ï¼š2025-01-30
**@status**ï¼špublished
**@tags**ï¼šYYCÂ³,æ–‡æ¡£

---
# ğŸ”– YYCÂ³ ç›‘æ§å‘Šè­¦é…ç½®æŠ€å·§

> ***YanYuCloudCube***
> **æ ‡è¯­**ï¼šè¨€å¯è±¡é™ | è¯­æ¢æœªæ¥
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **æ ‡è¯­**ï¼šä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| å±æ€§ | å†…å®¹ |
|------|------|
| **æ–‡æ¡£æ ‡é¢˜** | YYCÂ³ ç›‘æ§å‘Šè­¦é…ç½®æŠ€å·§ |
| **æ–‡æ¡£ç±»å‹** | æŠ€å·§ç±»æ–‡æ¡£ |
| **æ‰€å±é˜¶æ®µ** | è¿ç»´è¿è¥ |
| **éµå¾ªè§„èŒƒ** | YYCÂ³ å›¢é˜Ÿæ ‡å‡†åŒ–è§„èŒƒ v1.0.0 |
| **ç‰ˆæœ¬å·** | v1.0.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2025-01-30 |
| **ä½œè€…** | YYCÂ³ Team |
| **æ›´æ–°æ—¥æœŸ** | 2025-01-30 |

---

## ğŸ“‘ ç›®å½•

1. [ç›‘æ§å‘Šè­¦æ¦‚è¿°](#1-ç›‘æ§å‘Šè­¦æ¦‚è¿°)
2. [ç›‘æ§æŒ‡æ ‡é…ç½®](#2-ç›‘æ§æŒ‡æ ‡é…ç½®)
3. [å‘Šè­¦è§„åˆ™é…ç½®](#3-å‘Šè­¦è§„åˆ™é…ç½®)
4. [å‘Šè­¦é€šçŸ¥é…ç½®](#4-å‘Šè­¦é€šçŸ¥é…ç½®)
5. [å‘Šè­¦èšåˆä¸é™å™ª](#5-å‘Šè­¦èšåˆä¸é™å™ª)
6. [ç›‘æ§ä»ªè¡¨æ¿é…ç½®](#6-ç›‘æ§ä»ªè¡¨æ¿é…ç½®)
7. [å‘Šè­¦æ•…éšœæ’æŸ¥](#7-å‘Šè­¦æ•…éšœæ’æŸ¥)
8. [ç›‘æ§å‘Šè­¦æœ€ä½³å®è·µ](#8-ç›‘æ§å‘Šè­¦æœ€ä½³å®è·µ)

---

## 1. æ¦‚è¿°

### 1.1 åŠŸèƒ½è¯´æ˜

### 1.2 æŠ€æœ¯æ ˆ

### 1.3 å¼€å‘ç¯å¢ƒ

## 2. å®ç°æ–¹æ¡ˆ

### 2.1 ä»£ç ç»“æ„

### 2.2 æ ¸å¿ƒé€»è¾‘

### 2.3 æ•°æ®å¤„ç†

## 3. æ¥å£æ–‡æ¡£

### 3.1 APIæ¥å£

### 3.2 è¯·æ±‚å‚æ•°

### 3.3 å“åº”æ ¼å¼

## 4. æµ‹è¯•æ–¹æ¡ˆ

### 4.1 å•å…ƒæµ‹è¯•

### 4.2 é›†æˆæµ‹è¯•

### 4.3 æµ‹è¯•ç”¨ä¾‹

## 5. éƒ¨ç½²æŒ‡å—

### 5.1 ç¯å¢ƒå‡†å¤‡

### 5.2 éƒ¨ç½²æ­¥éª¤

### 5.3 éªŒè¯æ–¹æ³•

## 6. å¸¸è§é—®é¢˜

### 6.1 é—®é¢˜æ’æŸ¥

### 6.2 è§£å†³æ–¹æ¡ˆ

## 1. ç›‘æ§å‘Šè­¦æ¦‚è¿°

### 1.1 ç›‘æ§ä½“ç³»

YYCÂ³ ç›‘æ§å‘Šè­¦ä½“ç³»åŸºäº Prometheus + Grafana + Alertmanager æ¶æ„ï¼Œæä¾›å…¨æ–¹ä½çš„ç›‘æ§å’Œå‘Šè­¦èƒ½åŠ›ã€‚

### 1.2 ç›‘æ§å±‚æ¬¡

```
åŸºç¡€è®¾æ–½ç›‘æ§
  â”œâ”€â”€ CPU ç›‘æ§
  â”œâ”€â”€ å†…å­˜ç›‘æ§
  â”œâ”€â”€ ç£ç›˜ç›‘æ§
  â”œâ”€â”€ ç½‘ç»œç›‘æ§
  â””â”€â”€ ç³»ç»Ÿè´Ÿè½½

åº”ç”¨ç›‘æ§
  â”œâ”€â”€ åº”ç”¨æ€§èƒ½ç›‘æ§
  â”œâ”€â”€ ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§
  â”œâ”€â”€ é”™è¯¯ç‡ç›‘æ§
  â”œâ”€â”€ å“åº”æ—¶é—´ç›‘æ§
  â””â”€â”€ ååé‡ç›‘æ§

ä¸­é—´ä»¶ç›‘æ§
  â”œâ”€â”€ æ•°æ®åº“ç›‘æ§
  â”œâ”€â”€ ç¼“å­˜ç›‘æ§
  â”œâ”€â”€ æ¶ˆæ¯é˜Ÿåˆ—ç›‘æ§
  â”œâ”€â”€ æœç´¢å¼•æ“ç›‘æ§
  â””â”€â”€ å­˜å‚¨ç›‘æ§

ä¸šåŠ¡ç›‘æ§
  â”œâ”€â”€ è®¢å•é‡ç›‘æ§
  â”œâ”€â”€ ç”¨æˆ·æ´»è·ƒåº¦ç›‘æ§
  â”œâ”€â”€ æ”¶å…¥ç›‘æ§
  â”œâ”€â”€ è½¬åŒ–ç‡ç›‘æ§
  â””â”€â”€ å®¢æˆ·æ»¡æ„åº¦ç›‘æ§
```

---

## 2. ç›‘æ§æŒ‡æ ‡é…ç½®

### 2.1 åŸºç¡€æŒ‡æ ‡

#### 2.1.1 ç³»ç»ŸæŒ‡æ ‡

```yaml
# === system-metrics.yaml ===
groups:
  - name: system_metrics
    interval: 15s
    rules:
      # CPU ä½¿ç”¨ç‡
      - record: system:cpu_usage:percent
        expr: 100 - (avg by(instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)

      # å†…å­˜ä½¿ç”¨ç‡
      - record: system:memory_usage:percent
        expr: (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100

      # ç£ç›˜ä½¿ç”¨ç‡
      - record: system:disk_usage:percent
        expr: (1 - (node_filesystem_avail_bytes{fstype!~"tmpfs|fuse.*"} / node_filesystem_size_bytes{fstype!~"tmpfs|fuse.*"})) * 100

      # ç½‘ç»œæµé‡
      - record: system:network:in_bytes
        expr: rate(node_network_receive_bytes_total[5m])

      - record: system:network:out_bytes
        expr: rate(node_network_transmit_bytes_total[5m])

      # ç³»ç»Ÿè´Ÿè½½
      - record: system:load:avg1
        expr: node_load1

      - record: system:load:avg5
        expr: node_load5

      - record: system:load:avg15
        expr: node_load15
```

### 2.2 åº”ç”¨æŒ‡æ ‡

#### 2.2.1 åº”ç”¨æ€§èƒ½æŒ‡æ ‡

```yaml
# === application-metrics.yaml ===
groups:
  - name: application_metrics
    interval: 15s
    rules:
      # HTTP è¯·æ±‚é€Ÿç‡
      - record: app:http_requests:rate
        expr: rate(http_requests_total[5m])

      # HTTP é”™è¯¯ç‡
      - record: app:http_errors:rate
        expr: rate(http_requests_total{status=~"5.."}[5m])

      # HTTP å“åº”æ—¶é—´
      - record: app:http_response_time:p95
        expr: histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))

      - record: app:http_response_time:p99
        expr: histogram_quantile(0.99, rate(http_request_duration_seconds_bucket[5m]))

      # æ•°æ®åº“æŸ¥è¯¢æ—¶é—´
      - record: app:db_query_time:p95
        expr: histogram_quantile(0.95, rate(db_query_duration_seconds_bucket[5m]))

      # ç¼“å­˜å‘½ä¸­ç‡
      - record: app:cache_hit_rate
        expr: rate(cache_hits_total[5m]) / (rate(cache_hits_total[5m]) + rate(cache_misses_total[5m])) * 100
```

---

## 3. å‘Šè­¦è§„åˆ™é…ç½®

### 3.1 ç³»ç»Ÿå‘Šè­¦

#### 3.1.1 ç³»ç»Ÿèµ„æºå‘Šè­¦

```yaml
# === system-alerts.yaml ===
groups:
  - name: system_alerts
    rules:
      # CPU ä½¿ç”¨ç‡å‘Šè­¦
      - alert: HighCPUUsage
        expr: system:cpu_usage:percent > 80
        for: 5m
        labels:
          severity: warning
          category: system
        annotations:
          summary: "High CPU usage on {{ $labels.instance }}"
          description: "CPU usage is {{ $value }}% on {{ $labels.instance }} for more than 5 minutes"

      - alert: CriticalCPUUsage
        expr: system:cpu_usage:percent > 90
        for: 2m
        labels:
          severity: critical
          category: system
        annotations:
          summary: "Critical CPU usage on {{ $labels.instance }}"
          description: "CPU usage is {{ $value }}% on {{ $labels.instance }} for more than 2 minutes"

      # å†…å­˜ä½¿ç”¨ç‡å‘Šè­¦
      - alert: HighMemoryUsage
        expr: system:memory_usage:percent > 80
        for: 5m
        labels:
          severity: warning
          category: system
        annotations:
          summary: "High memory usage on {{ $labels.instance }}"
          description: "Memory usage is {{ $value }}% on {{ $labels.instance }} for more than 5 minutes"

      - alert: CriticalMemoryUsage
        expr: system:memory_usage:percent > 90
        for: 2m
        labels:
          severity: critical
          category: system
        annotations:
          summary: "Critical memory usage on {{ $labels.instance }}"
          description: "Memory usage is {{ $value }}% on {{ $labels.instance }} for more than 2 minutes"

      # ç£ç›˜ä½¿ç”¨ç‡å‘Šè­¦
      - alert: HighDiskUsage
        expr: system:disk_usage:percent > 80
        for: 10m
        labels:
          severity: warning
          category: system
        annotations:
          summary: "High disk usage on {{ $labels.instance }}"
          description: "Disk usage is {{ $value }}% on {{ $labels.instance }} for more than 10 minutes"

      - alert: CriticalDiskUsage
        expr: system:disk_usage:percent > 90
        for: 5m
        labels:
          severity: critical
          category: system
        annotations:
          summary: "Critical disk usage on {{ $labels.instance }}"
          description: "Disk usage is {{ $value }}% on {{ $labels.instance }} for more than 5 minutes"
```

### 3.2 åº”ç”¨å‘Šè­¦

#### 3.2.1 åº”ç”¨æ€§èƒ½å‘Šè­¦

```yaml
# === application-alerts.yaml ===
groups:
  - name: application_alerts
    rules:
      # HTTP é”™è¯¯ç‡å‘Šè­¦
      - alert: HighHTTPErrorRate
        expr: app:http_errors:rate > 0.05
        for: 5m
        labels:
          severity: warning
          category: application
        annotations:
          summary: "High HTTP error rate on {{ $labels.instance }}"
          description: "HTTP error rate is {{ $value }} on {{ $labels.instance }} for more than 5 minutes"

      # HTTP å“åº”æ—¶é—´å‘Šè­¦
      - alert: HighHTTPResponseTime
        expr: app:http_response_time:p95 > 1
        for: 5m
        labels:
          severity: warning
          category: application
        annotations:
          summary: "High HTTP response time on {{ $labels.instance }}"
          description: "HTTP P95 response time is {{ $value }}s on {{ $labels.instance }} for more than 5 minutes"

      # æœåŠ¡ä¸å¯ç”¨å‘Šè­¦
      - alert: ServiceDown
        expr: up == 0
        for: 1m
        labels:
          severity: critical
          category: application
        annotations:
          summary: "Service {{ $labels.job }} is down"
          description: "Service {{ $labels.job }} on {{ $labels.instance }} has been down for more than 1 minute"
```

---

## 4. å‘Šè­¦é€šçŸ¥é…ç½®

### 4.1 é€šçŸ¥æ¸ é“

#### 4.1.1 Alertmanager é…ç½®

```yaml
# === alertmanager-config.yaml ===
global:
  resolve_timeout: 5m
  smtp_smarthost: 'smtp.example.com:587'
  smtp_from: 'alerts@yyc3.com'
  smtp_auth_username: 'alerts@yyc3.com'
  smtp_auth_password: 'password'

templates:
  - '/etc/alertmanager/templates/*.tmpl'

route:
  group_by: ['alertname', 'cluster', 'service']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 12h
  receiver: 'default'

  routes:
    # ä¸¥é‡å‘Šè­¦å‘é€åˆ°é’‰é’‰
    - match:
        severity: critical
      receiver: 'dingtalk-critical'
      continue: true

    # è­¦å‘Šå‘Šè­¦å‘é€åˆ°é‚®ä»¶
    - match:
        severity: warning
      receiver: 'email-warning'
      continue: true

    # ç³»ç»Ÿå‘Šè­¦å‘é€åˆ° Slack
    - match:
        category: system
      receiver: 'slack-system'

receivers:
  # é»˜è®¤æ¥æ”¶å™¨
  - name: 'default'
    email_configs:
      - to: 'team@yyc3.com'
        headers:
          Subject: '[ALERT] {{ .GroupLabels.alertname }}'

  # é’‰é’‰ä¸¥é‡å‘Šè­¦
  - name: 'dingtalk-critical'
    webhook_configs:
      - url: 'http://dingtalk-webhook-url'
        send_resolved: true

  # é‚®ä»¶è­¦å‘Šå‘Šè­¦
  - name: 'email-warning'
    email_configs:
      - to: 'team@yyc3.com'
        headers:
          Subject: '[WARNING] {{ .GroupLabels.alertname }}'

  # Slack ç³»ç»Ÿå‘Šè­¦
  - name: 'slack-system'
    slack_configs:
      - api_url: 'https://hooks.slack.com/services/YOUR/WEBHOOK/URL'
        channel: '#system-alerts'
        title: '{{ .GroupLabels.alertname }}'
        text: '{{ range .Alerts }}{{ .Annotations.description }}{{ end }}'
        send_resolved: true
```

### 4.2 é€šçŸ¥æ¨¡æ¿

#### 4.2.1 é‚®ä»¶é€šçŸ¥æ¨¡æ¿

```html
<!-- === email-template.html.tmpl ===
{{ define "email.default.subject" }}
[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .GroupLabels.alertname }}
{{ end }}

{{ define "email.default.html" }}
<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; }
        .alert { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .alert.critical { background-color: #ffcccc; border: 1px solid #ff0000; }
        .alert.warning { background-color: #ffffcc; border: 1px solid #ffcc00; }
        .alert.info { background-color: #ccffcc; border: 1px solid #00ff00; }
        .label { font-weight: bold; }
    </style>
</head>
<body>
    <h2>{{ .GroupLabels.alertname }}</h2>
    <p>Status: {{ .Status }}</p>
    
    {{ range .Alerts }}
    <div class="alert {{ .Labels.severity }}">
        <p><span class="label">Instance:</span> {{ .Labels.instance }}</p>
        <p><span class="label">Severity:</span> {{ .Labels.severity }}</p>
        <p><span class="label">Description:</span> {{ .Annotations.description }}</p>
        <p><span class="label">Value:</span> {{ .Value }}</p>
        <p><span class="label">Time:</span> {{ .StartsAt.Format "2006-01-02 15:04:05" }}</p>
    </div>
    {{ end }}
</body>
</html>
{{ end }}
-->
```

---

## 5. å‘Šè­¦èšåˆä¸é™å™ª

### 5.1 å‘Šè­¦èšåˆ

#### 5.1.1 èšåˆç­–ç•¥

```yaml
# === alert-aggregation.yaml ===
route:
  group_by: ['alertname', 'cluster', 'service']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 12h

  # æŒ‰æœåŠ¡èšåˆ
  routes:
    - match:
        service: 'api'
      group_by: ['alertname', 'service']
      receiver: 'api-team'

    - match:
        service: 'web'
      group_by: ['alertname', 'service']
      receiver: 'web-team'

    - match:
        service: 'db'
      group_by: ['alertname', 'service']
      receiver: 'db-team'
```

### 5.2 å‘Šè­¦é™å™ª

#### 5.2.1 é™å™ªè§„åˆ™

```yaml
# === alert-inhibition.yaml ===
inhibit_rules:
  # å¦‚æœæœåŠ¡ä¸å¯ç”¨ï¼ŒæŠ‘åˆ¶è¯¥æœåŠ¡çš„æ‰€æœ‰å…¶ä»–å‘Šè­¦
  - source_match:
      alertname: 'ServiceDown'
    target_match_re:
      alertname: '(HighCPUUsage|HighMemoryUsage|HighDiskUsage)'
    equal: ['instance']

  # å¦‚æœèŠ‚ç‚¹ä¸å¯è¾¾ï¼ŒæŠ‘åˆ¶è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰å‘Šè­¦
  - source_match:
      alertname: 'NodeDown'
    target_match_re:
      alertname: '.*'
    equal: ['instance']

  # å¦‚æœé›†ç¾¤æ•…éšœï¼ŒæŠ‘åˆ¶é›†ç¾¤å†…æ‰€æœ‰èŠ‚ç‚¹çš„å‘Šè­¦
  - source_match:
      alertname: 'ClusterDown'
    target_match_re:
      alertname: '.*'
    equal: ['cluster']
```

---

## 6. ç›‘æ§ä»ªè¡¨æ¿é…ç½®

### 6.1 Grafana ä»ªè¡¨æ¿

#### 6.1.1 ç³»ç»Ÿç›‘æ§ä»ªè¡¨æ¿

```json
{
  "dashboard": {
    "title": "YYCÂ³ System Monitoring",
    "panels": [
      {
        "title": "CPU Usage",
        "targets": [
          {
            "expr": "system:cpu_usage:percent",
            "legendFormat": "{{ instance }}"
          }
        ],
        "type": "graph"
      },
      {
        "title": "Memory Usage",
        "targets": [
          {
            "expr": "system:memory_usage:percent",
            "legendFormat": "{{ instance }}"
          }
        ],
        "type": "graph"
      },
      {
        "title": "Disk Usage",
        "targets": [
          {
            "expr": "system:disk_usage:percent",
            "legendFormat": "{{ instance }}"
          }
        ],
        "type": "graph"
      },
      {
        "title": "Network Traffic",
        "targets": [
          {
            "expr": "system:network:in_bytes",
            "legendFormat": "In - {{ instance }}"
          },
          {
            "expr": "system:network:out_bytes",
            "legendFormat": "Out - {{ instance }}"
          }
        ],
        "type": "graph"
      }
    ]
  }
}
```

### 6.2 åº”ç”¨ç›‘æ§ä»ªè¡¨æ¿

#### 6.2.1 åº”ç”¨æ€§èƒ½ä»ªè¡¨æ¿

```json
{
  "dashboard": {
    "title": "YYCÂ³ Application Monitoring",
    "panels": [
      {
        "title": "HTTP Request Rate",
        "targets": [
          {
            "expr": "app:http_requests:rate",
            "legendFormat": "{{ method }} {{ path }}"
          }
        ],
        "type": "graph"
      },
      {
        "title": "HTTP Error Rate",
        "targets": [
          {
            "expr": "app:http_errors:rate",
            "legendFormat": "{{ status }}"
          }
        ],
        "type": "graph"
      },
      {
        "title": "HTTP Response Time (P95)",
        "targets": [
          {
            "expr": "app:http_response_time:p95",
            "legendFormat": "{{ path }}"
          }
        ],
        "type": "graph"
      },
      {
        "title": "Cache Hit Rate",
        "targets": [
          {
            "expr": "app:cache_hit_rate",
            "legendFormat": "{{ cache }}"
          }
        ],
        "type": "graph"
      }
    ]
  }
}
```

---

## 7. å‘Šè­¦æ•…éšœæ’æŸ¥

### 7.1 å‘Šè­¦æ’æŸ¥æµç¨‹

#### 7.1.1 æ’æŸ¥æ­¥éª¤

```markdown
## å‘Šè­¦æ•…éšœæ’æŸ¥æµç¨‹

### 1. ç¡®è®¤å‘Šè­¦
- æŸ¥çœ‹å‘Šè­¦è¯¦æƒ…
- ç¡®è®¤å‘Šè­¦çº§åˆ«
- ç¡®è®¤å½±å“èŒƒå›´

### 2. æ”¶é›†ä¿¡æ¯
- æŸ¥çœ‹ç›‘æ§æŒ‡æ ‡
- æŸ¥çœ‹æ—¥å¿—
- æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€

### 3. åˆ†æåŸå› 
- åˆ†ææŒ‡æ ‡è¶‹åŠ¿
- åˆ†ææ—¥å¿—é”™è¯¯
- åˆ†æç³»ç»Ÿè´Ÿè½½

### 4. å®šä½é—®é¢˜
- ç¡®å®šé—®é¢˜ç±»å‹
- ç¡®å®šé—®é¢˜ä½ç½®
- ç¡®å®šé—®é¢˜åŸå› 

### 5. å¤„ç†é—®é¢˜
- æ‰§è¡Œåº”æ€¥æ–¹æ¡ˆ
- ä¿®å¤é—®é¢˜
- éªŒè¯ä¿®å¤

### 6. æ€»ç»“ç»éªŒ
- è®°å½•é—®é¢˜
- åˆ†ææ ¹æœ¬åŸå› 
- åˆ¶å®šæ”¹è¿›æªæ–½
```

### 7.2 å¸¸è§å‘Šè­¦å¤„ç†

#### 7.2.1 CPU ä½¿ç”¨ç‡å‘Šè­¦å¤„ç†

```bash
#!/bin/bash
# === handle-cpu-alert.sh ===

set -euo pipefail

# é¢œè‰²è¾“å‡º
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

log_info() {
    echo -e "${GREEN}[INFO]${NC} $1"
}

log_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# æ£€æŸ¥å‚æ•°
if [ $# -ne 1 ]; then
    log_error "Usage: $0 <instance>"
    exit 1
fi

INSTANCE=$1

log_info "Handling CPU alert for instance: $INSTANCE"

# 1. æ£€æŸ¥ CPU ä½¿ç”¨ç‡
log_info "Checking CPU usage..."
top -bn1 | head -20

# 2. æ£€æŸ¥è¿›ç¨‹
log_info "Checking top processes..."
ps aux --sort=-%cpu | head -20

# 3. æ£€æŸ¥ç³»ç»Ÿè´Ÿè½½
log_info "Checking system load..."
uptime

# 4. æ£€æŸ¥æ˜¯å¦æœ‰å¼‚å¸¸è¿›ç¨‹
log_info "Checking for suspicious processes..."
ps aux | grep -E "defunct|zombie" || echo "No zombie processes found"

log_info "CPU alert handling completed"
```

---

## 8. ç›‘æ§å‘Šè­¦æœ€ä½³å®è·µ

### 8.1 æœ€ä½³å®è·µ

#### 8.1.1 å®è·µå»ºè®®

```markdown
## ç›‘æ§å‘Šè­¦æœ€ä½³å®è·µ

### 1. æŒ‡æ ‡é€‰æ‹©
- é€‰æ‹©å…³é”®ä¸šåŠ¡æŒ‡æ ‡
- é€‰æ‹©å…³é”®ç³»ç»ŸæŒ‡æ ‡
- é¿å…è¿‡åº¦ç›‘æ§
- ç¡®ä¿æŒ‡æ ‡æœ‰æ„ä¹‰

### 2. å‘Šè­¦è®¾ç½®
- è®¾ç½®åˆç†çš„é˜ˆå€¼
- è®¾ç½®åˆç†çš„æŒç»­æ—¶é—´
- é¿å…å‘Šè­¦é£æš´
- ç¡®ä¿å‘Šè­¦å¯æ“ä½œ

### 3. å‘Šè­¦é€šçŸ¥
- é€‰æ‹©åˆé€‚çš„é€šçŸ¥æ¸ é“
- è®¾ç½®åˆç†çš„é€šçŸ¥é¢‘ç‡
- ç¡®ä¿é€šçŸ¥åŠæ—¶åˆ°è¾¾
- é¿å…é€šçŸ¥ç–²åŠ³

### 4. å‘Šè­¦å¤„ç†
- å»ºç«‹å‘Šè­¦å¤„ç†æµç¨‹
- å»ºç«‹å‘Šè­¦å¤„ç†å›¢é˜Ÿ
- åŠæ—¶å¤„ç†å‘Šè­¦
- è®°å½•å¤„ç†è¿‡ç¨‹

### 5. æŒç»­ä¼˜åŒ–
- å®šæœŸå®¡æŸ¥å‘Šè­¦è§„åˆ™
- å®šæœŸä¼˜åŒ–ç›‘æ§æŒ‡æ ‡
- å®šæœŸä¼˜åŒ–å‘Šè­¦é˜ˆå€¼
- æŒç»­æ”¹è¿›ç›‘æ§ä½“ç³»
```

---

## ğŸ“„ æ–‡æ¡£æ ‡å°¾ (Footer)

> ã€Œ***YanYuCloudCube***ã€
> ã€Œ***<admin@0379.email>***ã€
> ã€Œ***Words Initiate Quadrants, Language Serves as Core for the Future***ã€
> ã€Œ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***ã€




## æ¦‚è¿°

### æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›äº†å®ç”¨çš„æŠ€å·§å’Œæ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…æé«˜å·¥ä½œæ•ˆç‡å’Œä»£ç è´¨é‡ã€‚

#### é€‚ç”¨åœºæ™¯

- æ—¥å¸¸å¼€å‘å·¥ä½œ
- ä»£ç ä¼˜åŒ–å’Œé‡æ„
- é—®é¢˜æ’æŸ¥å’Œè°ƒè¯•
- æ€§èƒ½ä¼˜åŒ–å’Œè°ƒä¼˜

#### é¢„æœŸæ”¶ç›Š

- æé«˜å¼€å‘æ•ˆç‡
- å‡å°‘ä»£ç é”™è¯¯
- ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½
- æå‡ä»£ç å¯ç»´æŠ¤æ€§



## æ ¸å¿ƒæ¦‚å¿µ

### æ ¸å¿ƒæ¦‚å¿µ

#### å…³é”®æœ¯è¯­

- **æŠ€å·§**ï¼šç»è¿‡å®è·µéªŒè¯çš„æœ‰æ•ˆæ–¹æ³•
- **æœ€ä½³å®è·µ**ï¼šä¸šç•Œå…¬è®¤çš„ä¼˜ç§€åšæ³•
- **æ¨¡å¼**ï¼šå¯é‡å¤ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆ
- **åŸåˆ™**ï¼šæŒ‡å¯¼è®¾è®¡çš„åŸºæœ¬å‡†åˆ™

#### æ ¸å¿ƒåŸç†

1. **DRYåŸåˆ™**ï¼ˆDon't Repeat Yourselfï¼‰
   - é¿å…ä»£ç é‡å¤
   - æå–å…¬å…±é€»è¾‘
   - ä½¿ç”¨å‡½æ•°å’Œç±»å°è£…

2. **KISSåŸåˆ™**ï¼ˆKeep It Simple, Stupidï¼‰
   - ä¿æŒç®€å•
   - é¿å…è¿‡åº¦è®¾è®¡
   - ä¼˜å…ˆå¯è¯»æ€§

3. **YAGNIåŸåˆ™**ï¼ˆYou Aren't Gonna Need Itï¼‰
   - åªå®ç°å½“å‰éœ€è¦çš„åŠŸèƒ½
   - é¿å…è¿‡åº¦å·¥ç¨‹
   - ä¿æŒä»£ç ç²¾ç®€



## å®æ–½æ­¥éª¤

### å®æ–½æ­¥éª¤

#### æ­¥éª¤1ï¼šå‡†å¤‡å·¥ä½œ

```bash
# å®‰è£…å¿…è¦å·¥å…·
npm install -g typescript eslint prettier

# åˆå§‹åŒ–é¡¹ç›®
npm init -y
npm install --save-dev typescript @types/node
```

#### æ­¥éª¤2ï¼šé…ç½®ç¯å¢ƒ

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  }
}
```

#### æ­¥éª¤3ï¼šç¼–å†™ä»£ç 

```typescript
// åˆ›å»ºä¸»æ–‡ä»¶
// src/index.ts
function main() {
  console.log('Hello, YYCÂ³!');
}

main();
```

#### æ­¥éª¤4ï¼šæµ‹è¯•éªŒè¯

```bash
# è¿è¡Œä»£ç 
npm run dev

# è¿è¡Œæµ‹è¯•
npm test
```



## ä»£ç ç¤ºä¾‹

### ä»£ç ç¤ºä¾‹

#### ç¤ºä¾‹1ï¼šåŸºç¡€ç”¨æ³•

```typescript
// ç®€å•ç¤ºä¾‹
function greet(name: string): string {
  return `Hello, ${name}!`;
}

const message = greet('YYCÂ³');
console.log(message); // è¾“å‡º: Hello, YYCÂ³!
```

#### ç¤ºä¾‹2ï¼šé«˜çº§ç”¨æ³•

```typescript
// å¼‚æ­¥æ“ä½œ
async function fetchData(url: string): Promise<any> {
  const response = await fetch(url);
  const data = await response.json();
  return data;
}

// ä½¿ç”¨ç¤ºä¾‹
fetchData('https://api.example.com/data')
  .then(data => console.log(data))
  .catch(error => console.error('Error:', error));
```

#### ç¤ºä¾‹3ï¼šé”™è¯¯å¤„ç†

```typescript
// è‡ªå®šä¹‰é”™è¯¯ç±»
class ValidationError extends Error {
  constructor(public field: string, message: string) {
    super(message);
    this.name = 'ValidationError';
  }
}

// ä½¿ç”¨ç¤ºä¾‹
function validateEmail(email: string): void {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) {
    throw new ValidationError('email', 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®');
  }
}

try {
  validateEmail('invalid-email');
} catch (error) {
  if (error instanceof ValidationError) {
    console.error(`éªŒè¯å¤±è´¥: ${error.field} - ${error.message}`);
  }
}
```



## æ³¨æ„äº‹é¡¹

### æ³¨æ„äº‹é¡¹

#### å¸¸è§é™·é˜±

1. **å¼‚æ­¥æ“ä½œé”™è¯¯**
```typescript
// âŒ é”™è¯¯ï¼šæ²¡æœ‰ç­‰å¾…å¼‚æ­¥æ“ä½œ
async function processData() {
  const data = fetchData(); // å¿˜è®°await
  console.log(data); // è¾“å‡ºPromiseå¯¹è±¡
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨await
async function processData() {
  const data = await fetchData();
  console.log(data); // è¾“å‡ºå®é™…æ•°æ®
}
```

2. **å†…å­˜æ³„æ¼**
```typescript
// âŒ é”™è¯¯ï¼šæ²¡æœ‰æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
useEffect(() => {
  window.addEventListener('resize', handleResize);
}, []); // ç¼ºå°‘æ¸…ç†å‡½æ•°

// âœ… æ­£ç¡®ï¼šæ¸…ç†äº‹ä»¶ç›‘å¬å™¨
useEffect(() => {
  window.addEventListener('resize', handleResize);
  return () => {
    window.removeEventListener('resize', handleResize);
  };
}, []);
```

#### æ€§èƒ½æ³¨æ„äº‹é¡¹

1. **é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“**
```typescript
// âŒ é”™è¯¯ï¼šæ¯æ¬¡éƒ½åˆ›å»ºæ–°å¯¹è±¡
<Component data={{ value: 1 }} />

// âœ… æ­£ç¡®ï¼šä½¿ç”¨useMemoç¼“å­˜
const memoizedData = useMemo(() => ({ value: 1 }), []);
<Component data={memoizedData} />
```

2. **é¿å…å¤§å¯¹è±¡ä¼ é€’**
```typescript
// âŒ é”™è¯¯ï¼šä¼ é€’æ•´ä¸ªå¤§å¯¹è±¡
<Component user={user} />

// âœ… æ­£ç¡®ï¼šåªä¼ é€’éœ€è¦çš„å±æ€§
<Component userName={user.name} userId={user.id} />
```



## æœ€ä½³å®è·µ

### æœ€ä½³å®è·µ

#### ä»£ç è§„èŒƒ

1. **å‘½åè§„èŒƒ**
```typescript
// å˜é‡ï¼šcamelCase
const userName = 'John';

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;

// ç±»ï¼šPascalCase
class UserService { }

// æ¥å£ï¼šPascalCaseï¼Œå‰ç¼€Iï¼ˆå¯é€‰ï¼‰
interface IUserService { }
```

2. **æ³¨é‡Šè§„èŒƒ**
```typescript
/**
 * åˆ›å»ºç”¨æˆ·
 * @param email - ç”¨æˆ·é‚®ç®±
 * @param password - ç”¨æˆ·å¯†ç 
 * @returns åˆ›å»ºçš„ç”¨æˆ·å¯¹è±¡
 * @throws {Error} å½“é‚®ç®±å·²å­˜åœ¨æ—¶æŠ›å‡ºé”™è¯¯
 */
async function createUser(
  email: string, 
  password: string
): Promise<User> {
  // å®ç°
}
```

#### é”™è¯¯å¤„ç†

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
class AppError extends Error {
  constructor(
    public statusCode: number,
    public message: string,
    public isOperational = true
  ) {
    super(message);
    this.name = this.constructor.name;
    Error.captureStackTrace(this, this.constructor);
  }
}

// ä½¿ç”¨é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((err: Error, req: Request, res: Response, next: NextFunction) => {
  if (err instanceof AppError) {
    return res.status(err.statusCode).json({
      success: false,
      error: err.message
    });
  }
  
  // è®°å½•æœªé¢„æœŸçš„é”™è¯¯
  logger.error('Unexpected error:', err);
  
  return res.status(500).json({
    success: false,
    error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
  });
});
```

#### æ—¥å¿—è®°å½•

```typescript
// ç»“æ„åŒ–æ—¥å¿—
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

// ä½¿ç”¨æ—¥å¿—
logger.info('User created', { userId: user.id, email: user.email });
logger.error('Database connection failed', { error: error.message });
```



## å¸¸è§é—®é¢˜

### å¸¸è§é—®é¢˜

#### Q1: å¦‚ä½•å¤„ç†å¼‚æ­¥é”™è¯¯ï¼Ÿ

**A**: ä½¿ç”¨try-catchæ•è·å¼‚æ­¥é”™è¯¯ï¼š

```typescript
async function handleRequest() {
  try {
    const result = await fetchData();
    return result;
  } catch (error) {
    console.error('è¯·æ±‚å¤±è´¥:', error);
    throw error;
  }
}
```

#### Q2: å¦‚ä½•ä¼˜åŒ–Reactç»„ä»¶æ€§èƒ½ï¼Ÿ

**A**: ä½¿ç”¨ä»¥ä¸‹ä¼˜åŒ–æŠ€æœ¯ï¼š

1. **React.memo**ï¼šé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
2. **useMemo**ï¼šç¼“å­˜è®¡ç®—ç»“æœ
3. **useCallback**ï¼šç¼“å­˜å‡½æ•°å¼•ç”¨
4. **ä»£ç åˆ†å‰²**ï¼šæ‡’åŠ è½½ç»„ä»¶

```typescript
const MemoizedComponent = React.memo(({ data }) => {
  const processedData = useMemo(() => processData(data), [data]);
  return <div>{processedData}</div>;
});
```

#### Q3: å¦‚ä½•ç®¡ç†åº”ç”¨çŠ¶æ€ï¼Ÿ

**A**: æ ¹æ®åº”ç”¨å¤æ‚åº¦é€‰æ‹©åˆé€‚çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼š

1. **ç®€å•åº”ç”¨**ï¼šä½¿ç”¨React Context API
2. **ä¸­ç­‰åº”ç”¨**ï¼šä½¿ç”¨Zustandæˆ–Redux Toolkit
3. **å¤æ‚åº”ç”¨**ï¼šä½¿ç”¨Redux + ä¸­é—´ä»¶

```typescript
// Zustandç¤ºä¾‹
const useStore = create((set) => ({
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
  decrement: () => set((state) => ({ count: state.count - 1 }))
}));
```



## æ¡ˆä¾‹åˆ†æ

### æ¡ˆä¾‹åˆ†æ

#### æ¡ˆä¾‹1ï¼šæ€§èƒ½ä¼˜åŒ–

**é—®é¢˜**ï¼šé¡µé¢åŠ è½½æ—¶é—´è¿‡é•¿ï¼Œç”¨æˆ·ä½“éªŒå·®ã€‚

**åˆ†æ**ï¼š
- é¦–æ¬¡å†…å®¹ç»˜åˆ¶(FCP)ï¼š3.2ç§’
- æœ€å¤§å†…å®¹ç»˜åˆ¶(LCP)ï¼š5.8ç§’
- ç´¯ç§¯å¸ƒå±€åç§»(CLS)ï¼š0.25

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å®ç°ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
2. ä¼˜åŒ–å›¾ç‰‡åŠ è½½ï¼ˆä½¿ç”¨WebPæ ¼å¼ï¼Œæ·»åŠ loading="lazy"ï¼‰
3. å¯ç”¨Gzipå‹ç¼©
4. ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æº

**ç»“æœ**ï¼š
- FCPï¼š1.2ç§’ï¼ˆâ†“62.5%ï¼‰
- LCPï¼š2.1ç§’ï¼ˆâ†“63.8%ï¼‰
- CLSï¼š0.08ï¼ˆâ†“68%ï¼‰

#### æ¡ˆä¾‹2ï¼šé”™è¯¯å¤„ç†æ”¹è¿›

**é—®é¢˜**ï¼šé”™è¯¯ä¿¡æ¯ä¸æ¸…æ™°ï¼Œéš¾ä»¥å®šä½é—®é¢˜ã€‚

**åˆ†æ**ï¼š
- é”™è¯¯ä¿¡æ¯è¿‡äºç®€å•
- ç¼ºå°‘é”™è¯¯ä¸Šä¸‹æ–‡
- æ²¡æœ‰é”™è¯¯è¿½è¸ª

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å®ç°è‡ªå®šä¹‰é”™è¯¯ç±»
2. æ·»åŠ é”™è¯¯å †æ ˆè¿½è¸ª
3. é›†æˆé”™è¯¯ç›‘æ§å·¥å…·ï¼ˆSentryï¼‰
4. å®ç°é”™è¯¯æ—¥å¿—è®°å½•

**ç»“æœ**ï¼š
- é”™è¯¯å®šä½æ—¶é—´å‡å°‘70%
- é”™è¯¯è§£å†³ç‡æé«˜40%
- ç”¨æˆ·æŠ•è¯‰å‡å°‘60%

#### æ¡ˆä¾‹3ï¼šä»£ç é‡æ„

**é—®é¢˜**ï¼šä»£ç é‡å¤ç‡é«˜ï¼Œç»´æŠ¤å›°éš¾ã€‚

**åˆ†æ**ï¼š
- ä»£ç é‡å¤ç‡ï¼š35%
- å‡½æ•°å¹³å‡é•¿åº¦ï¼š120è¡Œ
- åœˆå¤æ‚åº¦ï¼š15

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æå–å…¬å…±é€»è¾‘åˆ°å·¥å…·å‡½æ•°
2. ä½¿ç”¨è®¾è®¡æ¨¡å¼é‡æ„
3. æ‹†åˆ†å¤§å‡½æ•°
4. æ·»åŠ å•å…ƒæµ‹è¯•

**ç»“æœ**ï¼š
- ä»£ç é‡å¤ç‡ï¼š8%ï¼ˆâ†“77%ï¼‰
- å‡½æ•°å¹³å‡é•¿åº¦ï¼š35è¡Œï¼ˆâ†“71%ï¼‰
- åœˆå¤æ‚åº¦ï¼š5ï¼ˆâ†“67%ï¼‰


## ç›¸å…³æ–‡æ¡£

- [ğŸ”– YYCÂ³ ç¾å¤‡æ¼”ç»ƒä¸æ¢å¤æŠ€å·§](YYC3-Cater-è¿ç»´è¿è¥/æŠ€å·§ç±»/05-YYC3-Cater--æŠ€å·§ç±»-ç¾å¤‡æ¼”ç»ƒä¸æ¢å¤æŠ€å·§.md) - YYC3-Cater-è¿ç»´è¿è¥/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ æ™ºèƒ½è¿ç»´å¹³å°æ“ä½œæŒ‡å—](YYC3-Cater-è¿ç»´è¿è¥/æŠ€å·§ç±»/04-YYC3-Cater--æŠ€å·§ç±»-æ™ºèƒ½è¿ç»´å¹³å°æ“ä½œæŒ‡å—.md) - YYC3-Cater-è¿ç»´è¿è¥/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ æ—¥å¿—åˆ†æä¸é—®é¢˜å®šä½æŠ€å·§](YYC3-Cater-è¿ç»´è¿è¥/æŠ€å·§ç±»/03-YYC3-Cater--æŠ€å·§ç±»-æ—¥å¿—åˆ†æä¸é—®é¢˜å®šä½æŠ€å·§.md) - YYC3-Cater-è¿ç»´è¿è¥/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–è¿ç»´æŠ€å·§](YYC3-Cater-è¿ç»´è¿è¥/æŠ€å·§ç±»/06-YYC3-Cater--æŠ€å·§ç±»-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–è¿ç»´æŠ€å·§.md) - YYC3-Cater-è¿ç»´è¿è¥/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ è¿ç»´æ‰‹å†Œ](YYC3-Cater-è¿ç»´è¿è¥/æŠ€å·§ç±»/01-YYC3-Cater--æŠ€å·§ç±»-è¿ç»´æ‰‹å†Œ.md) - YYC3-Cater-è¿ç»´è¿è¥/æŠ€å·§ç±»
