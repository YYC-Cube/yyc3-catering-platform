---

**@file**ï¼šYYCÂ³-è¿ç»´æ¶æ„è®¾è®¡æ–‡æ¡£
**@description**ï¼šYYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°çš„è¿ç»´æ¶æ„è®¾è®¡æ–‡æ¡£
**@author**ï¼šYYCÂ³
**@version**ï¼šv1.0.0
**@created**ï¼š2025-01-30
**@updated**ï¼š2025-01-30
**@status**ï¼špublished
**@tags**ï¼šæ¶æ„è®¾è®¡,YYCÂ³,ç³»ç»Ÿæ¶æ„

---
# ğŸ”– YYCÂ³ è¿ç»´æ¶æ„è®¾è®¡æ–‡æ¡£

> ***YanYuCloudCube***
> **æ ‡è¯­**ï¼šè¨€å¯è±¡é™ | è¯­æ¢æœªæ¥
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **æ ‡è¯­**ï¼šä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| å±æ€§ | å†…å®¹ |
|------|------|
| **æ–‡æ¡£æ ‡é¢˜** | YYCÂ³ è¿ç»´æ¶æ„è®¾è®¡æ–‡æ¡£ |
| **æ–‡æ¡£ç±»å‹** | æ¶æ„è®¾è®¡æ–‡æ¡£ |
| **æ‰€å±é˜¶æ®µ** | è¿ç»´è¿è¥ |
| **éµå¾ªè§„èŒƒ** | YYCÂ³ å›¢é˜Ÿæ ‡å‡†åŒ–è§„èŒƒ v1.0.0 |
| **ç‰ˆæœ¬å·** | v1.0.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2025-01-30 |
| **ä½œè€…** | YYCÂ³ Team |
| **æ›´æ–°æ—¥æœŸ** | 2025-01-30 |

---

## ğŸ“‘ ç›®å½•

1. [è¿ç»´æ¶æ„æ¦‚è¿°](#1-è¿ç»´æ¶æ„æ¦‚è¿°)
2. [åŸºç¡€è®¾æ–½è¿ç»´](#2-åŸºç¡€è®¾æ–½è¿ç»´)
3. [åº”ç”¨è¿ç»´](#3-åº”ç”¨è¿ç»´)
4. [è‡ªåŠ¨åŒ–è¿ç»´](#4-è‡ªåŠ¨åŒ–è¿ç»´)
5. [æ•…éšœç®¡ç†](#5-æ•…éšœç®¡ç†)
6. [å˜æ›´ç®¡ç†](#6-å˜æ›´ç®¡ç†)
7. [å®¹é‡ç®¡ç†](#7-å®¹é‡ç®¡ç†)
8. [è¿ç»´æœ€ä½³å®è·µ](#8-è¿ç»´æœ€ä½³å®è·µ)

---

## 1. æ¦‚è¿°

### 1.1 è®¾è®¡ç›®æ ‡

æœ¬æ¶æ„è®¾è®¡æ–‡æ¡£æ—¨åœ¨ä¸ºYYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°æä¾›æ¸…æ™°ã€å®Œæ•´çš„æŠ€æœ¯æ¶æ„æŒ‡å¯¼ã€‚ä¸»è¦ç›®æ ‡åŒ…æ‹¬ï¼š

- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒä¸šåŠ¡å¿«é€Ÿæ‰©å±•ï¼Œæ¨¡å—åŒ–è®¾è®¡ä¾¿äºåŠŸèƒ½è¿­ä»£
- **é«˜æ€§èƒ½**ï¼šä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼Œç¡®ä¿é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ç¨³å®šè¿è¡Œ
- **é«˜å¯ç”¨æ€§**ï¼šå®ç°ç³»ç»Ÿé«˜å¯ç”¨ï¼Œæ•…éšœè‡ªåŠ¨æ¢å¤ï¼Œä¿éšœä¸šåŠ¡è¿ç»­æ€§
- **å®‰å…¨æ€§**ï¼šå»ºç«‹å®Œå–„çš„å®‰å…¨ä½“ç³»ï¼Œä¿æŠ¤æ•°æ®å’Œç³»ç»Ÿå®‰å…¨
- **æ˜“ç»´æŠ¤æ€§**ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œæ–‡æ¡£å®Œå–„ï¼Œä¾¿äºå›¢é˜Ÿåä½œå’Œç»´æŠ¤

é€šè¿‡æœ¬æ¶æ„è®¾è®¡ï¼Œç¡®ä¿å¹³å°èƒ½å¤Ÿæ»¡è¶³å½“å‰ä¸šåŠ¡éœ€æ±‚ï¼Œå¹¶ä¸ºæœªæ¥çš„å‘å±•å¥ å®šåšå®åŸºç¡€ã€‚

### 1.2 è®¾è®¡åŸåˆ™

æ¶æ„è®¾è®¡éµå¾ªä»¥ä¸‹æ ¸å¿ƒåŸåˆ™ï¼š

- **å•ä¸€èŒè´£åŸåˆ™**ï¼šæ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„ä¸šåŠ¡åŠŸèƒ½
- **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•
- **ä¾èµ–å€’ç½®åŸåˆ™**ï¼šé«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œéƒ½ä¾èµ–æŠ½è±¡
- **æ¥å£éš”ç¦»åŸåˆ™**ï¼šä½¿ç”¨ç»†ç²’åº¦çš„æ¥å£ï¼Œé¿å…æ¥å£æ±¡æŸ“
- **æœ€å°‘çŸ¥è¯†åŸåˆ™**ï¼šæ¨¡å—é—´æœ€å°åŒ–ä¾èµ–ï¼Œé™ä½è€¦åˆåº¦

åŒæ—¶éµå¾ªYYCÂ³ã€Œäº”é«˜äº”æ ‡äº”åŒ–ã€æ ¸å¿ƒç†å¿µï¼š
- **äº”é«˜**ï¼šé«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€é«˜å®‰å…¨ã€é«˜æ‰©å±•ã€é«˜å¯ç»´æŠ¤
- **äº”æ ‡**ï¼šæ ‡å‡†åŒ–ã€è§„èŒƒåŒ–ã€è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–ã€å¯è§†åŒ–
- **äº”åŒ–**ï¼šæµç¨‹åŒ–ã€æ–‡æ¡£åŒ–ã€å·¥å…·åŒ–ã€æ•°å­—åŒ–ã€ç”Ÿæ€åŒ–

### 1.3 æŠ€æœ¯é€‰å‹

æŠ€æœ¯æ ˆé€‰æ‹©åŸºäºä»¥ä¸‹è€ƒè™‘ï¼š

**å‰ç«¯æŠ€æœ¯æ ˆ**
- React 18+ï¼šé‡‡ç”¨ç°ä»£åŒ–å‰ç«¯æ¡†æ¶ï¼Œç»„ä»¶åŒ–å¼€å‘
- TypeScript 5.0+ï¼šç±»å‹å®‰å…¨ï¼Œæé«˜ä»£ç è´¨é‡
- Next.js 14+ï¼šSSR/SSGæ”¯æŒï¼Œä¼˜åŒ–SEOå’Œæ€§èƒ½
- Tailwind CSSï¼šåŸå­åŒ–CSSï¼Œå¿«é€Ÿæ„å»ºUI

**åç«¯æŠ€æœ¯æ ˆ**
- Node.js 18+ï¼šé«˜æ€§èƒ½JavaScriptè¿è¡Œæ—¶
- Express/Fastifyï¼šè½»é‡çº§Webæ¡†æ¶
- PostgreSQL 15+ï¼šå…³ç³»å‹æ•°æ®åº“ï¼ŒACIDä¿è¯
- Redis 7+ï¼šç¼“å­˜å’Œä¼šè¯å­˜å‚¨

**åŸºç¡€è®¾æ–½**
- Dockerï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼Œç¯å¢ƒä¸€è‡´æ€§
- Kubernetesï¼šå®¹å™¨ç¼–æ’ï¼Œè‡ªåŠ¨åŒ–è¿ç»´
- Nginxï¼šåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡
- Prometheus + Grafanaï¼šç›‘æ§å’Œå‘Šè­¦

**å¼€å‘å·¥å…·**
- Gitï¼šç‰ˆæœ¬æ§åˆ¶
- ESLint + Prettierï¼šä»£ç è§„èŒƒ
- Jest + Vitestï¼šå•å…ƒæµ‹è¯•
- GitHub Actionsï¼šCI/CDè‡ªåŠ¨åŒ–

## 2. æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

YYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†ä¸ºä»¥ä¸‹å±‚æ¬¡ï¼š

**è¡¨ç°å±‚ï¼ˆPresentation Layerï¼‰**
- Webå‰ç«¯ï¼šReact + Next.jsæ„å»ºçš„å•é¡µåº”ç”¨
- ç§»åŠ¨ç«¯ï¼šå“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šè®¾å¤‡è®¿é—®
- ç®¡ç†åå°ï¼šç‹¬ç«‹çš„ç®¡ç†ç•Œé¢

**åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰**
- APIç½‘å…³ï¼šç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±åˆ†å‘
- ä¸šåŠ¡æœåŠ¡ï¼šè®¢å•ã€ç”¨æˆ·ã€å•†å“ç­‰æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- è®¤è¯æˆæƒï¼šJWTè®¤è¯ï¼ŒRBACæƒé™æ§åˆ¶

**é¢†åŸŸå±‚ï¼ˆDomain Layerï¼‰**
- é¢†åŸŸæ¨¡å‹ï¼šæ ¸å¿ƒä¸šåŠ¡å®ä½“å’Œè§„åˆ™
- é¢†åŸŸæœåŠ¡ï¼šå¤æ‚ä¸šåŠ¡é€»è¾‘å°è£…
- ä»“å‚¨æ¥å£ï¼šæ•°æ®è®¿é—®æŠ½è±¡

**åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructure Layerï¼‰**
- æ•°æ®åº“ï¼šPostgreSQLä¸»ä»æ¶æ„
- ç¼“å­˜ï¼šRedisé›†ç¾¤
- æ¶ˆæ¯é˜Ÿåˆ—ï¼šRabbitMQ/Kafka
- æ–‡ä»¶å­˜å‚¨ï¼šOSS/MinIO

**è·¨å±‚å…³æ³¨ç‚¹**
- æ—¥å¿—ç›‘æ§ï¼šELK Stack
- é…ç½®ç®¡ç†ï¼šApollo/Nacos
- æœåŠ¡å‘ç°ï¼šConsul/Eureka
- é“¾è·¯è¿½è¸ªï¼šJaeger/SkyWalking

### 2.2 æ¨¡å—åˆ’åˆ†

ç³»ç»ŸæŒ‰ç…§ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†ä¸ºä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š

**ç”¨æˆ·æ¨¡å—ï¼ˆUser Moduleï¼‰**
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€è®¤è¯
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- æƒé™å’Œè§’è‰²ç®¡ç†

**å•†å“æ¨¡å—ï¼ˆProduct Moduleï¼‰**
- å•†å“ä¿¡æ¯ç®¡ç†
- å•†å“åˆ†ç±»å’Œæ ‡ç­¾
- åº“å­˜ç®¡ç†

**è®¢å•æ¨¡å—ï¼ˆOrder Moduleï¼‰**
- è®¢å•åˆ›å»ºå’Œæ”¯ä»˜
- è®¢å•çŠ¶æ€æµè½¬
- è®¢å•æŸ¥è¯¢å’Œç»Ÿè®¡

**æ”¯ä»˜æ¨¡å—ï¼ˆPayment Moduleï¼‰**
- æ”¯ä»˜æ¥å£é›†æˆ
- æ”¯ä»˜çŠ¶æ€åŒæ­¥
- é€€æ¬¾å¤„ç†

**è¥é”€æ¨¡å—ï¼ˆMarketing Moduleï¼‰**
- ä¼˜æƒ åˆ¸ç®¡ç†
- ä¿ƒé”€æ´»åŠ¨
- ä¼šå‘˜ç§¯åˆ†

**æŠ¥è¡¨æ¨¡å—ï¼ˆReport Moduleï¼‰**
- é”€å”®æŠ¥è¡¨
- æ•°æ®åˆ†æ
- å¯è§†åŒ–å±•ç¤º

**ç³»ç»Ÿæ¨¡å—ï¼ˆSystem Moduleï¼‰**
- é…ç½®ç®¡ç†
- æ—¥å¿—ç®¡ç†
- ç›‘æ§å‘Šè­¦

### 2.3 æ•°æ®æµå‘

## 3. æŠ€æœ¯å®ç°

### 3.1 æ ¸å¿ƒæŠ€æœ¯

### 3.2 å…³é”®ç®—æ³•

### 3.3 æ€§èƒ½ä¼˜åŒ–

## 4. æ¥å£è®¾è®¡

### 4.1 APIæ¥å£

### 4.2 æ•°æ®æ¥å£

### 4.3 æ¶ˆæ¯æ¥å£

## 5. éƒ¨ç½²æ–¹æ¡ˆ

### 5.1 éƒ¨ç½²æ¶æ„

### 5.2 é…ç½®ç®¡ç†

### 5.3 ç›‘æ§å‘Šè­¦

## 6. é™„å½•

### 6.1 æœ¯è¯­è¡¨

### 6.2 å‚è€ƒèµ„æ–™

## 1. è¿ç»´æ¶æ„æ¦‚è¿°

### 1.1 æ¶æ„ç®€ä»‹

YYCÂ³ è¿ç»´æ¶æ„åŸºäºäº‘åŸç”Ÿå’Œ DevOps ç†å¿µï¼Œæ„å»ºè‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–ã€é«˜å¯ç”¨çš„è¿ç»´ä½“ç³»ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œå’Œå¿«é€Ÿå“åº”ä¸šåŠ¡éœ€æ±‚ã€‚

### 1.2 è¿ç»´å±‚æ¬¡

```
åŸºç¡€è®¾æ–½å±‚
  â”œâ”€â”€ æœåŠ¡å™¨ç®¡ç†
  â”œâ”€â”€ ç½‘ç»œç®¡ç†
  â”œâ”€â”€ å­˜å‚¨ç®¡ç†
  â””â”€â”€ å®¹å™¨å¹³å°

åº”ç”¨å±‚
  â”œâ”€â”€ åº”ç”¨éƒ¨ç½²
  â”œâ”€â”€ åº”ç”¨ç›‘æ§
  â”œâ”€â”€ æ—¥å¿—ç®¡ç†
  â””â”€â”€ é…ç½®ç®¡ç†

æœåŠ¡å±‚
  â”œâ”€â”€ CI/CD æµæ°´çº¿
  â”œâ”€â”€ è‡ªåŠ¨åŒ–è¿ç»´
  â”œâ”€â”€ æ•…éšœç®¡ç†
  â””â”€â”€ æ€§èƒ½ä¼˜åŒ–

ä¸šåŠ¡å±‚
  â”œâ”€â”€ ä¸šåŠ¡ç›‘æ§
  â”œâ”€â”€ å®¹é‡è§„åˆ’
  â”œâ”€â”€ æˆæœ¬ä¼˜åŒ–
  â””â”€â”€ SLA ç®¡ç†
```

### 1.3 è¿ç»´åŸåˆ™

- **è‡ªåŠ¨åŒ–ä¼˜å…ˆ**ï¼šå°½å¯èƒ½è‡ªåŠ¨åŒ–è¿ç»´æ“ä½œ
- **å¯è§‚æµ‹æ€§**ï¼šå…¨é¢ç›‘æ§å’Œæ—¥å¿—è®°å½•
- **å¿«é€Ÿå“åº”**ï¼šå¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜
- **æŒç»­æ”¹è¿›**ï¼šä¸æ–­ä¼˜åŒ–è¿ç»´æµç¨‹
- **å®‰å…¨åˆè§„**ï¼šç¡®ä¿è¿ç»´æ“ä½œå®‰å…¨åˆè§„

---

## 2. åŸºç¡€è®¾æ–½è¿ç»´

### 2.1 æœåŠ¡å™¨ç®¡ç†

#### 2.1.1 æœåŠ¡å™¨é…ç½®

```bash
#!/bin/bash
# === server-setup.sh ===

# æ›´æ–°ç³»ç»Ÿ
yum update -y

# å®‰è£…åŸºç¡€å·¥å…·
yum install -y \
  curl \
  wget \
  vim \
  git \
  htop \
  iotop \
  net-tools \
  telnet \
  tcpdump \
  strace \
  lsof

# é…ç½®æ—¶åŒº
timedatectl set-timezone Asia/Shanghai

# é…ç½® SSH
sed -i 's/#PermitRootLogin yes/PermitRootLogin no/' /etc/ssh/sshd_config
sed -i 's/#PasswordAuthentication yes/PasswordAuthentication no/' /etc/ssh/sshd_config
systemctl restart sshd

# é…ç½®é˜²ç«å¢™
systemctl start firewalld
systemctl enable firewalld
firewall-cmd --permanent --add-service=http
firewall-cmd --permanent --add-service=https
firewall-cmd --reload

# é…ç½®ç³»ç»Ÿå‚æ•°
cat >> /etc/sysctl.conf << EOF
# ç½‘ç»œä¼˜åŒ–
net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_fin_timeout = 30
net.ipv4.tcp_keepalive_time = 1200
net.ipv4.tcp_max_syn_backlog = 8192
net.ipv4.tcp_max_tw_buckets = 5000
net.core.somaxconn = 65535
net.core.netdev_max_backlog = 65535

# æ–‡ä»¶æè¿°ç¬¦
fs.file-max = 655350
EOF

sysctl -p

# é…ç½®æ–‡ä»¶æè¿°ç¬¦é™åˆ¶
cat >> /etc/security/limits.conf << EOF
* soft nofile 655350
* hard nofile 655350
* soft nproc 655350
* hard nproc 655350
EOF

echo "Server setup completed!"
```

### 2.2 ç½‘ç»œç®¡ç†

#### 2.2.1 ç½‘ç»œé…ç½®

```yaml
# === network-config.yaml ===
apiVersion: v1
kind: ConfigMap
metadata:
  name: network-config
  namespace: kube-system
data:
  # Calico é…ç½®
  calico-config: |
    apiVersion: projectcalico.org/v3
    kind: CalicoAPIConfig
    metadata:
      name: default
    spec:
      datastoreType: "kubernetes"
      kubeconfig: "/etc/cni/net.d/calico-kubeconfig"
```

### 2.3 å­˜å‚¨ç®¡ç†

#### 2.3.1 StorageClass é…ç½®

```yaml
# === storageclass.yaml ===
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: fast-ssd
  annotations:
    storageclass.kubernetes.io/is-default-class: "true"
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp3
  iops: "3000"
  throughput: "125"
  encrypted: "true"
allowVolumeExpansion: true
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: standard-hdd
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp2
  encrypted: "true"
allowVolumeExpansion: true
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
```

---

## 3. åº”ç”¨è¿ç»´

### 3.1 åº”ç”¨éƒ¨ç½²

#### 3.1.1 æ»šåŠ¨æ›´æ–°ç­–ç•¥

```yaml
# === rolling-update.yaml ===
apiVersion: apps/v1
kind: Deployment
metadata:
  name: yyc3-backend
  namespace: yyc3-production
spec:
  replicas: 3
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1        # æœ€å¤šå¯ä»¥å¤šå‡º 1 ä¸ª Pod
      maxUnavailable: 0  # æœ€å¤šå…è®¸ 0 ä¸ª Pod ä¸å¯ç”¨
  minReadySeconds: 10   # Pod å°±ç»ªåç­‰å¾… 10 ç§’
  revisionHistoryLimit: 10  # ä¿ç•™æœ€è¿‘ 10 ä¸ªç‰ˆæœ¬
```

#### 3.1.2 è“ç»¿éƒ¨ç½²ç­–ç•¥

```yaml
# === blue-green-deployment.yaml ===
apiVersion: apps/v1
kind: Deployment
metadata:
  name: yyc3-backend-blue
  namespace: yyc3-production
spec:
  replicas: 3
  selector:
    matchLabels:
      app: yyc3-backend
      version: blue
  template:
    metadata:
      labels:
        app: yyc3-backend
        version: blue
    spec:
      containers:
      - name: backend
        image: registry.yyc3.com/yyc3-backend:v1.0.0
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: yyc3-backend-green
  namespace: yyc3-production
spec:
  replicas: 3
  selector:
    matchLabels:
      app: yyc3-backend
      version: green
  template:
    metadata:
      labels:
        app: yyc3-backend
        version: green
    spec:
      containers:
      - name: backend
        image: registry.yyc3.com/yyc3-backend:v2.0.0
---
apiVersion: v1
kind: Service
metadata:
  name: yyc3-backend-service
  namespace: yyc3-production
spec:
  selector:
    app: yyc3-backend
    version: blue  # åˆ‡æ¢åˆ° green å³å¯å®Œæˆåˆ‡æ¢
  ports:
  - protocol: TCP
    port: 3000
    targetPort: 3000
```

### 3.2 åº”ç”¨ç›‘æ§

#### 3.2.1 å¥åº·æ£€æŸ¥

```yaml
# === health-check.yaml ===
apiVersion: apps/v1
kind: Deployment
metadata:
  name: yyc3-backend
  namespace: yyc3-production
spec:
  template:
    spec:
      containers:
      - name: backend
        image: registry.yyc3.com/yyc3-backend:v1.0.0
        # å­˜æ´»æ¢é’ˆ
        livenessProbe:
          httpGet:
            path: /health
            port: 3000
          initialDelaySeconds: 30
          periodSeconds: 10
          timeoutSeconds: 5
          failureThreshold: 3
          successThreshold: 1
        # å°±ç»ªæ¢é’ˆ
        readinessProbe:
          httpGet:
            path: /ready
            port: 3000
          initialDelaySeconds: 5
          periodSeconds: 5
          timeoutSeconds: 3
          failureThreshold: 3
          successThreshold: 1
        # å¯åŠ¨æ¢é’ˆ
        startupProbe:
          httpGet:
            path: /health
            port: 3000
          initialDelaySeconds: 0
          periodSeconds: 5
          timeoutSeconds: 3
          failureThreshold: 30
          successThreshold: 1
```

---

## 4. è‡ªåŠ¨åŒ–è¿ç»´

### 4.1 Ansible é…ç½®

#### 4.1.1 Playbook ç¤ºä¾‹

```yaml
# === deploy-app.yml ===
---
- name: Deploy YYCÂ³ Application
  hosts: webservers
  become: yes
  vars:
    app_name: yyc3-backend
    app_version: "1.0.0"
    app_port: 3000

  tasks:
    - name: Ensure application directory exists
      file:
        path: /opt/{{ app_name }}
        state: directory
        mode: '0755'

    - name: Download application package
      get_url:
        url: https://releases.yyc3.com/{{ app_name }}/{{ app_version }}/{{ app_name }}-{{ app_version }}.tar.gz
        dest: /tmp/{{ app_name }}-{{ app_version }}.tar.gz
        mode: '0644'

    - name: Extract application package
      unarchive:
        src: /tmp/{{ app_name }}-{{ app_version }}.tar.gz
        dest: /opt/{{ app_name }}
        remote_src: yes

    - name: Install application dependencies
      npm:
        path: /opt/{{ app_name }}
        production: yes

    - name: Create systemd service file
      template:
        src: templates/app.service.j2
        dest: /etc/systemd/system/{{ app_name }}.service
        mode: '0644'
      notify:
        - Reload systemd
        - Restart application

    - name: Enable and start application service
      systemd:
        name: {{ app_name }}
        enabled: yes
        state: started

  handlers:
    - name: Reload systemd
      systemd:
        daemon_reload: yes

    - name: Restart application
      systemd:
        name: {{ app_name }}
        state: restarted
```

### 4.2 è‡ªåŠ¨åŒ–è„šæœ¬

#### 4.2.1 éƒ¨ç½²è„šæœ¬

```bash
#!/bin/bash
# === deploy.sh ===

set -euo pipefail

# é…ç½®
APP_NAME="yyc3-backend"
APP_VERSION="${1:-latest}"
NAMESPACE="yyc3-production"
REGISTRY="registry.yyc3.com"

# é¢œè‰²è¾“å‡º
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

log_info() {
    echo -e "${GREEN}[INFO]${NC} $1"
}

log_warn() {
    echo -e "${YELLOW}[WARN]${NC} $1"
}

log_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# æ£€æŸ¥é•œåƒæ˜¯å¦å­˜åœ¨
check_image() {
    log_info "Checking image ${REGISTRY}/${APP_NAME}:${APP_VERSION}..."
    if ! docker pull ${REGISTRY}/${APP_NAME}:${APP_VERSION}; then
        log_error "Image not found"
        exit 1
    fi
    log_info "Image found"
}

# éƒ¨ç½²åº”ç”¨
deploy_app() {
    log_info "Deploying ${APP_NAME}:${APP_VERSION} to ${NAMESPACE}..."
    
    # æ›´æ–° Deployment
    kubectl set image deployment/${APP_NAME} \
        ${APP_NAME}=${REGISTRY}/${APP_NAME}:${APP_VERSION} \
        -n ${NAMESPACE}
    
    # ç­‰å¾…éƒ¨ç½²å®Œæˆ
    kubectl rollout status deployment/${APP_NAME} -n ${NAMESPACE} --timeout=5m
    
    log_info "Deployment completed successfully"
}

# éªŒè¯éƒ¨ç½²
verify_deployment() {
    log_info "Verifying deployment..."
    
    # æ£€æŸ¥ Pod çŠ¶æ€
    READY_PODS=$(kubectl get deployment/${APP_NAME} -n ${NAMESPACE} -o jsonpath='{.status.readyReplicas}')
    DESIRED_PODS=$(kubectl get deployment/${APP_NAME} -n ${NAMESPACE} -o jsonpath='{.spec.replicas}')
    
    if [ "$READY_PODS" -eq "$DESIRED_PODS" ]; then
        log_info "All pods are ready (${READY_PODS}/${DESIRED_PODS})"
    else
        log_error "Not all pods are ready (${READY_PODS}/${DESIRED_PODS})"
        exit 1
    fi
}

# ä¸»æµç¨‹
main() {
    log_info "Starting deployment process..."
    check_image
    deploy_app
    verify_deployment
    log_info "Deployment process completed!"
}

main "$@"
```

---

## 5. æ•…éšœç®¡ç†

### 5.1 æ•…éšœå¤„ç†æµç¨‹

#### 5.1.1 æ•…éšœå“åº”æµç¨‹å›¾

```
æ•…éšœå‘ç°
  â”œâ”€â”€ ç›‘æ§å‘Šè­¦
  â”œâ”€â”€ ç”¨æˆ·åé¦ˆ
  â””â”€â”€ ä¸»åŠ¨å·¡æ£€
    â†“
æ•…éšœç¡®è®¤
  â”œâ”€â”€ å½±å“èŒƒå›´è¯„ä¼°
  â”œâ”€â”€ ä¸¥é‡çº§åˆ«åˆ¤å®š
  â””â”€â”€ ç›¸å…³äººå‘˜é€šçŸ¥
    â†“
æ•…éšœå®šä½
  â”œâ”€â”€ æ—¥å¿—åˆ†æ
  â”œâ”€â”€ æŒ‡æ ‡åˆ†æ
  â””â”€â”€ é“¾è·¯è¿½è¸ª
    â†“
æ•…éšœä¿®å¤
  â”œâ”€â”€ ä¸´æ—¶æ–¹æ¡ˆ
  â”œâ”€â”€ æ ¹æœ¬ä¿®å¤
  â””â”€â”€ éªŒè¯æµ‹è¯•
    â†“
æ•…éšœå¤ç›˜
  â”œâ”€â”€ åŸå› åˆ†æ
  â”œâ”€â”€ æ”¹è¿›æªæ–½
  â””â”€â”€ çŸ¥è¯†æ²‰æ·€
```

### 5.2 æ•…éšœç­‰çº§

#### 5.2.1 æ•…éšœåˆ†çº§æ ‡å‡†

| ç­‰çº§ | åç§° | å“åº”æ—¶é—´ | å½±å“èŒƒå›´ | ç¤ºä¾‹ |
|------|------|----------|----------|------|
| P0 | ä¸¥é‡æ•…éšœ | 15åˆ†é’Ÿ | æ ¸å¿ƒæœåŠ¡å®Œå…¨ä¸å¯ç”¨ | æ•°æ®åº“å®•æœºã€æ”¯ä»˜æœåŠ¡ä¸å¯ç”¨ |
| P1 | é«˜çº§æ•…éšœ | 30åˆ†é’Ÿ | æ ¸å¿ƒåŠŸèƒ½å—å½±å“ | è®¢å•åˆ›å»ºå¤±è´¥ã€ç”¨æˆ·æ— æ³•ç™»å½• |
| P2 | ä¸­çº§æ•…éšœ | 1å°æ—¶ | éƒ¨åˆ†åŠŸèƒ½å—å½±å“ | æœç´¢åŠŸèƒ½å¼‚å¸¸ã€æ¨èæœåŠ¡ä¸å¯ç”¨ |
| P3 | ä½çº§æ•…éšœ | 4å°æ—¶ | éæ ¸å¿ƒåŠŸèƒ½å—å½±å“ | æŠ¥è¡¨ç”Ÿæˆå¤±è´¥ã€ç»Ÿè®¡å»¶è¿Ÿ |
| P4 | è½»å¾®æ•…éšœ | 24å°æ—¶ | å½±å“è¾ƒå° | é¡µé¢æ ·å¼å¼‚å¸¸ã€æ–‡æ¡ˆé”™è¯¯ |

### 5.3 æ•…éšœå¤„ç†è„šæœ¬

#### 5.3.1 è‡ªåŠ¨æ•…éšœæ¢å¤

```typescript
/**
 * @file æ•…éšœè‡ªåŠ¨æ¢å¤
 * @description è‡ªåŠ¨æ•…éšœæ£€æµ‹å’Œæ¢å¤
 * @module ops/auto-recovery
 * @author YYCÂ³
 * @version 1.0.0
 * @created 2025-01-30
 */

import { exec } from 'child_process';
import { promisify } from 'util';

const execAsync = promisify(exec);

/**
 * æ•…éšœç±»å‹
 */
enum FaultType {
  HighErrorRate = 'high_error_rate',
  HighLatency = 'high_latency',
  ServiceDown = 'service_down',
  DatabaseConnectionError = 'database_connection_error',
}

/**
 * æ¢å¤åŠ¨ä½œ
 */
interface RecoveryAction {
  type: 'restart_pod' | 'scale_up' | 'rollback' | 'switch_db';
  command: string;
  description: string;
}

/**
 * æ•…éšœæ¢å¤ç­–ç•¥
 */
const recoveryStrategies: Map<FaultType, RecoveryAction[]> = new Map([
  [FaultType.ServiceDown, [
    {
      type: 'restart_pod',
      command: 'kubectl delete pod -l app=yyc3-backend -n yyc3-production',
      description: 'é‡å¯æœåŠ¡ Pod',
    },
    {
      type: 'scale_up',
      command: 'kubectl scale deployment yyc3-backend --replicas=5 -n yyc3-production',
      description: 'æ‰©å®¹æœåŠ¡',
    },
  ]],
  [FaultType.HighErrorRate, [
    {
      type: 'rollback',
      command: 'kubectl rollout undo deployment/yyc3-backend -n yyc3-production',
      description: 'å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬',
    },
  ]],
  [FaultType.DatabaseConnectionError, [
    {
      type: 'switch_db',
      command: 'kubectl patch configmap db-config -p \'{"data":{"db_host":"db-backup"}}\' -n yyc3-production',
      description: 'åˆ‡æ¢åˆ°å¤‡ç”¨æ•°æ®åº“',
    },
  ]],
]);

/**
 * æ‰§è¡Œæ¢å¤åŠ¨ä½œ
 * @param action æ¢å¤åŠ¨ä½œ
 */
async function executeRecovery(action: RecoveryAction): Promise<void> {
  console.log(`Executing recovery action: ${action.description}`);
  console.log(`Command: ${action.command}`);

  try {
    const { stdout, stderr } = await execAsync(action.command);
    console.log(`Recovery action completed successfully`);
    console.log(`Output: ${stdout}`);
  } catch (error) {
    console.error(`Recovery action failed: ${error}`);
    throw error;
  }
}

/**
 * æ£€æµ‹æ•…éšœ
 * @param faultType æ•…éšœç±»å‹
 * @returns æ˜¯å¦æ£€æµ‹åˆ°æ•…éšœ
 */
async function detectFault(faultType: FaultType): Promise<boolean> {
  // è¿™é‡Œå®ç°å…·ä½“çš„æ•…éšœæ£€æµ‹é€»è¾‘
  // ä¾‹å¦‚ï¼šæ£€æŸ¥é”™è¯¯ç‡ã€å»¶è¿Ÿã€æœåŠ¡çŠ¶æ€ç­‰
  return false;
}

/**
 * è‡ªåŠ¨æ•…éšœæ¢å¤
 * @param faultType æ•…éšœç±»å‹
 */
export async function autoRecovery(faultType: FaultType): Promise<void> {
  console.log(`Starting auto recovery for: ${faultType}`);

  const strategies = recoveryStrategies.get(faultType);
  if (!strategies) {
    console.error(`No recovery strategy found for: ${faultType}`);
    return;
  }

  for (const action of strategies) {
    try {
      await executeRecovery(action);
      
      // ç­‰å¾…ä¸€æ®µæ—¶é—´éªŒè¯æ¢å¤æ•ˆæœ
      await new Promise(resolve => setTimeout(resolve, 30000));
      
      // æ£€æŸ¥æ•…éšœæ˜¯å¦å·²æ¢å¤
      if (!(await detectFault(faultType))) {
        console.log(`Fault recovered successfully`);
        return;
      }
    } catch (error) {
      console.error(`Recovery action failed: ${error}`);
      // ç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªæ¢å¤åŠ¨ä½œ
    }
  }

  console.error(`All recovery actions failed, manual intervention required`);
}
```

---

## 6. å˜æ›´ç®¡ç†

### 6.1 å˜æ›´æµç¨‹

#### 6.1.1 å˜æ›´ç®¡ç†æµç¨‹

```
å˜æ›´ç”³è¯·
  â”œâ”€â”€ å¡«å†™å˜æ›´ç”³è¯·å•
  â”œâ”€â”€ æè¿°å˜æ›´å†…å®¹
  â”œâ”€â”€ è¯„ä¼°å˜æ›´å½±å“
  â””â”€â”€ åˆ¶å®šå˜æ›´è®¡åˆ’
    â†“
å˜æ›´è¯„å®¡
  â”œâ”€â”€ æŠ€æœ¯è¯„å®¡
  â”œâ”€â”€ é£é™©è¯„ä¼°
  â”œâ”€â”€ èµ„æºè¯„ä¼°
  â””â”€â”€ æ‰¹å‡†å˜æ›´
    â†“
å˜æ›´å®æ–½
  â”œâ”€â”€ å‡†å¤‡å˜æ›´ç¯å¢ƒ
  â”œâ”€â”€ æ‰§è¡Œå˜æ›´æ“ä½œ
  â”œâ”€â”€ ç›‘æ§å˜æ›´è¿‡ç¨‹
  â””â”€â”€ éªŒè¯å˜æ›´ç»“æœ
    â†“
å˜æ›´éªŒè¯
  â”œâ”€â”€ åŠŸèƒ½éªŒè¯
  â”œâ”€â”€ æ€§èƒ½éªŒè¯
  â””â”€â”€ å®‰å…¨éªŒè¯
    â†“
å˜æ›´å…³é—­
  â”œâ”€â”€ æ›´æ–°æ–‡æ¡£
  â”œâ”€â”€ é€šçŸ¥ç›¸å…³äººå‘˜
  â””â”€â”€ å½’æ¡£å˜æ›´è®°å½•
```

### 6.2 å˜æ›´æ§åˆ¶

#### 6.2.1 å˜æ›´å®¡æ‰¹è§„åˆ™

| å˜æ›´ç±»å‹ | å®¡æ‰¹çº§åˆ« | å®¡æ‰¹äºº | å®¡æ‰¹æ—¶é—´ |
|----------|----------|--------|----------|
| ç´§æ€¥å˜æ›´ | P0 | æŠ€æœ¯æ€»ç›‘ | å³æ—¶ |
| æ ‡å‡†å˜æ›´ | P1 | æŠ€æœ¯ç»ç† | 1ä¸ªå·¥ä½œæ—¥ |
| å¸¸è§„å˜æ›´ | P2 | å›¢é˜Ÿè´Ÿè´£äºº | 2ä¸ªå·¥ä½œæ—¥ |
| è®¡åˆ’å˜æ›´ | P3 | æŠ€æœ¯ç»ç† | 3ä¸ªå·¥ä½œæ—¥ |

---

## 7. å®¹é‡ç®¡ç†

### 7.1 å®¹é‡è§„åˆ’

#### 7.1.1 å®¹é‡è¯„ä¼°æŒ‡æ ‡

```typescript
/**
 * @file å®¹é‡è§„åˆ’
 * @description ç³»ç»Ÿå®¹é‡è¯„ä¼°å’Œè§„åˆ’
 * @module ops/capacity-planning
 * @author YYCÂ³
 * @version 1.0.0
 * @created 2025-01-30
 */

/**
 * å®¹é‡æŒ‡æ ‡
 */
interface CapacityMetrics {
  // CPU ä½¿ç”¨ç‡
  cpuUsage: number;
  
  // å†…å­˜ä½¿ç”¨ç‡
  memoryUsage: number;
  
  // ç£ç›˜ä½¿ç”¨ç‡
  diskUsage: number;
  
  // ç½‘ç»œå¸¦å®½ä½¿ç”¨ç‡
  networkUsage: number;
  
  // è¯·æ±‚é‡
  requestRate: number;
  
  // å¹¶å‘è¿æ¥æ•°
  concurrentConnections: number;
  
  // å“åº”æ—¶é—´
  responseTime: number;
  
  // é”™è¯¯ç‡
  errorRate: number;
}

/**
 * å®¹é‡é˜ˆå€¼
 */
interface CapacityThresholds {
  // CPU è­¦å‘Šé˜ˆå€¼
  cpuWarning: number;
  // CPU ä¸¥é‡é˜ˆå€¼
  cpuCritical: number;
  
  // å†…å­˜è­¦å‘Šé˜ˆå€¼
  memoryWarning: number;
  // å†…å­˜ä¸¥é‡é˜ˆå€¼
  memoryCritical: number;
  
  // ç£ç›˜è­¦å‘Šé˜ˆå€¼
  diskWarning: number;
  // ç£ç›˜ä¸¥é‡é˜ˆå€¼
  diskCritical: number;
}

/**
 * å®¹é‡è¯„ä¼°ç»“æœ
 */
interface CapacityAssessment {
  // å½“å‰çŠ¶æ€
  currentStatus: 'healthy' | 'warning' | 'critical';
  
  // é¢„æµ‹çŠ¶æ€
  predictedStatus: 'healthy' | 'warning' | 'critical';
  
  // é¢„æµ‹æ—¶é—´
  predictedTime: Date;
  
  // æ‰©å®¹å»ºè®®
  scalingRecommendation: {
    // æ˜¯å¦éœ€è¦æ‰©å®¹
    needScaling: boolean;
    // æ‰©å®¹ç±»å‹
    scalingType: 'horizontal' | 'vertical';
    // æ‰©å®¹å¹…åº¦
    scalingFactor: number;
    // å»ºè®®é…ç½®
    recommendedConfig: any;
  };
}

/**
 * å®¹é‡è§„åˆ’å™¨
 */
export class CapacityPlanner {
  private thresholds: CapacityThresholds = {
    cpuWarning: 70,
    cpuCritical: 85,
    memoryWarning: 75,
    memoryCritical: 90,
    diskWarning: 80,
    diskCritical: 90,
  };

  /**
   * è¯„ä¼°å®¹é‡
   * @param metrics å®¹é‡æŒ‡æ ‡
   * @param history å†å²æ•°æ®
   * @returns è¯„ä¼°ç»“æœ
   */
  assessCapacity(
    metrics: CapacityMetrics,
    history: CapacityMetrics[]
  ): CapacityAssessment {
    // è¯„ä¼°å½“å‰çŠ¶æ€
    const currentStatus = this.assessCurrentStatus(metrics);
    
    // é¢„æµ‹æœªæ¥çŠ¶æ€
    const { predictedStatus, predictedTime } = this.predictFutureStatus(history);
    
    // ç”Ÿæˆæ‰©å®¹å»ºè®®
    const scalingRecommendation = this.generateScalingRecommendation(
      metrics,
      currentStatus,
      predictedStatus
    );

    return {
      currentStatus,
      predictedStatus,
      predictedTime,
      scalingRecommendation,
    };
  }

  /**
   * è¯„ä¼°å½“å‰çŠ¶æ€
   * @param metrics å®¹é‡æŒ‡æ ‡
   * @returns å½“å‰çŠ¶æ€
   */
  private assessCurrentStatus(metrics: CapacityMetrics): 'healthy' | 'warning' | 'critical' {
    if (
      metrics.cpuUsage >= this.thresholds.cpuCritical ||
      metrics.memoryUsage >= this.thresholds.memoryCritical ||
      metrics.diskUsage >= this.thresholds.diskCritical
    ) {
      return 'critical';
    }

    if (
      metrics.cpuUsage >= this.thresholds.cpuWarning ||
      metrics.memoryUsage >= this.thresholds.memoryWarning ||
      metrics.diskUsage >= this.thresholds.diskWarning
    ) {
      return 'warning';
    }

    return 'healthy';
  }

  /**
   * é¢„æµ‹æœªæ¥çŠ¶æ€
   * @param history å†å²æ•°æ®
   * @returns é¢„æµ‹çŠ¶æ€å’Œæ—¶é—´
   */
  private predictFutureStatus(
    history: CapacityMetrics[]
  ): { predictedStatus: 'healthy' | 'warning' | 'critical'; predictedTime: Date } {
    // è¿™é‡Œå®ç°é¢„æµ‹é€»è¾‘
    // å¯ä»¥ä½¿ç”¨çº¿æ€§å›å½’ã€æ—¶é—´åºåˆ—åˆ†æç­‰æ–¹æ³•
    return {
      predictedStatus: 'healthy',
      predictedTime: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),
    };
  }

  /**
   * ç”Ÿæˆæ‰©å®¹å»ºè®®
   * @param metrics å®¹é‡æŒ‡æ ‡
   * @param currentStatus å½“å‰çŠ¶æ€
   * @param predictedStatus é¢„æµ‹çŠ¶æ€
   * @returns æ‰©å®¹å»ºè®®
   */
  private generateScalingRecommendation(
    metrics: CapacityMetrics,
    currentStatus: 'healthy' | 'warning' | 'critical',
    predictedStatus: 'healthy' | 'warning' | 'critical'
  ): CapacityAssessment['scalingRecommendation'] {
    if (currentStatus === 'critical' || predictedStatus === 'critical') {
      return {
        needScaling: true,
        scalingType: 'horizontal',
        scalingFactor: 2,
        recommendedConfig: {
          replicas: 6,
          resources: {
            requests: {
              cpu: '500m',
              memory: '512Mi',
            },
            limits: {
              cpu: '1000m',
              memory: '1Gi',
            },
          },
        },
      };
    }

    if (currentStatus === 'warning' || predictedStatus === 'warning') {
      return {
        needScaling: true,
        scalingType: 'horizontal',
        scalingFactor: 1.5,
        recommendedConfig: {
          replicas: 4,
          resources: {
            requests: {
              cpu: '300m',
              memory: '384Mi',
            },
            limits: {
              cpu: '600m',
              memory: '768Mi',
            },
          },
        },
      };
    }

    return {
      needScaling: false,
      scalingType: 'horizontal',
      scalingFactor: 1,
      recommendedConfig: null,
    };
  }
}
```

---

## 8. è¿ç»´æœ€ä½³å®è·µ

### 8.1 è¿ç»´æ£€æŸ¥æ¸…å•

#### 8.1.1 æ—¥å¸¸è¿ç»´æ£€æŸ¥

```markdown
## æ—¥å¸¸è¿ç»´æ£€æŸ¥æ¸…å•

### æ¯æ—¥æ£€æŸ¥
- [ ] æ£€æŸ¥ç³»ç»Ÿå‘Šè­¦
- [ ] æ£€æŸ¥åº”ç”¨æ—¥å¿—
- [ ] æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨
- [ ] æ£€æŸ¥å¤‡ä»½çŠ¶æ€
- [ ] æ£€æŸ¥å®‰å…¨æ—¥å¿—

### æ¯å‘¨æ£€æŸ¥
- [ ] æ£€æŸ¥ç³»ç»Ÿæ€§èƒ½è¶‹åŠ¿
- [ ] æ£€æŸ¥å®¹é‡ä½¿ç”¨æƒ…å†µ
- [ ] æ£€æŸ¥å®‰å…¨æ¼æ´
- [ ] æ£€æŸ¥ä¾èµ–æ›´æ–°
- [ ] æ£€æŸ¥æ–‡æ¡£æ›´æ–°

### æ¯æœˆæ£€æŸ¥
- [ ] æ£€æŸ¥ SLA è¾¾æˆæƒ…å†µ
- [ ] æ£€æŸ¥æˆæœ¬ä½¿ç”¨æƒ…å†µ
- [ ] æ£€æŸ¥ç¾å¤‡æ¼”ç»ƒ
- [ ] æ£€æŸ¥ä¼˜åŒ–å»ºè®®
- [ ] æ£€æŸ¥å›¢é˜ŸåŸ¹è®­
```

### 8.2 è¿ç»´æ–‡æ¡£

#### 8.2.1 è¿ç»´æ‰‹å†Œæ¨¡æ¿

```markdown
# YYCÂ³ è¿ç»´æ‰‹å†Œ

## 1. ç³»ç»Ÿæ¦‚è¿°

### 1.1 ç³»ç»Ÿæ¶æ„
### 1.2 æŠ€æœ¯æ ˆ
### 1.3 éƒ¨ç½²ç¯å¢ƒ

## 2. éƒ¨ç½²æŒ‡å—

### 2.1 ç¯å¢ƒå‡†å¤‡
### 2.2 åº”ç”¨éƒ¨ç½²
### 2.3 é…ç½®ç®¡ç†

## 3. ç›‘æ§å‘Šè­¦

### 3.1 ç›‘æ§æŒ‡æ ‡
### 3.2 å‘Šè­¦è§„åˆ™
### 3.3 å‘Šè­¦å¤„ç†

## 4. æ•…éšœå¤„ç†

### 4.1 å¸¸è§æ•…éšœ
### 4.2 æ•…éšœæ’æŸ¥
### 4.3 æ•…éšœæ¢å¤

## 5. æ—¥å¸¸è¿ç»´

### 5.1 å·¡æ£€æµç¨‹
### 5.2 å¤‡ä»½æ¢å¤
### 5.3 æ€§èƒ½ä¼˜åŒ–

## 6. å®‰å…¨ç®¡ç†

### 6.1 è®¿é—®æ§åˆ¶
### 6.2 å®‰å…¨åŠ å›º
### 6.3 å®‰å…¨å®¡è®¡

## 7. å˜æ›´ç®¡ç†

### 7.1 å˜æ›´æµç¨‹
### 7.2 å˜æ›´å®¡æ‰¹
### 7.3 å˜æ›´è®°å½•

## 8. åº”æ€¥å“åº”

### 8.1 åº”æ€¥é¢„æ¡ˆ
### 8.2 åº”æ€¥è”ç³»äºº
### 8.3 åº”æ€¥æ¼”ç»ƒ
```

---

## ğŸ“„ æ–‡æ¡£æ ‡å°¾ (Footer)

> ã€Œ***YanYuCloudCube***ã€
> ã€Œ***<admin@0379.email>***ã€
> ã€Œ***Words Initiate Quadrants, Language Serves as Core for the Future***ã€
> ã€Œ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***ã€




## æ¦‚è¿°

### æ¶æ„æ¦‚è¿°

æœ¬æ¶æ„æ–‡æ¡£è¯¦ç»†æè¿°äº†ç³»ç»Ÿçš„æ•´ä½“æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬æ¶æ„ç›®æ ‡ã€è®¾è®¡åŸåˆ™ã€æŠ€æœ¯é€‰å‹ç­‰å…³é”®ä¿¡æ¯ã€‚

#### æ¶æ„ç›®æ ‡

- **é«˜å¯ç”¨æ€§**ï¼šç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œï¼Œæ•…éšœè‡ªåŠ¨æ¢å¤
- **é«˜æ€§èƒ½**ï¼šå“åº”è¿…é€Ÿï¼Œèµ„æºåˆ©ç”¨é«˜æ•ˆ
- **é«˜å®‰å…¨æ€§**ï¼šæ•°æ®åŠ å¯†ï¼Œæƒé™ä¸¥æ ¼æ§åˆ¶
- **é«˜æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºåŠŸèƒ½æ‰©å±•
- **é«˜å¯ç»´æŠ¤æ€§**ï¼šä»£ç æ¸…æ™°ï¼Œæ–‡æ¡£å®Œå–„

#### è®¾è®¡åŸåˆ™

- **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
- **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- **ä¾èµ–å€’ç½®**ï¼šä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°
- **æ¥å£éš”ç¦»**ï¼šä½¿ç”¨ç»†ç²’åº¦çš„æ¥å£
- **è¿ªç±³ç‰¹æ³•åˆ™**ï¼šæœ€å°‘çŸ¥è¯†åŸåˆ™



## æ¶æ„è®¾è®¡

### æ¶æ„è®¾è®¡

#### æ•´ä½“æ¶æ„

ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬ï¼š

- **è¡¨ç°å±‚**ï¼šè´Ÿè´£ç”¨æˆ·ç•Œé¢å’Œäº¤äº’
- **åº”ç”¨å±‚**ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘
- **ä¸šåŠ¡å±‚**ï¼šå®ç°æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½
- **æ•°æ®å±‚**ï¼šç®¡ç†æ•°æ®å­˜å‚¨å’Œè®¿é—®
- **åŸºç¡€è®¾æ–½å±‚**ï¼šæä¾›åŸºç¡€æœåŠ¡æ”¯æŒ

#### æ¨¡å—åˆ’åˆ†

ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ç‰¹å®šåŠŸèƒ½ï¼š

- **ç”¨æˆ·æ¨¡å—**ï¼šç”¨æˆ·ç®¡ç†å’Œè®¤è¯
- **è®¢å•æ¨¡å—**ï¼šè®¢å•å¤„ç†å’Œç®¡ç†
- **æ”¯ä»˜æ¨¡å—**ï¼šæ”¯ä»˜é›†æˆå’Œå¤„ç†
- **é€šçŸ¥æ¨¡å—**ï¼šæ¶ˆæ¯é€šçŸ¥å’Œæ¨é€
- **æŠ¥è¡¨æ¨¡å—**ï¼šæ•°æ®ç»Ÿè®¡å’Œåˆ†æ

#### æŠ€æœ¯é€‰å‹

- **å‰ç«¯æ¡†æ¶**ï¼šReact / Vue
- **åç«¯æ¡†æ¶**ï¼šNode.js / Express / Fastify
- **æ•°æ®åº“**ï¼šPostgreSQL / MongoDB
- **ç¼“å­˜**ï¼šRedis
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šRabbitMQ / Kafka



## æŠ€æœ¯å®ç°

### æŠ€æœ¯å®ç°

#### æ ¸å¿ƒæŠ€æœ¯æ ˆ

```typescript
// æ ¸å¿ƒä¾èµ–
{
  "dependencies": {
    "react": "^18.0.0",
    "typescript": "^5.0.0",
    "express": "^4.18.0",
    "prisma": "^5.0.0",
    "redis": "^4.6.0"
  }
}
```

#### å…³é”®å®ç°

1. **æœåŠ¡å±‚å®ç°**
```typescript
class UserService {
  async createUser(data: CreateUserDto): Promise<User> {
    // éªŒè¯è¾“å…¥
    this.validateUserData(data);
    
    // åŠ å¯†å¯†ç 
    const hashedPassword = await this.hashPassword(data.password);
    
    // åˆ›å»ºç”¨æˆ·
    const user = await this.userRepository.create({
      ...data,
      password: hashedPassword
    });
    
    return user;
  }
}
```

2. **ä¸­é—´ä»¶å®ç°**
```typescript
const authMiddleware = async (req: Request, res: Response, next: NextFunction) => {
  const token = req.headers.authorization?.split(' ')[1];
  
  if (!token) {
    return res.status(401).json({ error: 'æœªæˆæƒè®¿é—®' });
  }
  
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.user = decoded;
    next();
  } catch (error) {
    return res.status(401).json({ error: 'ä»¤ç‰Œæ— æ•ˆ' });
  }
};
```



## éƒ¨ç½²æ–¹æ¡ˆ

### éƒ¨ç½²æ–¹æ¡ˆ

#### éƒ¨ç½²æ¶æ„

é‡‡ç”¨å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆï¼Œä½¿ç”¨Dockerå’ŒKubernetesè¿›è¡Œç¼–æ’ã€‚

#### éƒ¨ç½²æ­¥éª¤

1. **ç¯å¢ƒå‡†å¤‡**
```bash
# å®‰è£…Docker
curl -fsSL https://get.docker.com | sh

# å®‰è£…Kubernetes
# æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©ç›¸åº”çš„å®‰è£…æ–¹å¼
```

2. **æ„å»ºé•œåƒ**
```bash
# æ„å»ºåº”ç”¨é•œåƒ
docker build -t yyc3-app:latest .

# æ¨é€åˆ°é•œåƒä»“åº“
docker push registry.example.com/yyc3-app:latest
```

3. **éƒ¨ç½²åˆ°Kubernetes**
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: yyc3-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: yyc3-app
  template:
    metadata:
      labels:
        app: yyc3-app
    spec:
      containers:
      - name: app
        image: registry.example.com/yyc3-app:latest
        ports:
        - containerPort: 3000
        env:
        - name: NODE_ENV
          value: "production"
```

4. **é…ç½®æœåŠ¡**
```yaml
apiVersion: v1
kind: Service
metadata:
  name: yyc3-app-service
spec:
  selector:
    app: yyc3-app
  ports:
  - protocol: TCP
    port: 80
    targetPort: 3000
  type: LoadBalancer
```



## æ€§èƒ½ä¼˜åŒ–

### æ€§èƒ½ä¼˜åŒ–

#### å‰ç«¯ä¼˜åŒ–

1. **ä»£ç åˆ†å‰²**
```typescript
// è·¯ç”±çº§åˆ«ä»£ç åˆ†å‰²
const Home = lazy(() => import('./pages/Home'));
const About = lazy(() => import('./pages/About'));

function App() {
  return (
    <Suspense fallback={<Loading />}>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
      </Routes>
    </Suspense>
  );
}
```

2. **ç¼“å­˜ç­–ç•¥**
```typescript
// React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
const MemoizedComponent = React.memo(({ data }) => {
  return <div>{data.value}</div>;
});

// useMemo ç¼“å­˜è®¡ç®—ç»“æœ
const expensiveValue = useMemo(() => {
  return computeExpensiveValue(data);
}, [data]);
```

#### åç«¯ä¼˜åŒ–

1. **æ•°æ®åº“ä¼˜åŒ–**
```typescript
// ä½¿ç”¨ç´¢å¼•
CREATE INDEX idx_user_email ON users(email);

// æŸ¥è¯¢ä¼˜åŒ–
const users = await prisma.user.findMany({
  select: {
    id: true,
    name: true,
    email: true
  },
  where: {
    active: true
  },
  take: 100
});
```

2. **ç¼“å­˜ç­–ç•¥**
```typescript
// Redisç¼“å­˜
async function getUser(id: string): Promise<User> {
  const cacheKey = `user:${id}`;
  
  // å°è¯•ä»ç¼“å­˜è·å–
  const cached = await redis.get(cacheKey);
  if (cached) {
    return JSON.parse(cached);
  }
  
  // ä»æ•°æ®åº“è·å–
  const user = await prisma.user.findUnique({ where: { id } });
  
  // å†™å…¥ç¼“å­˜
  await redis.setex(cacheKey, 3600, JSON.stringify(user));
  
  return user;
}
```



## å®‰å…¨è€ƒè™‘

### å®‰å…¨è€ƒè™‘

#### è®¤è¯ä¸æˆæƒ

1. **JWTè®¤è¯**
```typescript
// ç”ŸæˆJWTä»¤ç‰Œ
const token = jwt.sign(
  { userId: user.id, role: user.role },
  process.env.JWT_SECRET,
  { expiresIn: '24h' }
);

// éªŒè¯JWTä»¤ç‰Œ
const decoded = jwt.verify(token, process.env.JWT_SECRET);
```

2. **RBACæˆæƒ**
```typescript
// è§’è‰²æƒé™æ£€æŸ¥
function checkPermission(user: User, resource: string, action: string): boolean {
  const permissions = rolePermissions[user.role];
  return permissions.some(p => 
    p.resource === resource && p.actions.includes(action)
  );
}
```

#### æ•°æ®ä¿æŠ¤

1. **è¾“å…¥éªŒè¯**
```typescript
// ä½¿ç”¨Zodè¿›è¡Œè¾“å…¥éªŒè¯
const createUserSchema = z.object({
  email: z.string().email(),
  password: z.string().min(8).regex(/[A-Z]/),
  name: z.string().min(2)
});

const validated = createUserSchema.parse(input);
```

2. **æ•°æ®åŠ å¯†**
```typescript
// ä½¿ç”¨bcryptåŠ å¯†å¯†ç 
const hashedPassword = await bcrypt.hash(password, 10);

// éªŒè¯å¯†ç 
const isValid = await bcrypt.compare(password, hashedPassword);
```

#### å®‰å…¨å¤´é…ç½®

```typescript
// Expresså®‰å…¨å¤´é…ç½®
app.use(helmet());
app.use(cors({
  origin: process.env.ALLOWED_ORIGINS?.split(','),
  credentials: true
}));
```



## ç›‘æ§å‘Šè­¦

### ç›‘æ§å‘Šè­¦

#### ç›‘æ§æŒ‡æ ‡

1. **ç³»ç»ŸæŒ‡æ ‡**
- CPUä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- ç£ç›˜ä½¿ç”¨ç‡
- ç½‘ç»œI/O

2. **åº”ç”¨æŒ‡æ ‡**
- è¯·æ±‚é‡(RPS)
- å“åº”æ—¶é—´
- é”™è¯¯ç‡
- å¹¶å‘ç”¨æˆ·æ•°

3. **ä¸šåŠ¡æŒ‡æ ‡**
- ç”¨æˆ·æ³¨å†Œæ•°
- è®¢å•åˆ›å»ºæ•°
- æ”¯ä»˜æˆåŠŸç‡
- ç”¨æˆ·æ´»è·ƒåº¦

#### ç›‘æ§å·¥å…·

```typescript
// PrometheusæŒ‡æ ‡æ”¶é›†
import { Counter, Histogram, Gauge } from 'prom-client';

const requestCounter = new Counter({
  name: 'http_requests_total',
  help: 'Total number of HTTP requests',
  labelNames: ['method', 'route', 'status']
});

const responseTime = new Histogram({
  name: 'http_request_duration_seconds',
  help: 'HTTP request duration in seconds',
  labelNames: ['method', 'route']
});

// ä½¿ç”¨ä¸­é—´ä»¶è®°å½•æŒ‡æ ‡
app.use((req, res, next) => {
  const start = Date.now();
  
  res.on('finish', () => {
    const duration = (Date.now() - start) / 1000;
    requestCounter.inc({
      method: req.method,
      route: req.route?.path || req.path,
      status: res.statusCode
    });
    responseTime.observe({
      method: req.method,
      route: req.route?.path || req.path
    }, duration);
  });
  
  next();
});
```

#### å‘Šè­¦è§„åˆ™

```yaml
groups:
- name: api_alerts
  rules:
  - alert: HighErrorRate
    expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "APIé”™è¯¯ç‡è¿‡é«˜"
      description: "5åˆ†é’Ÿå†…é”™è¯¯ç‡è¶…è¿‡5%"
  
  - alert: HighResponseTime
    expr: histogram_quantile(0.95, http_request_duration_seconds) > 1
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "APIå“åº”æ—¶é—´è¿‡é•¿"
      description: "95%åˆ†ä½å“åº”æ—¶é—´è¶…è¿‡1ç§’"
```



## æœ€ä½³å®è·µ

### æœ€ä½³å®è·µ

#### ä»£ç è§„èŒƒ

1. **å‘½åè§„èŒƒ**
```typescript
// å˜é‡ï¼šcamelCase
const userName = 'John';

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;

// ç±»ï¼šPascalCase
class UserService { }

// æ¥å£ï¼šPascalCaseï¼Œå‰ç¼€Iï¼ˆå¯é€‰ï¼‰
interface IUserService { }
```

2. **æ³¨é‡Šè§„èŒƒ**
```typescript
/**
 * åˆ›å»ºç”¨æˆ·
 * @param email - ç”¨æˆ·é‚®ç®±
 * @param password - ç”¨æˆ·å¯†ç 
 * @returns åˆ›å»ºçš„ç”¨æˆ·å¯¹è±¡
 * @throws {Error} å½“é‚®ç®±å·²å­˜åœ¨æ—¶æŠ›å‡ºé”™è¯¯
 */
async function createUser(
  email: string, 
  password: string
): Promise<User> {
  // å®ç°
}
```

#### é”™è¯¯å¤„ç†

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
class AppError extends Error {
  constructor(
    public statusCode: number,
    public message: string,
    public isOperational = true
  ) {
    super(message);
    this.name = this.constructor.name;
    Error.captureStackTrace(this, this.constructor);
  }
}

// ä½¿ç”¨é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((err: Error, req: Request, res: Response, next: NextFunction) => {
  if (err instanceof AppError) {
    return res.status(err.statusCode).json({
      success: false,
      error: err.message
    });
  }
  
  // è®°å½•æœªé¢„æœŸçš„é”™è¯¯
  logger.error('Unexpected error:', err);
  
  return res.status(500).json({
    success: false,
    error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
  });
});
```

#### æ—¥å¿—è®°å½•

```typescript
// ç»“æ„åŒ–æ—¥å¿—
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

// ä½¿ç”¨æ—¥å¿—
logger.info('User created', { userId: user.id, email: user.email });
logger.error('Database connection failed', { error: error.message });
```


## ç›¸å…³æ–‡æ¡£

- [ğŸ”– YYCÂ³ ç¾å¤‡æ¶æ„è¿ç»´æ–‡æ¡£](YYC3-Cater-è¿ç»´è¿è¥/æ¶æ„ç±»/03-YYC3-Cater--æ¶æ„ç±»-ç¾å¤‡æ¶æ„è¿ç»´æ–‡æ¡£.md) - YYC3-Cater-è¿ç»´è¿è¥/æ¶æ„ç±»
- [ğŸ”– YYCÂ³ ç³»ç»Ÿæ‰©å®¹æ¶æ„æ–‡æ¡£](YYC3-Cater-è¿ç»´è¿è¥/æ¶æ„ç±»/04-YYC3-Cater--æ¶æ„ç±»-ç³»ç»Ÿæ‰©å®¹æ¶æ„æ–‡æ¡£.md) - YYC3-Cater-è¿ç»´è¿è¥/æ¶æ„ç±»
- [YYCÂ³é¤é¥®å¹³å° - èŠ‚ç‚¹æ§åˆ¶æ¨è¿›è·¯çº¿å›¾](YYC3-Cater-è¿ç»´è¿è¥/æ¶æ„ç±»/06-YYC3-Cater--æ¶æ„ç±»-èŠ‚ç‚¹æ§åˆ¶æ¨è¿›è·¯çº¿å›¾.md) - YYC3-Cater-è¿ç»´è¿è¥/æ¶æ„ç±»
- [YYCÂ³èŠ‚ç‚¹æ‰§è¡Œæ€»ç»“æŠ¥å‘Š](YYC3-Cater-è¿ç»´è¿è¥/æ¶æ„ç±»/07-YYC3-Cater--æ¶æ„ç±»-èŠ‚ç‚¹æ‰§è¡Œæ€»ç»“.md) - YYC3-Cater-è¿ç»´è¿è¥/æ¶æ„ç±»
- [YYCÂ³èŠ‚ç‚¹æ‰§è¡Œè®¡åˆ’](YYC3-Cater-è¿ç»´è¿è¥/æ¶æ„ç±»/05-YYC3-Cater--æ¶æ„ç±»-èŠ‚ç‚¹æ‰§è¡Œè®¡åˆ’.md) - YYC3-Cater-è¿ç»´è¿è¥/æ¶æ„ç±»
