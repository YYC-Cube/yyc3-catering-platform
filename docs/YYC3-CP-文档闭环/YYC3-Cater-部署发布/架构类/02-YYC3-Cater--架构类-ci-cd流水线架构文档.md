---

**@file**ï¼šYYCÂ³-CI_CDæµæ°´çº¿æ¶æ„æ–‡æ¡£
**@description**ï¼šYYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°çš„CI_CDæµæ°´çº¿æ¶æ„æ–‡æ¡£
**@author**ï¼šYYCÂ³
**@version**ï¼šv1.0.0
**@created**ï¼š2025-01-30
**@updated**ï¼š2025-01-30
**@status**ï¼špublished
**@tags**ï¼šYYCÂ³,æ–‡æ¡£

---
# ğŸ”– YYCÂ³ CI/CD æµæ°´çº¿æ¶æ„æ–‡æ¡£

> ***YanYuCloudCube***
> **æ ‡è¯­**ï¼šè¨€å¯è±¡é™ | è¯­æ¢æœªæ¥
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **æ ‡è¯­**ï¼šä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| å±æ€§ | å†…å®¹ |
|------|------|
| **æ–‡æ¡£æ ‡é¢˜** | YYCÂ³ CI/CD æµæ°´çº¿æ¶æ„æ–‡æ¡£ |
| **æ–‡æ¡£ç±»å‹** | æ¶æ„ç±»æ–‡æ¡£ |
| **æ‰€å±é˜¶æ®µ** | éƒ¨ç½²å‘å¸ƒ |
| **éµå¾ªè§„èŒƒ** | YYCÂ³ å›¢é˜Ÿæ ‡å‡†åŒ–è§„èŒƒ v1.0.0 |
| **ç‰ˆæœ¬å·** | v1.0.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2025-01-30 |
| **ä½œè€…** | YYCÂ³ Team |
| **æ›´æ–°æ—¥æœŸ** | 2025-01-30 |

---

## ğŸ“‘ ç›®å½•

1. [CI/CD æ¶æ„æ¦‚è¿°](#1-cicd-æ¶æ„æ¦‚è¿°)
2. [ä»£ç è´¨é‡ç®¡ç†](#2-ä»£ç è´¨é‡ç®¡ç†)
3. [è‡ªåŠ¨åŒ–æµ‹è¯•](#3-è‡ªåŠ¨åŒ–æµ‹è¯•)
4. [æ„å»ºä¸æ‰“åŒ…](#4-æ„å»ºä¸æ‰“åŒ…)
5. [é•œåƒç®¡ç†](#5-é•œåƒç®¡ç†)
6. [éƒ¨ç½²æµç¨‹](#6-éƒ¨ç½²æµç¨‹)
7. [ç¯å¢ƒç®¡ç†](#7-ç¯å¢ƒç®¡ç†)
8. [ç›‘æ§ä¸å‘Šè­¦](#8-ç›‘æ§ä¸å‘Šè­¦)
9. [å›æ»šæœºåˆ¶](#9-å›æ»šæœºåˆ¶)
10. [æœ€ä½³å®è·µ](#10-æœ€ä½³å®è·µ)

---

## 1. æ¦‚è¿°

### 1.1 è¯´æ˜

æœ¬æ–‡æ¡£æ˜¯YYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°æ–‡æ¡£ä½“ç³»çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ—¨åœ¨æä¾›æ¸…æ™°ã€å®Œæ•´ã€å‡†ç¡®çš„ä¿¡æ¯ã€‚

é€šè¿‡æœ¬æ–‡æ¡£ï¼Œè¯»è€…å¯ä»¥ï¼š
- äº†è§£ç›¸å…³æ¦‚å¿µå’ŒèƒŒæ™¯
- æŒæ¡æ ¸å¿ƒå†…å®¹å’Œè¦ç‚¹
- è·å¾—å®ç”¨çš„æŒ‡å¯¼å’Œå¸®åŠ©
- å‚è€ƒç›¸å…³çš„èµ„æºå’Œèµ„æ–™

æ–‡æ¡£éµå¾ªYYCÂ³å›¢é˜Ÿæ ‡å‡†åŒ–è§„èŒƒï¼Œç¡®ä¿å†…å®¹è´¨é‡å’Œä¸€è‡´æ€§ã€‚

### 1.2 ç›®æ ‡

æœ¬æ–‡æ¡£çš„ä¸»è¦ç›®æ ‡åŒ…æ‹¬ï¼š

- **ä¿¡æ¯ä¼ é€’**ï¼šå‡†ç¡®ä¼ é€’ç›¸å…³ä¿¡æ¯å’ŒçŸ¥è¯†
- **æŒ‡å¯¼å®è·µ**ï¼šæä¾›å®ç”¨çš„æŒ‡å¯¼å’Œå‚è€ƒ
- **é™ä½æˆæœ¬**ï¼šå‡å°‘æ²Ÿé€šæˆæœ¬å’Œå­¦ä¹ æˆæœ¬
- **æé«˜æ•ˆç‡**ï¼šå¸®åŠ©è¯»è€…å¿«é€Ÿç†è§£å’Œåº”ç”¨

é€šè¿‡å®ç°è¿™äº›ç›®æ ‡ï¼Œæ–‡æ¡£èƒ½å¤Ÿä¸ºé¡¹ç›®çš„æˆåŠŸåšå‡ºé‡è¦è´¡çŒ®ã€‚

### 1.3 èŒƒå›´

æœ¬æ–‡æ¡£çš„é€‚ç”¨èŒƒå›´ï¼š

- **é€‚ç”¨å¯¹è±¡**ï¼šå¼€å‘äººå‘˜ã€æµ‹è¯•äººå‘˜ã€è¿ç»´äººå‘˜ã€äº§å“ç»ç†ç­‰
- **é€‚ç”¨é˜¶æ®µ**ï¼šå¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ã€è¿ç»´ç­‰å„ä¸ªé˜¶æ®µ
- **é€‚ç”¨åœºæ™¯**ï¼šæ—¥å¸¸å¼€å‘ã€é—®é¢˜æ’æŸ¥ã€ç³»ç»Ÿç»´æŠ¤ç­‰

è¶…å‡ºæœ¬æ–‡æ¡£èŒƒå›´çš„å†…å®¹ï¼Œè¯·å‚è€ƒå…¶ä»–ç›¸å…³æ–‡æ¡£ã€‚

## 2. è¯¦ç»†å†…å®¹

### 2.1 æ ¸å¿ƒå†…å®¹

### 2.2 å®ç°ç»†èŠ‚

### 2.3 æ³¨æ„äº‹é¡¹

## 3. å‚è€ƒä¿¡æ¯

### 3.1 ç›¸å…³æ–‡æ¡£

### 3.2 å‚è€ƒèµ„æ–™

### 3.3 é™„å½•

## 1. CI/CD æ¶æ„æ¦‚è¿°

### 1.1 æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å¼€å‘è€…æäº¤                        â”‚
â”‚      - Git Push                          â”‚
â”‚      - Pull Request                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CI æµæ°´çº¿                         â”‚
â”‚      - ä»£ç æ£€æŸ¥ (Lint)                   â”‚
â”‚      - å•å…ƒæµ‹è¯•                           â”‚
â”‚      - é›†æˆæµ‹è¯•                           â”‚
â”‚      - æ„å»ºé•œåƒ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CD æµæ°´çº¿                         â”‚
â”‚      - é•œåƒæ¨é€                           â”‚
â”‚      - éƒ¨ç½²åˆ° Staging                     â”‚
â”‚      - E2E æµ‹è¯•                          â”‚
â”‚      - éƒ¨ç½²åˆ° Production                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ç›‘æ§ä¸å‘Šè­¦                        â”‚
â”‚      - éƒ¨ç½²çŠ¶æ€                           â”‚
â”‚      - åº”ç”¨å¥åº·æ£€æŸ¥                        â”‚
â”‚      - é”™è¯¯å‘Šè­¦                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|---------|------|
| CI/CD å¹³å° | GitHub Actions | æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½² |
| ä»£ç æ£€æŸ¥ | ESLint, Prettier | ä»£ç é£æ ¼å’Œè´¨é‡æ£€æŸ¥ |
| æµ‹è¯•æ¡†æ¶ | Jest, Vitest | å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯• |
| E2E æµ‹è¯• | Playwright | ç«¯åˆ°ç«¯æµ‹è¯• |
| å®¹å™¨åŒ– | Docker | åº”ç”¨å®¹å™¨åŒ– |
| é•œåƒä»“åº“ | GitHub Container Registry | Docker é•œåƒå­˜å‚¨ |
| éƒ¨ç½²å·¥å…· | kubectl, Helm | Kubernetes éƒ¨ç½² |
| ç›‘æ§ | Prometheus, Grafana | åº”ç”¨ç›‘æ§å’Œå‘Šè­¦ |

### 1.3 æµæ°´çº¿é˜¶æ®µ

```yaml
stages:
  - lint:          # ä»£ç æ£€æŸ¥
  - test:          # æµ‹è¯•
  - build:         # æ„å»º
  - security:      # å®‰å…¨æ‰«æ
  - deploy-staging: # éƒ¨ç½²åˆ°é¢„å‘å¸ƒç¯å¢ƒ
  - e2e:           # E2E æµ‹è¯•
  - deploy-prod:   # éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
  - notify:        # é€šçŸ¥
```

---

## 2. ä»£ç è´¨é‡ç®¡ç†

### 2.1 ESLint é…ç½®

```javascript
// .eslintrc.js
module.exports = {
  root: true,
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  extends: [
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:react/recommended',
    'plugin:react-hooks/recommended',
    'plugin:prettier/recommended',
    'next/core-web-vitals',
  ],
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaFeatures: {
      jsx: true,
    },
    ecmaVersion: 'latest',
    sourceType: 'module',
  },
  plugins: [
    '@typescript-eslint',
    'react',
    'react-hooks',
    'prettier',
  ],
  rules: {
    'prettier/prettier': 'error',
    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    '@typescript-eslint/no-explicit-any': 'warn',
    'react/react-in-jsx-scope': 'off',
    'react/prop-types': 'off',
    'react-hooks/rules-of-hooks': 'error',
    'react-hooks/exhaustive-deps': 'warn',
  },
  settings: {
    react: {
      version: 'detect',
    },
  },
};
```

### 2.2 Prettier é…ç½®

```javascript
// .prettierrc.js
module.exports = {
  semi: true,
  trailingComma: 'es5',
  singleQuote: true,
  printWidth: 100,
  tabWidth: 2,
  useTabs: false,
  arrowParens: 'always',
  endOfLine: 'lf',
  bracketSpacing: true,
  jsxSingleQuote: false,
  jsxBracketSameLine: false,
};
```

### 2.3 ä»£ç æ£€æŸ¥å·¥ä½œæµ

```yaml
# .github/workflows/lint.yml
name: Lint

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'pnpm'

      - name: Install pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Run ESLint
        run: pnpm lint

      - name: Run Prettier check
        run: pnpm format:check

      - name: Run TypeScript check
        run: pnpm type-check
```

---

## 3. è‡ªåŠ¨åŒ–æµ‹è¯•

### 3.1 å•å…ƒæµ‹è¯•é…ç½®

```typescript
// vitest.config.ts
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: ['./src/test/setup.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'node_modules/',
        'src/test/',
        '**/*.d.ts',
        '**/*.config.*',
        '**/mockData',
      ],
    },
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
});
```

### 3.2 é›†æˆæµ‹è¯•é…ç½®

```typescript
// src/test/setup.ts
import { expect, afterEach } from 'vitest';
import { cleanup } from '@testing-library/react';
import '@testing-library/jest-dom';

// æ¸…ç† DOM
afterEach(() => {
  cleanup();
});

// æ‰©å±• expect åŒ¹é…å™¨
expect.extend({});
```

### 3.3 æµ‹è¯•å·¥ä½œæµ

```yaml
# .github/workflows/test.yml
name: Test

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [18.x]
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}
          cache: 'pnpm'

      - name: Install pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Run unit tests
        run: pnpm test:unit --coverage

      - name: Run integration tests
        run: pnpm test:integration

      - name: Upload coverage reports
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage/coverage-final.json
          flags: unittests
          name: codecov-umbrella
```

### 3.4 E2E æµ‹è¯•é…ç½®

```typescript
// playwright.config.ts
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  use: {
    baseURL: 'http://localhost:3200',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
  },

  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] },
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] },
    },
  ],

  webServer: {
    command: 'pnpm dev',
    url: 'http://localhost:3200',
    reuseExistingServer: !process.env.CI,
  },
});
```

---

## 4. æ„å»ºä¸æ‰“åŒ…

### 4.1 Next.js æ„å»ºé…ç½®

```javascript
// next.config.js
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
  output: 'standalone',
  images: {
    domains: ['cdn.yyc3-cater.com'],
  },
  env: {
    NEXT_PUBLIC_API_URL: process.env.NEXT_PUBLIC_API_URL,
  },
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production',
  },
};

module.exports = nextConfig;
```

### 4.2 æ„å»ºå·¥ä½œæµ

```yaml
# .github/workflows/build.yml
name: Build

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'pnpm'

      - name: Install pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Build application
        run: pnpm build

      - name: Upload build artifacts
        uses: actions/upload-artifact@v3
        with:
          name: build-artifacts
          path: |
            .next
            public
          retention-days: 7
```

---

## 5. é•œåƒç®¡ç†

### 5.1 Dockerfile

```dockerfile
# å¤šé˜¶æ®µæ„å»º
FROM node:18-alpine AS base

# å®‰è£…ä¾èµ–
FROM base AS deps
WORKDIR /app

COPY package.json pnpm-lock.yaml* ./
RUN npm install -g pnpm
RUN pnpm install --frozen-lockfile

# æ„å»º
FROM base AS builder
WORKDIR /app

COPY --from=deps /app/node_modules ./node_modules
COPY . .

RUN pnpm build

# ç”Ÿäº§é•œåƒ
FROM base AS runner
WORKDIR /app

ENV NODE_ENV=production

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static

RUN chown -R nextjs:nodejs /app

USER nextjs

EXPOSE 3200

ENV PORT=3200
ENV HOSTNAME="0.0.0.0"

CMD ["node", "server.js"]
```

### 5.2 é•œåƒæ„å»ºå·¥ä½œæµ

```yaml
# .github/workflows/docker.yml
name: Docker

on:
  push:
    branches: [main, develop]
    tags:
      - 'v*.*.*'
  pull_request:
    branches: [main, develop]

jobs:
  build-and-push:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      packages: write
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Log in to Container Registry
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Extract metadata
        id: meta
        uses: docker/metadata-action@v5
        with:
          images: ghcr.io/yyc3-cater/web
          tags: |
            type=ref,event=branch
            type=ref,event=pr
            type=semver,pattern={{version}}
            type=semver,pattern={{major}}.{{minor}}
            type=sha,prefix={{branch}}-

      - name: Build and push Docker image
        uses: docker/build-push-action@v5
        with:
          context: .
          push: true
          tags: ${{ steps.meta.outputs.tags }}
          labels: ${{ steps.meta.outputs.labels }}
          cache-from: type=gha
          cache-to: type=gha,mode=max
```

---

## 6. éƒ¨ç½²æµç¨‹

### 6.1 éƒ¨ç½²åˆ° Staging

```yaml
# .github/workflows/deploy-staging.yml
name: Deploy to Staging

on:
  push:
    branches: [develop]

jobs:
  deploy-staging:
    runs-on: ubuntu-latest
    environment:
      name: staging
      url: https://staging.yyc3-cater.com
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ap-northeast-1

      - name: Update kubeconfig
        run: |
          aws eks update-kubeconfig --name yyc3-cater-staging --region ap-northeast-1

      - name: Deploy to Kubernetes
        run: |
          kubectl set image deployment/yyc3-cater-web \
            web=ghcr.io/yyc3-cater/web:${{ github.sha }} \
            -n staging

      - name: Wait for rollout
        run: |
          kubectl rollout status deployment/yyc3-cater-web -n staging --timeout=10m

      - name: Verify deployment
        run: |
          kubectl get pods -n staging -l app=yyc3-cater,component=web
```

### 6.2 éƒ¨ç½²åˆ° Production

```yaml
# .github/workflows/deploy-production.yml
name: Deploy to Production

on:
  push:
    tags:
      - 'v*.*.*'

jobs:
  deploy-production:
    runs-on: ubuntu-latest
    environment:
      name: production
      url: https://www.yyc3-cater.com
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ap-northeast-1

      - name: Update kubeconfig
        run: |
          aws eks update-kubeconfig --name yyc3-cater-production --region ap-northeast-1

      - name: Deploy to Kubernetes
        run: |
          kubectl set image deployment/yyc3-cater-web \
            web=ghcr.io/yyc3-cater/web:${{ github.ref_name }} \
            -n production

      - name: Wait for rollout
        run: |
          kubectl rollout status deployment/yyc3-cater-web -n production --timeout=10m

      - name: Run health checks
        run: |
          kubectl run health-check --image=curlimages/curl:latest --rm -it --restart=Never -- \
            curl -f http://yyc3-cater-web.production.svc.cluster.local/health

      - name: Notify deployment
        uses: 8398a7/action-slack@v3
        with:
          status: ${{ job.status }}
          text: 'Production deployment completed'
          webhook_url: ${{ secrets.SLACK_WEBHOOK }}
        if: always()
```

---

## 7. ç¯å¢ƒç®¡ç†

### 7.1 ç¯å¢ƒé…ç½®

```typescript
// config/environments.ts
export const environments = {
  development: {
    name: 'development',
    apiUrl: 'http://localhost:3201',
    webUrl: 'http://localhost:3200',
    databaseUrl: 'postgresql://user:password@localhost:5432/yyc3_cater_dev',
    redisUrl: 'redis://localhost:6379',
  },
  staging: {
    name: 'staging',
    apiUrl: 'https://api-staging.yyc3-cater.com',
    webUrl: 'https://staging.yyc3-cater.com',
    databaseUrl: process.env.DATABASE_URL,
    redisUrl: process.env.REDIS_URL,
  },
  production: {
    name: 'production',
    apiUrl: 'https://api.yyc3-cater.com',
    webUrl: 'https://www.yyc3-cater.com',
    databaseUrl: process.env.DATABASE_URL,
    redisUrl: process.env.REDIS_URL,
  },
};

export function getEnvConfig() {
  const env = process.env.NODE_ENV || 'development';
  return environments[env as keyof typeof environments] || environments.development;
}
```

### 7.2 ç¯å¢ƒå˜é‡ç®¡ç†

```yaml
# Kubernetes Secret
apiVersion: v1
kind: Secret
metadata:
  name: yyc3-cater-secrets
  namespace: production
type: Opaque
stringData:
  DATABASE_URL: "postgresql://user:password@postgres:5432/yyc3_cater"
  REDIS_URL: "redis://redis:6379"
  JWT_SECRET: "your-jwt-secret"
  ENCRYPTION_KEY: "your-encryption-key"
  MINIO_ACCESS_KEY: "minioadmin"
  MINIO_SECRET_KEY: "minioadmin"
```

---

## 8. ç›‘æ§ä¸å‘Šè­¦

### 8.1 éƒ¨ç½²ç›‘æ§

```yaml
# .github/workflows/monitor.yml
name: Monitor

on:
  schedule:
    - cron: '*/5 * * * *'  # æ¯ 5 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡

jobs:
  monitor:
    runs-on: ubuntu-latest
    steps:
      - name: Check application health
        run: |
          response=$(curl -s -o /dev/null -w "%{http_code}" https://api.yyc3-cater.com/health)
          if [ $response -ne 200 ]; then
            echo "Application is unhealthy"
            exit 1
          fi

      - name: Notify on failure
        if: failure()
        uses: 8398a7/action-slack@v3
        with:
          status: 'failure'
          text: 'Application health check failed'
          webhook_url: ${{ secrets.SLACK_WEBHOOK }}
```

### 8.2 å‘Šè­¦é…ç½®

```yaml
# Prometheus å‘Šè­¦è§„åˆ™
groups:
- name: deployment-alerts
  rules:
  - alert: DeploymentFailed
    expr: kube_deployment_status_replicas_available{deployment="yyc3-cater-web"} < kube_deployment_spec_replicas{deployment="yyc3-cater-web"}
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "Deployment failed"
      description: "Deployment {{ $labels.deployment }} has {{ $value }} available replicas, expected {{ $labels.spec_replicas }}"

  - alert: PodCrashLooping
    expr: rate(kube_pod_container_status_restarts_total[15m]) > 0
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "Pod is crash looping"
      description: "Pod {{ $labels.pod }} is restarting frequently"
```

---

## 9. å›æ»šæœºåˆ¶

### 9.1 è‡ªåŠ¨å›æ»š

```yaml
# .github/workflows/rollback.yml
name: Rollback

on:
  workflow_dispatch:
    inputs:
      deployment:
        description: 'Deployment name'
        required: true
        default: 'yyc3-cater-web'
      namespace:
        description: 'Namespace'
        required: true
        default: 'production'
      revision:
        description: 'Revision to rollback to'
        required: true

jobs:
  rollback:
    runs-on: ubuntu-latest
    steps:
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ap-northeast-1

      - name: Update kubeconfig
        run: |
          aws eks update-kubeconfig --name yyc3-cater-production --region ap-northeast-1

      - name: Rollback deployment
        run: |
          kubectl rollout undo deployment/${{ github.event.inputs.deployment }} \
            -n ${{ github.event.inputs.namespace }} \
            --to-revision=${{ github.event.inputs.revision }}

      - name: Wait for rollback
        run: |
          kubectl rollout status deployment/${{ github.event.inputs.deployment }} \
            -n ${{ github.event.inputs.namespace }} --timeout=10m

      - name: Notify rollback
        uses: 8398a7/action-slack@v3
        with:
          status: ${{ job.status }}
          text: 'Rollback completed'
          webhook_url: ${{ secrets.SLACK_WEBHOOK }}
```

### 9.2 æ‰‹åŠ¨å›æ»š

```bash
#!/bin/bash
# æ‰‹åŠ¨å›æ»šè„šæœ¬

DEPLOYMENT=$1
NAMESPACE=$2
REVISION=${3:-""}

if [ -z "$DEPLOYMENT" ] || [ -z "$NAMESPACE" ]; then
  echo "Usage: $0 <deployment> <namespace> [revision]"
  exit 1
fi

echo "Rolling back deployment: $DEPLOYMENT in namespace: $NAMESPACE"

if [ -n "$REVISION" ]; then
  kubectl rollout undo deployment/$DEPLOYMENT -n $NAMESPACE --to-revision=$REVISION
else
  kubectl rollout undo deployment/$DEPLOYMENT -n $NAMESPACE
fi

echo "Waiting for rollback to complete..."
kubectl rollout status deployment/$DEPLOYMENT -n $NAMESPACE --timeout=10m

echo "Rollback completed"
```

---

## 10. æœ€ä½³å®è·µ

### 10.1 ä»£ç æäº¤è§„èŒƒ

```bash
#!/bin/bash
# Git hooks

# Commitlint é…ç½®
echo "module.exports = { extends: ['@commitlint/config-conventional'] };" > commitlint.config.js

# Husky é…ç½®
npx husky install
npx husky add .husky/commit-msg 'npx --no -- commitlint --edit $1'
npx husky add .husky/pre-commit 'pnpm lint-staged'
```

### 10.2 åˆ†æ”¯ç­–ç•¥

```
main (ç”Ÿäº§)
â”œâ”€â”€ develop (å¼€å‘)
â”‚   â”œâ”€â”€ feature/user-auth (åŠŸèƒ½åˆ†æ”¯)
â”‚   â”œâ”€â”€ feature/ai-chat (åŠŸèƒ½åˆ†æ”¯)
â”‚   â””â”€â”€ feature/data-analysis (åŠŸèƒ½åˆ†æ”¯)
â”œâ”€â”€ release/v1.0.0 (å‘å¸ƒåˆ†æ”¯)
â””â”€â”€ hotfix/critical-bug (çƒ­ä¿®å¤åˆ†æ”¯)
```

### 10.3 ç‰ˆæœ¬ç®¡ç†

```json
{
  "scripts": {
    "release": "standard-version",
    "release:minor": "standard-version --release-as minor",
    "release:patch": "standard-version --release-as patch",
    "release:major": "standard-version --release-as major"
  }
}
```

---

## ğŸ“„ æ–‡æ¡£æ ‡å°¾ (Footer)

> ã€Œ***YanYuCloudCube***ã€
> ã€Œ***<admin@0379.email>***ã€
> ã€Œ***Words Initiate Quadrants, Language Serves as Core for Future***ã€
> ã€Œ***All things converge in cloud pivot; Deep stacks ignite a new era of intelligence***ã€




## æ¦‚è¿°

### æ¶æ„æ¦‚è¿°

æœ¬æ¶æ„æ–‡æ¡£è¯¦ç»†æè¿°äº†ç³»ç»Ÿçš„æ•´ä½“æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬æ¶æ„ç›®æ ‡ã€è®¾è®¡åŸåˆ™ã€æŠ€æœ¯é€‰å‹ç­‰å…³é”®ä¿¡æ¯ã€‚

#### æ¶æ„ç›®æ ‡

- **é«˜å¯ç”¨æ€§**ï¼šç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œï¼Œæ•…éšœè‡ªåŠ¨æ¢å¤
- **é«˜æ€§èƒ½**ï¼šå“åº”è¿…é€Ÿï¼Œèµ„æºåˆ©ç”¨é«˜æ•ˆ
- **é«˜å®‰å…¨æ€§**ï¼šæ•°æ®åŠ å¯†ï¼Œæƒé™ä¸¥æ ¼æ§åˆ¶
- **é«˜æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºåŠŸèƒ½æ‰©å±•
- **é«˜å¯ç»´æŠ¤æ€§**ï¼šä»£ç æ¸…æ™°ï¼Œæ–‡æ¡£å®Œå–„

#### è®¾è®¡åŸåˆ™

- **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
- **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- **ä¾èµ–å€’ç½®**ï¼šä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°
- **æ¥å£éš”ç¦»**ï¼šä½¿ç”¨ç»†ç²’åº¦çš„æ¥å£
- **è¿ªç±³ç‰¹æ³•åˆ™**ï¼šæœ€å°‘çŸ¥è¯†åŸåˆ™



## æ¶æ„è®¾è®¡

### æ¶æ„è®¾è®¡

#### æ•´ä½“æ¶æ„

ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬ï¼š

- **è¡¨ç°å±‚**ï¼šè´Ÿè´£ç”¨æˆ·ç•Œé¢å’Œäº¤äº’
- **åº”ç”¨å±‚**ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘
- **ä¸šåŠ¡å±‚**ï¼šå®ç°æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½
- **æ•°æ®å±‚**ï¼šç®¡ç†æ•°æ®å­˜å‚¨å’Œè®¿é—®
- **åŸºç¡€è®¾æ–½å±‚**ï¼šæä¾›åŸºç¡€æœåŠ¡æ”¯æŒ

#### æ¨¡å—åˆ’åˆ†

ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ç‰¹å®šåŠŸèƒ½ï¼š

- **ç”¨æˆ·æ¨¡å—**ï¼šç”¨æˆ·ç®¡ç†å’Œè®¤è¯
- **è®¢å•æ¨¡å—**ï¼šè®¢å•å¤„ç†å’Œç®¡ç†
- **æ”¯ä»˜æ¨¡å—**ï¼šæ”¯ä»˜é›†æˆå’Œå¤„ç†
- **é€šçŸ¥æ¨¡å—**ï¼šæ¶ˆæ¯é€šçŸ¥å’Œæ¨é€
- **æŠ¥è¡¨æ¨¡å—**ï¼šæ•°æ®ç»Ÿè®¡å’Œåˆ†æ

#### æŠ€æœ¯é€‰å‹

- **å‰ç«¯æ¡†æ¶**ï¼šReact / Vue
- **åç«¯æ¡†æ¶**ï¼šNode.js / Express / Fastify
- **æ•°æ®åº“**ï¼šPostgreSQL / MongoDB
- **ç¼“å­˜**ï¼šRedis
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šRabbitMQ / Kafka



## æŠ€æœ¯å®ç°

### æŠ€æœ¯å®ç°

#### æ ¸å¿ƒæŠ€æœ¯æ ˆ

```typescript
// æ ¸å¿ƒä¾èµ–
{
  "dependencies": {
    "react": "^18.0.0",
    "typescript": "^5.0.0",
    "express": "^4.18.0",
    "prisma": "^5.0.0",
    "redis": "^4.6.0"
  }
}
```

#### å…³é”®å®ç°

1. **æœåŠ¡å±‚å®ç°**
```typescript
class UserService {
  async createUser(data: CreateUserDto): Promise<User> {
    // éªŒè¯è¾“å…¥
    this.validateUserData(data);
    
    // åŠ å¯†å¯†ç 
    const hashedPassword = await this.hashPassword(data.password);
    
    // åˆ›å»ºç”¨æˆ·
    const user = await this.userRepository.create({
      ...data,
      password: hashedPassword
    });
    
    return user;
  }
}
```

2. **ä¸­é—´ä»¶å®ç°**
```typescript
const authMiddleware = async (req: Request, res: Response, next: NextFunction) => {
  const token = req.headers.authorization?.split(' ')[1];
  
  if (!token) {
    return res.status(401).json({ error: 'æœªæˆæƒè®¿é—®' });
  }
  
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.user = decoded;
    next();
  } catch (error) {
    return res.status(401).json({ error: 'ä»¤ç‰Œæ— æ•ˆ' });
  }
};
```



## éƒ¨ç½²æ–¹æ¡ˆ

### éƒ¨ç½²æ–¹æ¡ˆ

#### éƒ¨ç½²æ¶æ„

é‡‡ç”¨å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆï¼Œä½¿ç”¨Dockerå’ŒKubernetesè¿›è¡Œç¼–æ’ã€‚

#### éƒ¨ç½²æ­¥éª¤

1. **ç¯å¢ƒå‡†å¤‡**
```bash
# å®‰è£…Docker
curl -fsSL https://get.docker.com | sh

# å®‰è£…Kubernetes
# æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©ç›¸åº”çš„å®‰è£…æ–¹å¼
```

2. **æ„å»ºé•œåƒ**
```bash
# æ„å»ºåº”ç”¨é•œåƒ
docker build -t yyc3-app:latest .

# æ¨é€åˆ°é•œåƒä»“åº“
docker push registry.example.com/yyc3-app:latest
```

3. **éƒ¨ç½²åˆ°Kubernetes**
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: yyc3-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: yyc3-app
  template:
    metadata:
      labels:
        app: yyc3-app
    spec:
      containers:
      - name: app
        image: registry.example.com/yyc3-app:latest
        ports:
        - containerPort: 3000
        env:
        - name: NODE_ENV
          value: "production"
```

4. **é…ç½®æœåŠ¡**
```yaml
apiVersion: v1
kind: Service
metadata:
  name: yyc3-app-service
spec:
  selector:
    app: yyc3-app
  ports:
  - protocol: TCP
    port: 80
    targetPort: 3000
  type: LoadBalancer
```



## æ€§èƒ½ä¼˜åŒ–

### æ€§èƒ½ä¼˜åŒ–

#### å‰ç«¯ä¼˜åŒ–

1. **ä»£ç åˆ†å‰²**
```typescript
// è·¯ç”±çº§åˆ«ä»£ç åˆ†å‰²
const Home = lazy(() => import('./pages/Home'));
const About = lazy(() => import('./pages/About'));

function App() {
  return (
    <Suspense fallback={<Loading />}>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
      </Routes>
    </Suspense>
  );
}
```

2. **ç¼“å­˜ç­–ç•¥**
```typescript
// React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
const MemoizedComponent = React.memo(({ data }) => {
  return <div>{data.value}</div>;
});

// useMemo ç¼“å­˜è®¡ç®—ç»“æœ
const expensiveValue = useMemo(() => {
  return computeExpensiveValue(data);
}, [data]);
```

#### åç«¯ä¼˜åŒ–

1. **æ•°æ®åº“ä¼˜åŒ–**
```typescript
// ä½¿ç”¨ç´¢å¼•
CREATE INDEX idx_user_email ON users(email);

// æŸ¥è¯¢ä¼˜åŒ–
const users = await prisma.user.findMany({
  select: {
    id: true,
    name: true,
    email: true
  },
  where: {
    active: true
  },
  take: 100
});
```

2. **ç¼“å­˜ç­–ç•¥**
```typescript
// Redisç¼“å­˜
async function getUser(id: string): Promise<User> {
  const cacheKey = `user:${id}`;
  
  // å°è¯•ä»ç¼“å­˜è·å–
  const cached = await redis.get(cacheKey);
  if (cached) {
    return JSON.parse(cached);
  }
  
  // ä»æ•°æ®åº“è·å–
  const user = await prisma.user.findUnique({ where: { id } });
  
  // å†™å…¥ç¼“å­˜
  await redis.setex(cacheKey, 3600, JSON.stringify(user));
  
  return user;
}
```



## å®‰å…¨è€ƒè™‘

### å®‰å…¨è€ƒè™‘

#### è®¤è¯ä¸æˆæƒ

1. **JWTè®¤è¯**
```typescript
// ç”ŸæˆJWTä»¤ç‰Œ
const token = jwt.sign(
  { userId: user.id, role: user.role },
  process.env.JWT_SECRET,
  { expiresIn: '24h' }
);

// éªŒè¯JWTä»¤ç‰Œ
const decoded = jwt.verify(token, process.env.JWT_SECRET);
```

2. **RBACæˆæƒ**
```typescript
// è§’è‰²æƒé™æ£€æŸ¥
function checkPermission(user: User, resource: string, action: string): boolean {
  const permissions = rolePermissions[user.role];
  return permissions.some(p => 
    p.resource === resource && p.actions.includes(action)
  );
}
```

#### æ•°æ®ä¿æŠ¤

1. **è¾“å…¥éªŒè¯**
```typescript
// ä½¿ç”¨Zodè¿›è¡Œè¾“å…¥éªŒè¯
const createUserSchema = z.object({
  email: z.string().email(),
  password: z.string().min(8).regex(/[A-Z]/),
  name: z.string().min(2)
});

const validated = createUserSchema.parse(input);
```

2. **æ•°æ®åŠ å¯†**
```typescript
// ä½¿ç”¨bcryptåŠ å¯†å¯†ç 
const hashedPassword = await bcrypt.hash(password, 10);

// éªŒè¯å¯†ç 
const isValid = await bcrypt.compare(password, hashedPassword);
```

#### å®‰å…¨å¤´é…ç½®

```typescript
// Expresså®‰å…¨å¤´é…ç½®
app.use(helmet());
app.use(cors({
  origin: process.env.ALLOWED_ORIGINS?.split(','),
  credentials: true
}));
```



## ç›‘æ§å‘Šè­¦

### ç›‘æ§å‘Šè­¦

#### ç›‘æ§æŒ‡æ ‡

1. **ç³»ç»ŸæŒ‡æ ‡**
- CPUä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- ç£ç›˜ä½¿ç”¨ç‡
- ç½‘ç»œI/O

2. **åº”ç”¨æŒ‡æ ‡**
- è¯·æ±‚é‡(RPS)
- å“åº”æ—¶é—´
- é”™è¯¯ç‡
- å¹¶å‘ç”¨æˆ·æ•°

3. **ä¸šåŠ¡æŒ‡æ ‡**
- ç”¨æˆ·æ³¨å†Œæ•°
- è®¢å•åˆ›å»ºæ•°
- æ”¯ä»˜æˆåŠŸç‡
- ç”¨æˆ·æ´»è·ƒåº¦

#### ç›‘æ§å·¥å…·

```typescript
// PrometheusæŒ‡æ ‡æ”¶é›†
import { Counter, Histogram, Gauge } from 'prom-client';

const requestCounter = new Counter({
  name: 'http_requests_total',
  help: 'Total number of HTTP requests',
  labelNames: ['method', 'route', 'status']
});

const responseTime = new Histogram({
  name: 'http_request_duration_seconds',
  help: 'HTTP request duration in seconds',
  labelNames: ['method', 'route']
});

// ä½¿ç”¨ä¸­é—´ä»¶è®°å½•æŒ‡æ ‡
app.use((req, res, next) => {
  const start = Date.now();
  
  res.on('finish', () => {
    const duration = (Date.now() - start) / 1000;
    requestCounter.inc({
      method: req.method,
      route: req.route?.path || req.path,
      status: res.statusCode
    });
    responseTime.observe({
      method: req.method,
      route: req.route?.path || req.path
    }, duration);
  });
  
  next();
});
```

#### å‘Šè­¦è§„åˆ™

```yaml
groups:
- name: api_alerts
  rules:
  - alert: HighErrorRate
    expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "APIé”™è¯¯ç‡è¿‡é«˜"
      description: "5åˆ†é’Ÿå†…é”™è¯¯ç‡è¶…è¿‡5%"
  
  - alert: HighResponseTime
    expr: histogram_quantile(0.95, http_request_duration_seconds) > 1
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "APIå“åº”æ—¶é—´è¿‡é•¿"
      description: "95%åˆ†ä½å“åº”æ—¶é—´è¶…è¿‡1ç§’"
```



## æœ€ä½³å®è·µ

### æœ€ä½³å®è·µ

#### ä»£ç è§„èŒƒ

1. **å‘½åè§„èŒƒ**
```typescript
// å˜é‡ï¼šcamelCase
const userName = 'John';

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;

// ç±»ï¼šPascalCase
class UserService { }

// æ¥å£ï¼šPascalCaseï¼Œå‰ç¼€Iï¼ˆå¯é€‰ï¼‰
interface IUserService { }
```

2. **æ³¨é‡Šè§„èŒƒ**
```typescript
/**
 * åˆ›å»ºç”¨æˆ·
 * @param email - ç”¨æˆ·é‚®ç®±
 * @param password - ç”¨æˆ·å¯†ç 
 * @returns åˆ›å»ºçš„ç”¨æˆ·å¯¹è±¡
 * @throws {Error} å½“é‚®ç®±å·²å­˜åœ¨æ—¶æŠ›å‡ºé”™è¯¯
 */
async function createUser(
  email: string, 
  password: string
): Promise<User> {
  // å®ç°
}
```

#### é”™è¯¯å¤„ç†

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
class AppError extends Error {
  constructor(
    public statusCode: number,
    public message: string,
    public isOperational = true
  ) {
    super(message);
    this.name = this.constructor.name;
    Error.captureStackTrace(this, this.constructor);
  }
}

// ä½¿ç”¨é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((err: Error, req: Request, res: Response, next: NextFunction) => {
  if (err instanceof AppError) {
    return res.status(err.statusCode).json({
      success: false,
      error: err.message
    });
  }
  
  // è®°å½•æœªé¢„æœŸçš„é”™è¯¯
  logger.error('Unexpected error:', err);
  
  return res.status(500).json({
    success: false,
    error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
  });
});
```

#### æ—¥å¿—è®°å½•

```typescript
// ç»“æ„åŒ–æ—¥å¿—
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

// ä½¿ç”¨æ—¥å¿—
logger.info('User created', { userId: user.id, email: user.email });
logger.error('Database connection failed', { error: error.message });
```


## ç›¸å…³æ–‡æ¡£

- [ğŸ”– YYCÂ³ å¤šç¯å¢ƒéƒ¨ç½²æ¶æ„å·®å¼‚æ–‡æ¡£](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æ¶æ„ç±»/03-YYC3-Cater--æ¶æ„ç±»-å¤šç¯å¢ƒéƒ¨ç½²æ¶æ„å·®å¼‚æ–‡æ¡£.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æ¶æ„ç±»
- [ğŸ”– YYCÂ³ éƒ¨ç½²æ¶æ„å®æ–½æ–‡æ¡£](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æ¶æ„ç±»/01-YYC3-Cater--æ¶æ„ç±»-éƒ¨ç½²æ¶æ„å®æ–½æ–‡æ¡£.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æ¶æ„ç±»
- [YYCÂ³æ™ºæ¢æœåŠ¡åŒ–å¹³å° - é£é™©ç®¡ç†ä¸è´¨é‡ä¿éšœè®¡åˆ’](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æ¶æ„ç±»/05-YYC3-Cater--æ¶æ„ç±»-é£é™©ç®¡ç†ä¸è´¨é‡ä¿éšœè®¡åˆ’.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æ¶æ„ç±»
- [ğŸ”– YYCÂ³ ç°åº¦å‘å¸ƒæ¶æ„è®¾è®¡æ–‡æ¡£](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æ¶æ„ç±»/04-YYC3-Cater--æ¶æ„ç±»-ç°åº¦å‘å¸ƒæ¶æ„è®¾è®¡æ–‡æ¡£.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æ¶æ„ç±»
- [ğŸ”– YYCÂ³ CI/CDæµæ°´çº¿æ­å»ºä¸ä¼˜åŒ–æŠ€å·§](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»/03-YYC3-Cater--æŠ€å·§ç±»-CI_CDæµæ°´çº¿æ­å»ºä¸ä¼˜åŒ–æŠ€å·§.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»
