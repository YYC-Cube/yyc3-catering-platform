---

**@file**ï¼šYYCÂ³-éƒ¨ç½²é—®é¢˜æ’æŸ¥æŒ‡å—
**@description**ï¼šYYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°çš„éƒ¨ç½²é—®é¢˜æ’æŸ¥æŒ‡å—
**@author**ï¼šYYCÂ³
**@version**ï¼šv1.0.0
**@created**ï¼š2025-01-30
**@updated**ï¼š2025-01-30
**@status**ï¼špublished
**@tags**ï¼šYYCÂ³,æ–‡æ¡£

---
# ğŸ”– YYCÂ³ éƒ¨ç½²é—®é¢˜æ’æŸ¥æŒ‡å—

> ***YanYuCloudCube***
> **æ ‡è¯­**ï¼šè¨€å¯è±¡é™ | è¯­æ¢æœªæ¥
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **æ ‡è¯­**ï¼šä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| å±æ€§ | å†…å®¹ |
|------|------|
| **æ–‡æ¡£æ ‡é¢˜** | YYCÂ³ éƒ¨ç½²é—®é¢˜æ’æŸ¥æŒ‡å— |
| **æ–‡æ¡£ç±»å‹** | æŠ€å·§ç±»æ–‡æ¡£ |
| **æ‰€å±é˜¶æ®µ** | éƒ¨ç½²å‘å¸ƒ |
| **éµå¾ªè§„èŒƒ** | YYCÂ³ å›¢é˜Ÿæ ‡å‡†åŒ–è§„èŒƒ v1.0.0 |
| **ç‰ˆæœ¬å·** | v1.0.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2025-01-30 |
| **ä½œè€…** | YYCÂ³ Team |
| **æ›´æ–°æ—¥æœŸ** | 2025-01-30 |

---

## ğŸ“‘ ç›®å½•

1. [é—®é¢˜æ’æŸ¥æ¦‚è¿°](#1-é—®é¢˜æ’æŸ¥æ¦‚è¿°)
2. [ç¯å¢ƒé—®é¢˜æ’æŸ¥](#2-ç¯å¢ƒé—®é¢˜æ’æŸ¥)
3. [å®¹å™¨é—®é¢˜æ’æŸ¥](#3-å®¹å™¨é—®é¢˜æ’æŸ¥)
4. [Kubernetesé—®é¢˜æ’æŸ¥](#4-kubernetesé—®é¢˜æ’æŸ¥)
5. [ç½‘ç»œé—®é¢˜æ’æŸ¥](#5-ç½‘ç»œé—®é¢˜æ’æŸ¥)
6. [å­˜å‚¨é—®é¢˜æ’æŸ¥](#6-å­˜å‚¨é—®é¢˜æ’æŸ¥)
7. [åº”ç”¨é—®é¢˜æ’æŸ¥](#7-åº”ç”¨é—®é¢˜æ’æŸ¥)
8. [æ€§èƒ½é—®é¢˜æ’æŸ¥](#8-æ€§èƒ½é—®é¢˜æ’æŸ¥)
9. [å®‰å…¨é—®é¢˜æ’æŸ¥](#9-å®‰å…¨é—®é¢˜æ’æŸ¥)
10. [å¸¸è§é—®é¢˜FAQ](#10-å¸¸è§é—®é¢˜faq)

---

## 1. æ¦‚è¿°

### 1.1 åŠŸèƒ½è¯´æ˜

### 1.2 æŠ€æœ¯æ ˆ

### 1.3 å¼€å‘ç¯å¢ƒ

## 2. å®ç°æ–¹æ¡ˆ

### 2.1 ä»£ç ç»“æ„

### 2.2 æ ¸å¿ƒé€»è¾‘

### 2.3 æ•°æ®å¤„ç†

## 3. æ¥å£æ–‡æ¡£

### 3.1 APIæ¥å£

### 3.2 è¯·æ±‚å‚æ•°

### 3.3 å“åº”æ ¼å¼

## 4. æµ‹è¯•æ–¹æ¡ˆ

### 4.1 å•å…ƒæµ‹è¯•

### 4.2 é›†æˆæµ‹è¯•

### 4.3 æµ‹è¯•ç”¨ä¾‹

## 5. éƒ¨ç½²æŒ‡å—

### 5.1 ç¯å¢ƒå‡†å¤‡

### 5.2 éƒ¨ç½²æ­¥éª¤

### 5.3 éªŒè¯æ–¹æ³•

## 6. å¸¸è§é—®é¢˜

### 6.1 é—®é¢˜æ’æŸ¥

### 6.2 è§£å†³æ–¹æ¡ˆ

## 1. é—®é¢˜æ’æŸ¥æ¦‚è¿°

### 1.1 é—®é¢˜æ’æŸ¥æ–¹æ³•è®º

**ç³»ç»ŸåŒ–æ’æŸ¥æµç¨‹**
```mermaid
graph TD
    A[å‘ç°é—®é¢˜] --> B[é—®é¢˜åˆ†ç±»]
    B --> C{é—®é¢˜ç±»å‹}
    C -->|ç¯å¢ƒé—®é¢˜| D[ç¯å¢ƒæ’æŸ¥]
    C -->|å®¹å™¨é—®é¢˜| E[å®¹å™¨æ’æŸ¥]
    C -->|K8sé—®é¢˜| F[K8sæ’æŸ¥]
    C -->|ç½‘ç»œé—®é¢˜| G[ç½‘ç»œæ’æŸ¥]
    C -->|å­˜å‚¨é—®é¢˜| H[å­˜å‚¨æ’æŸ¥]
    C -->|åº”ç”¨é—®é¢˜| I[åº”ç”¨æ’æŸ¥]
    C -->|æ€§èƒ½é—®é¢˜| J[æ€§èƒ½æ’æŸ¥]
    C -->|å®‰å…¨é—®é¢˜| K[å®‰å…¨æ’æŸ¥]
    D --> L[å®šä½æ ¹å› ]
    E --> L
    F --> L
    G --> L
    H --> L
    I --> L
    J --> L
    K --> L
    L --> M[åˆ¶å®šè§£å†³æ–¹æ¡ˆ]
    M --> N[å®æ–½ä¿®å¤]
    N --> O[éªŒè¯ç»“æœ]
    O --> P{é—®é¢˜è§£å†³?}
    P -->|å¦| L
    P -->|æ˜¯| Q[æ€»ç»“ç»éªŒ]
```

### 1.2 é—®é¢˜åˆ†ç±»ä½“ç³»

| é—®é¢˜ç±»åˆ« | å­ç±»åˆ« | å¸¸è§ç—‡çŠ¶ | ä¼˜å…ˆçº§ |
|---------|--------|----------|--------|
| ç¯å¢ƒé—®é¢˜ | èµ„æºä¸è¶³ã€é…ç½®é”™è¯¯ã€ä¾èµ–ç¼ºå¤± | éƒ¨ç½²å¤±è´¥ã€å¯åŠ¨å¤±è´¥ | é«˜ |
| å®¹å™¨é—®é¢˜ | é•œåƒé—®é¢˜ã€è¿è¡Œæ—¶é”™è¯¯ã€èµ„æºé™åˆ¶ | å®¹å™¨å´©æºƒã€æ— æ³•å¯åŠ¨ | é«˜ |
| K8sé—®é¢˜ | è°ƒåº¦å¤±è´¥ã€çŠ¶æ€å¼‚å¸¸ã€é…ç½®é”™è¯¯ | Podæœªå°±ç»ªã€æœåŠ¡ä¸å¯ç”¨ | é«˜ |
| ç½‘ç»œé—®é¢˜ | è¿æ¥è¶…æ—¶ã€DNSè§£æã€ç«¯å£å†²çª | æ— æ³•è®¿é—®ã€ç½‘ç»œä¸é€š | é«˜ |
| å­˜å‚¨é—®é¢˜ | æŒ‚è½½å¤±è´¥ã€å®¹é‡ä¸è¶³ã€æƒé™é—®é¢˜ | æ•°æ®ä¸¢å¤±ã€æ— æ³•è¯»å†™ | é«˜ |
| åº”ç”¨é—®é¢˜ | ä»£ç é”™è¯¯ã€é…ç½®é”™è¯¯ã€ä¾èµ–é—®é¢˜ | åŠŸèƒ½å¼‚å¸¸ã€æŠ¥é”™ | ä¸­ |
| æ€§èƒ½é—®é¢˜ | å“åº”æ…¢ã€ååé‡ä½ã€èµ„æºå ç”¨é«˜ | ç”¨æˆ·ä½“éªŒå·® | ä¸­ |
| å®‰å…¨é—®é¢˜ | æ¼æ´ã€æƒé™é—®é¢˜ã€é…ç½®ä¸å½“ | å®‰å…¨é£é™© | é«˜ |

### 1.3 æ’æŸ¥å·¥å…·æ¸…å•

**å¿…å¤‡å·¥å…·**
```bash
# ç³»ç»Ÿå·¥å…·
top              # è¿›ç¨‹ç›‘æ§
htop             # è¿›ç¨‹ç›‘æ§ï¼ˆå¢å¼ºç‰ˆï¼‰
ps               # è¿›ç¨‹åˆ—è¡¨
netstat          # ç½‘ç»œè¿æ¥
ss               # ç½‘ç»œè¿æ¥ï¼ˆç°ä»£ç‰ˆï¼‰
lsof             # æ–‡ä»¶å’Œç½‘ç»œè¿æ¥
df               # ç£ç›˜ä½¿ç”¨
du               # ç›®å½•å¤§å°
free             # å†…å­˜ä½¿ç”¨
uptime           # ç³»ç»Ÿè´Ÿè½½

# æ—¥å¿—å·¥å…·
journalctl       # systemdæ—¥å¿—
tail             # æŸ¥çœ‹æ—¥å¿—
grep             # æœç´¢æ—¥å¿—
awk              # æ—¥å¿—åˆ†æ
sed              # æ—¥å¿—å¤„ç†

# ç½‘ç»œå·¥å…·
ping             # ç½‘ç»œè¿é€šæ€§
curl             # HTTPè¯·æ±‚
wget             # HTTPä¸‹è½½
dig              # DNSæŸ¥è¯¢
nslookup         # DNSæŸ¥è¯¢
traceroute       # è·¯ç”±è¿½è¸ª
tcpdump          # æŠ“åŒ…åˆ†æ

# Dockerå·¥å…·
docker           # Dockerç®¡ç†
docker-compose   # Docker Compose

# Kuberneteså·¥å…·
kubectl          # K8sç®¡ç†
helm             # HelmåŒ…ç®¡ç†
k9s              # K8säº¤äº’å¼ç®¡ç†
```

---

## 2. ç¯å¢ƒé—®é¢˜æ’æŸ¥

### 2.1 èµ„æºä¸è¶³é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- éƒ¨ç½²å¤±è´¥
- å®¹å™¨æ— æ³•å¯åŠ¨
- ç³»ç»Ÿå“åº”ç¼“æ…¢

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# ç¯å¢ƒèµ„æºæ’æŸ¥è„šæœ¬

echo "=== ç¯å¢ƒèµ„æºæ’æŸ¥ ==="

# 1. æ£€æŸ¥CPUä½¿ç”¨
echo "1. CPUä½¿ç”¨æƒ…å†µ..."
top -bn1 | head -20

# 2. æ£€æŸ¥å†…å­˜ä½¿ç”¨
echo ""
echo "2. å†…å­˜ä½¿ç”¨æƒ…å†µ..."
free -h

# 3. æ£€æŸ¥ç£ç›˜ä½¿ç”¨
echo ""
echo "3. ç£ç›˜ä½¿ç”¨æƒ…å†µ..."
df -h

# 4. æ£€æŸ¥ç£ç›˜IO
echo ""
echo "4. ç£ç›˜IOæƒ…å†µ..."
iostat -x 1 3

# 5. æ£€æŸ¥ç½‘ç»œè¿æ¥
echo ""
echo "5. ç½‘ç»œè¿æ¥æƒ…å†µ..."
netstat -tuln | head -20

# 6. æ£€æŸ¥ç³»ç»Ÿè´Ÿè½½
echo ""
echo "6. ç³»ç»Ÿè´Ÿè½½..."
uptime

# 7. æ£€æŸ¥è¿›ç¨‹æ•°
echo ""
echo "7. è¿›ç¨‹æ•°..."
ps aux | wc -l

# 8. æ£€æŸ¥æ–‡ä»¶æè¿°ç¬¦
echo ""
echo "8. æ–‡ä»¶æè¿°ç¬¦ä½¿ç”¨..."
cat /proc/sys/fs/file-nr
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æ¸…ç†ä¸å¿…è¦çš„è¿›ç¨‹
kill -9 <PID>

# 2. æ¸…ç†ç£ç›˜ç©ºé—´
# æ¸…ç†Dockeré•œåƒ
docker system prune -a

# æ¸…ç†æ—¥å¿—æ–‡ä»¶
find /var/log -type f -name "*.log" -mtime +7 -delete

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
rm -rf /tmp/*

# 3. ä¼˜åŒ–ç³»ç»Ÿå‚æ•°
# å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶
echo "* soft nofile 65536" >> /etc/security/limits.conf
echo "* hard nofile 65536" >> /etc/security/limits.conf

# å¢åŠ è¿›ç¨‹æ•°é™åˆ¶
echo "* soft nproc 4096" >> /etc/security/limits.conf
echo "* hard nproc 4096" >> /etc/security/limits.conf
```

### 2.2 é…ç½®é”™è¯¯é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- åº”ç”¨æ— æ³•å¯åŠ¨
- é…ç½®ä¸ç”Ÿæ•ˆ
- è¡Œä¸ºå¼‚å¸¸

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# é…ç½®æ’æŸ¥è„šæœ¬

echo "=== é…ç½®æ’æŸ¥ ==="

# 1. æ£€æŸ¥ç¯å¢ƒå˜é‡
echo "1. ç¯å¢ƒå˜é‡..."
env | grep -E "NODE_ENV|PORT|DATABASE_URL"

# 2. æ£€æŸ¥é…ç½®æ–‡ä»¶
echo ""
echo "2. é…ç½®æ–‡ä»¶..."
ls -la /etc/yyc3/

# 3. æ£€æŸ¥æƒé™
echo ""
echo "3. æ–‡ä»¶æƒé™..."
ls -la /etc/yyc3/config/

# 4. éªŒè¯é…ç½®æ–‡ä»¶è¯­æ³•
echo ""
echo "4. é…ç½®æ–‡ä»¶è¯­æ³•..."
# JSONé…ç½®
cat /etc/yyc3/config.json | jq empty

# YAMLé…ç½®
python3 -c "import yaml; yaml.safe_load(open('/etc/yyc3/config.yaml'))"

# 5. æ£€æŸ¥é…ç½®å·®å¼‚
echo ""
echo "5. é…ç½®å·®å¼‚..."
diff /etc/yyc3/config.json /etc/yyc3/config.json.bak
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. ä¿®å¤é…ç½®æ–‡ä»¶
# å¤‡ä»½å½“å‰é…ç½®
cp /etc/yyc3/config.json /etc/yyc3/config.json.bak

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim /etc/yyc3/config.json

# éªŒè¯é…ç½®
cat /etc/yyc3/config.json | jq empty

# 2. é‡å¯åº”ç”¨
systemctl restart yyc3-web

# 3. éªŒè¯é…ç½®ç”Ÿæ•ˆ
curl http://localhost:3200/health
```

### 2.3 ä¾èµ–ç¼ºå¤±é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- æ„å»ºå¤±è´¥
- è¿è¡Œæ—¶é”™è¯¯
- æ¨¡å—æ‰¾ä¸åˆ°

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# ä¾èµ–æ’æŸ¥è„šæœ¬

echo "=== ä¾èµ–æ’æŸ¥ ==="

# 1. æ£€æŸ¥Node.jsç‰ˆæœ¬
echo "1. Node.jsç‰ˆæœ¬..."
node --version

# 2. æ£€æŸ¥npmç‰ˆæœ¬
echo ""
echo "2. npmç‰ˆæœ¬..."
npm --version

# 3. æ£€æŸ¥ä¾èµ–å®‰è£…
echo ""
echo "3. ä¾èµ–å®‰è£…æƒ…å†µ..."
npm list --depth=0

# 4. æ£€æŸ¥ç¼ºå¤±ä¾èµ–
echo ""
echo "4. ç¼ºå¤±ä¾èµ–..."
npm ls --depth=0 2>&1 | grep "UNMET"

# 5. æ£€æŸ¥ä¾èµ–å†²çª
echo ""
echo "5. ä¾èµ–å†²çª..."
npm ls --depth=0 2>&1 | grep "extraneous"

# 6. æ£€æŸ¥ç³»ç»Ÿä¾èµ–
echo ""
echo "6. ç³»ç»Ÿä¾èµ–..."
which git
which python3
which docker
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. å®‰è£…ç¼ºå¤±ä¾èµ–
npm install

# 2. æ¸…ç†å¹¶é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install

# 3. å®‰è£…ç³»ç»Ÿä¾èµ–
# Ubuntu/Debian
apt-get update
apt-get install -y git python3 docker.io

# CentOS/RHEL
yum update
yum install -y git python3 docker

# 4. ä½¿ç”¨nvmç®¡ç†Node.jsç‰ˆæœ¬
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.bashrc
nvm install 18
nvm use 18
```

---

## 3. å®¹å™¨é—®é¢˜æ’æŸ¥

### 3.1 é•œåƒé—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- é•œåƒæ‹‰å–å¤±è´¥
- é•œåƒå¯åŠ¨å¤±è´¥
- é•œåƒå¤§å°è¿‡å¤§

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# Dockeré•œåƒæ’æŸ¥è„šæœ¬

echo "=== Dockeré•œåƒæ’æŸ¥ ==="

# 1. æ£€æŸ¥é•œåƒåˆ—è¡¨
echo "1. æœ¬åœ°é•œåƒ..."
docker images

# 2. æ£€æŸ¥é•œåƒå¤§å°
echo ""
echo "2. é•œåƒå¤§å°..."
docker images --format "table {{.Repository}}\t{{.Tag}}\t{{.Size}}"

# 3. æ£€æŸ¥é•œåƒè¯¦æƒ…
echo ""
echo "3. é•œåƒè¯¦æƒ…..."
docker inspect yyc3-web:latest | jq '.[0] | {Size, Created, Architecture, Os}'

# 4. æ£€æŸ¥é•œåƒå±‚
echo ""
echo "4. é•œåƒå±‚..."
docker history yyc3-web:latest

# 5. æµ‹è¯•é•œåƒ
echo ""
echo "5. æµ‹è¯•é•œåƒ..."
docker run --rm yyc3-web:latest echo "é•œåƒæµ‹è¯•æˆåŠŸ"
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æ¸…ç†æ— ç”¨é•œåƒ
docker image prune -a

# 2. ä¼˜åŒ–é•œåƒå¤§å°
# ä½¿ç”¨å¤šé˜¶æ®µæ„å»º
cat > Dockerfile <<EOF
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build

FROM node:18-alpine AS runner
WORKDIR /app
COPY --from=builder /app/dist ./dist
COPY --from=builder /app/node_modules ./node_modules
COPY package*.json ./
CMD ["node", "dist/index.js"]
EOF

# 3. æ„å»ºé•œåƒ
docker build -t yyc3-web:latest .

# 4. æ¨é€é•œåƒ
docker push yyc3-web:latest
```

### 3.2 å®¹å™¨è¿è¡Œæ—¶é”™è¯¯

**é—®é¢˜ç—‡çŠ¶**
- å®¹å™¨æ— æ³•å¯åŠ¨
- å®¹å™¨é¢‘ç¹é‡å¯
- å®¹å™¨æ— å“åº”

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# å®¹å™¨è¿è¡Œæ—¶æ’æŸ¥è„šæœ¬

echo "=== å®¹å™¨è¿è¡Œæ—¶æ’æŸ¥ ==="

# 1. æ£€æŸ¥å®¹å™¨çŠ¶æ€
echo "1. å®¹å™¨çŠ¶æ€..."
docker ps -a

# 2. æ£€æŸ¥å®¹å™¨æ—¥å¿—
echo ""
echo "2. å®¹å™¨æ—¥å¿—..."
docker logs yyc3-web --tail 100

# 3. æ£€æŸ¥å®¹å™¨èµ„æºä½¿ç”¨
echo ""
echo "3. å®¹å™¨èµ„æºä½¿ç”¨..."
docker stats yyc3-web --no-stream

# 4. æ£€æŸ¥å®¹å™¨è¿›ç¨‹
echo ""
echo "4. å®¹å™¨è¿›ç¨‹..."
docker top yyc3-web

# 5. æ£€æŸ¥å®¹å™¨ç½‘ç»œ
echo ""
echo "5. å®¹å™¨ç½‘ç»œ..."
docker inspect yyc3-web | jq '.[0].NetworkSettings.Networks'

# 6. è¿›å…¥å®¹å™¨è°ƒè¯•
echo ""
echo "6. è¿›å…¥å®¹å™¨è°ƒè¯•..."
docker exec -it yyc3-web sh
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs yyc3-web -f

# 2. é‡å¯å®¹å™¨
docker restart yyc3-web

# 3. åˆ é™¤å¹¶é‡æ–°åˆ›å»ºå®¹å™¨
docker stop yyc3-web
docker rm yyc3-web
docker run -d --name yyc3-web -p 3200:3200 yyc3-web:latest

# 4. æ£€æŸ¥å®¹å™¨å¥åº·çŠ¶æ€
docker inspect yyc3-web | jq '.[0].State.Health'

# 5. è°ƒæ•´èµ„æºé™åˆ¶
docker run -d \
  --name yyc3-web \
  --memory="512m" \
  --cpus="1.0" \
  -p 3200:3200 \
  yyc3-web:latest
```

### 3.3 èµ„æºé™åˆ¶é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- å®¹å™¨è¢«OOMæ€æ­»
- å®¹å™¨æ€§èƒ½ä¸‹é™
- å®¹å™¨æ— æ³•å¯åŠ¨

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# å®¹å™¨èµ„æºæ’æŸ¥è„šæœ¬

echo "=== å®¹å™¨èµ„æºæ’æŸ¥ ==="

# 1. æ£€æŸ¥å®¹å™¨èµ„æºé™åˆ¶
echo "1. å®¹å™¨èµ„æºé™åˆ¶..."
docker inspect yyc3-web | jq '.[0].HostConfig | {Memory, CpuShares, CpuQuota}'

# 2. æ£€æŸ¥å®¹å™¨èµ„æºä½¿ç”¨
echo ""
echo "2. å®¹å™¨èµ„æºä½¿ç”¨..."
docker stats yyc3-web --no-stream

# 3. æ£€æŸ¥ç³»ç»Ÿå†…å­˜
echo ""
echo "3. ç³»ç»Ÿå†…å­˜..."
free -h

# 4. æ£€æŸ¥ç³»ç»ŸCPU
echo ""
echo "4. ç³»ç»ŸCPU..."
top -bn1 | head -20

# 5. æ£€æŸ¥OOMæ—¥å¿—
echo ""
echo "5. OOMæ—¥å¿—..."
dmesg | grep -i "out of memory"
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. è°ƒæ•´å†…å­˜é™åˆ¶
docker update --memory="1g" yyc3-web

# 2. è°ƒæ•´CPUé™åˆ¶
docker update --cpus="2.0" yyc3-web

# 3. æ·»åŠ äº¤æ¢ç©ºé—´
dd if=/dev/zero of=/swapfile bs=1M count=2048
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile

# 4. ä¼˜åŒ–åº”ç”¨å†…å­˜ä½¿ç”¨
# åœ¨åº”ç”¨ä¸­å®ç°å†…å­˜ç›‘æ§å’Œé™åˆ¶
```

---

## 4. Kubernetesé—®é¢˜æ’æŸ¥

### 4.1 PodçŠ¶æ€å¼‚å¸¸

**é—®é¢˜ç—‡çŠ¶**
- Podå¤„äºPendingçŠ¶æ€
- Podå¤„äºCrashLoopBackOffçŠ¶æ€
- Podå¤„äºImagePullBackOffçŠ¶æ€

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# PodçŠ¶æ€æ’æŸ¥è„šæœ¬

NAMESPACE=${1:-"yyc3-production"}

echo "=== PodçŠ¶æ€æ’æŸ¥ ==="
echo "å‘½åç©ºé—´: $NAMESPACE"
echo ""

# 1. æ£€æŸ¥PodçŠ¶æ€
echo "1. PodçŠ¶æ€..."
kubectl get pods -n $NAMESPACE

# 2. æ£€æŸ¥Podè¯¦æƒ…
echo ""
echo "2. Podè¯¦æƒ…..."
kubectl describe pod -n $NAMESPACE -l app=yyc3-web

# 3. æ£€æŸ¥Podæ—¥å¿—
echo ""
echo "3. Podæ—¥å¿—..."
kubectl logs -n $NAMESPACE -l app=yyc3-web --tail=100

# 4. æ£€æŸ¥Podäº‹ä»¶
echo ""
echo "4. Podäº‹ä»¶..."
kubectl get events -n $NAMESPACE --sort-by='.lastTimestamp'

# 5. æ£€æŸ¥Podèµ„æºä½¿ç”¨
echo ""
echo "5. Podèµ„æºä½¿ç”¨..."
kubectl top pods -n $NAMESPACE
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. PendingçŠ¶æ€å¤„ç†
# æ£€æŸ¥è°ƒåº¦å¤±è´¥åŸå› 
kubectl describe pod <pod-name> -n <namespace>

# æ£€æŸ¥èŠ‚ç‚¹èµ„æº
kubectl describe nodes

# æ£€æŸ¥æ±¡ç‚¹å’Œå®¹å¿åº¦
kubectl get nodes -o custom-columns=NAME:.metadata.name,TAINTS:.spec.taints

# 2. CrashLoopBackOffçŠ¶æ€å¤„ç†
# æŸ¥çœ‹Podæ—¥å¿—
kubectl logs <pod-name> -n <namespace> --previous

# æ£€æŸ¥å¥åº·æ£€æŸ¥é…ç½®
kubectl get pod <pod-name> -n <namespace> -o yaml | grep -A 10 livenessProbe

# 3. ImagePullBackOffçŠ¶æ€å¤„ç†
# æ£€æŸ¥é•œåƒåç§°å’Œæ ‡ç­¾
kubectl get pod <pod-name> -n <namespace> -o yaml | grep image:

# æ£€æŸ¥é•œåƒä»“åº“è®¿é—®
docker pull <image-name>

# 4. åˆ é™¤å¹¶é‡æ–°åˆ›å»ºPod
kubectl delete pod <pod-name> -n <namespace>
```

### 4.2 Serviceé—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- Serviceæ— æ³•è®¿é—®
- Serviceè´Ÿè½½å‡è¡¡ä¸å·¥ä½œ
- Service DNSè§£æå¤±è´¥

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# Serviceæ’æŸ¥è„šæœ¬

NAMESPACE=${1:-"yyc3-production"}

echo "=== Serviceæ’æŸ¥ ==="
echo "å‘½åç©ºé—´: $NAMESPACE"
echo ""

# 1. æ£€æŸ¥ServiceçŠ¶æ€
echo "1. ServiceçŠ¶æ€..."
kubectl get svc -n $NAMESPACE

# 2. æ£€æŸ¥Serviceè¯¦æƒ…
echo ""
echo "2. Serviceè¯¦æƒ…..."
kubectl describe svc yyc3-web -n $NAMESPACE

# 3. æ£€æŸ¥Serviceç«¯ç‚¹
echo ""
echo "3. Serviceç«¯ç‚¹..."
kubectl get endpoints yyc3-web -n $NAMESPACE

# 4. æ£€æŸ¥Service DNS
echo ""
echo "4. Service DNS..."
kubectl run -it --rm debug --image=busybox --restart=Never -- nslookup yyc3-web.$NAMESPACE.svc.cluster.local

# 5. æµ‹è¯•Serviceè¿æ¥
echo ""
echo "5. æµ‹è¯•Serviceè¿æ¥..."
kubectl run -it --rm debug --image=busybox --restart=Never -- wget -O- http://yyc3-web.$NAMESPACE.svc.cluster.local:3200/health
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æ£€æŸ¥Serviceé€‰æ‹©å™¨
kubectl get svc yyc3-web -n <namespace> -o yaml | grep selector

# 2. æ£€æŸ¥Podæ ‡ç­¾
kubectl get pods -n <namespace> -l app=yyc3-web --show-labels

# 3. æ£€æŸ¥ç«¯å£é…ç½®
kubectl get svc yyc3-web -n <namespace> -o yaml | grep -A 5 ports

# 4. ä¿®å¤Serviceé…ç½®
kubectl patch svc yyc3-web -n <namespace> -p '{"spec":{"selector":{"app":"yyc3-web"}}}'

# 5. é‡å¯Service
kubectl delete svc yyc3-web -n <namespace>
kubectl apply -f service.yaml
```

### 4.3 Ingressé—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- Ingressæ— æ³•è®¿é—®
- Ingressè·¯ç”±ä¸å·¥ä½œ
- Ingressè¯ä¹¦é—®é¢˜

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# Ingressæ’æŸ¥è„šæœ¬

NAMESPACE=${1:-"yyc3-production"}

echo "=== Ingressæ’æŸ¥ ==="
echo "å‘½åç©ºé—´: $NAMESPACE"
echo ""

# 1. æ£€æŸ¥IngressçŠ¶æ€
echo "1. IngressçŠ¶æ€..."
kubectl get ingress -n $NAMESPACE

# 2. æ£€æŸ¥Ingressè¯¦æƒ…
echo ""
echo "2. Ingressè¯¦æƒ…..."
kubectl describe ingress yyc3-web -n $NAMESPACE

# 3. æ£€æŸ¥Ingress Controller
echo ""
echo "3. Ingress Controller..."
kubectl get pods -n ingress-nginx

# 4. æ£€æŸ¥Ingress Controlleræ—¥å¿—
echo ""
echo "4. Ingress Controlleræ—¥å¿—..."
kubectl logs -n ingress-nginx -l app.kubernetes.io/name=ingress-nginx --tail=100

# 5. æµ‹è¯•Ingressè®¿é—®
echo ""
echo "5. æµ‹è¯•Ingressè®¿é—®..."
curl -I https://yyc3.example.com
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æ£€æŸ¥Ingressè§„åˆ™
kubectl get ingress yyc3-web -n <namespace> -o yaml | grep -A 10 rules

# 2. æ£€æŸ¥Serviceåç«¯
kubectl get svc -n <namespace>

# 3. æ£€æŸ¥è¯ä¹¦
kubectl get secret -n <namespace>

# 4. ä¿®å¤Ingressé…ç½®
kubectl apply -f ingress.yaml

# 5. é‡å¯Ingress Controller
kubectl rollout restart deployment/ingress-nginx-controller -n ingress-nginx
```

---

## 5. ç½‘ç»œé—®é¢˜æ’æŸ¥

### 5.1 è¿æ¥è¶…æ—¶é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- æ— æ³•è®¿é—®æœåŠ¡
- è¿æ¥è¶…æ—¶
- è¯·æ±‚å¤±è´¥

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# ç½‘ç»œè¿æ¥æ’æŸ¥è„šæœ¬

echo "=== ç½‘ç»œè¿æ¥æ’æŸ¥ ==="

# 1. æ£€æŸ¥ç½‘ç»œæ¥å£
echo "1. ç½‘ç»œæ¥å£..."
ip addr show

# 2. æ£€æŸ¥è·¯ç”±è¡¨
echo ""
echo "2. è·¯ç”±è¡¨..."
ip route show

# 3. æ£€æŸ¥DNSè§£æ
echo ""
echo "3. DNSè§£æ..."
nslookup yyc3.example.com

# 4. æ£€æŸ¥ç«¯å£ç›‘å¬
echo ""
echo "4. ç«¯å£ç›‘å¬..."
netstat -tuln | grep 3200

# 5. æµ‹è¯•ç½‘ç»œè¿é€šæ€§
echo ""
echo "5. ç½‘ç»œè¿é€šæ€§..."
ping -c 3 yyc3.example.com

# 6. æµ‹è¯•ç«¯å£è¿æ¥
echo ""
echo "6. ç«¯å£è¿æ¥..."
telnet yyc3.example.com 3200

# 7. æµ‹è¯•HTTPè¿æ¥
echo ""
echo "7. HTTPè¿æ¥..."
curl -v http://yyc3.example.com:3200/health
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
iptables -L -n

# 2. æ£€æŸ¥SELinuxçŠ¶æ€
getenforce

# 3. å¼€æ”¾ç«¯å£
firewall-cmd --add-port=3200/tcp --permanent
firewall-cmd --reload

# 4. ä¿®æ”¹DNSé…ç½®
vim /etc/resolv.conf

# 5. æ·»åŠ è·¯ç”±
ip route add 10.0.0.0/24 via 192.168.1.1
```

### 5.2 DNSè§£æé—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- åŸŸåæ— æ³•è§£æ
- DNSæŸ¥è¯¢è¶…æ—¶
- è§£æç»“æœä¸æ­£ç¡®

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# DNSæ’æŸ¥è„šæœ¬

echo "=== DNSæ’æŸ¥ ==="

# 1. æ£€æŸ¥DNSé…ç½®
echo "1. DNSé…ç½®..."
cat /etc/resolv.conf

# 2. æ£€æŸ¥DNSè§£æ
echo ""
echo "2. DNSè§£æ..."
nslookup yyc3.example.com

# 3. æ£€æŸ¥DNSæœåŠ¡å™¨
echo ""
echo "3. DNSæœåŠ¡å™¨..."
dig @8.8.8.8 yyc3.example.com

# 4. æ£€æŸ¥DNSç¼“å­˜
echo ""
echo "4. DNSç¼“å­˜..."
systemd-resolve --statistics

# 5. æµ‹è¯•DNSè§£æé€Ÿåº¦
echo ""
echo "5. DNSè§£æé€Ÿåº¦..."
time nslookup yyc3.example.com
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. ä¿®æ”¹DNSæœåŠ¡å™¨
vim /etc/resolv.conf

# æ·»åŠ Google DNS
nameserver 8.8.8.8
nameserver 8.8.4.4

# 2. æ¸…é™¤DNSç¼“å­˜
# systemd-resolved
systemd-resolve --flush-caches

# dnsmasq
systemctl restart dnsmasq

# 3. æ£€æŸ¥hostsæ–‡ä»¶
cat /etc/hosts

# 4. æ·»åŠ hostsè®°å½•
echo "192.168.1.100 yyc3.example.com" >> /etc/hosts
```

### 5.3 ç«¯å£å†²çªé—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- æœåŠ¡æ— æ³•å¯åŠ¨
- ç«¯å£å·²è¢«å ç”¨
- ç»‘å®šå¤±è´¥

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# ç«¯å£å†²çªæ’æŸ¥è„šæœ¬

echo "=== ç«¯å£å†²çªæ’æŸ¥ ==="

# 1. æ£€æŸ¥ç«¯å£å ç”¨
echo "1. ç«¯å£å ç”¨..."
netstat -tuln | grep 3200

# 2. æ£€æŸ¥è¿›ç¨‹å ç”¨
echo ""
echo "2. è¿›ç¨‹å ç”¨..."
lsof -i :3200

# 3. æ£€æŸ¥ç«¯å£èŒƒå›´
echo ""
echo "3. ç«¯å£èŒƒå›´..."
sysctl net.ipv4.ip_local_port_range

# 4. æ£€æŸ¥TIME_WAITè¿æ¥
echo ""
echo "4. TIME_WAITè¿æ¥..."
netstat -an | grep TIME_WAIT | wc -l

# 5. æ£€æŸ¥ç«¯å£ç›‘å¬
echo ""
echo "5. ç«¯å£ç›‘å¬..."
ss -tuln | grep 3200
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :3200

# 2. ç»ˆæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
kill -9 <PID>

# 3. ä¿®æ”¹åº”ç”¨ç«¯å£
# åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ç«¯å£å·
PORT=3201

# 4. è°ƒæ•´ç«¯å£èŒƒå›´
sysctl -w net.ipv4.ip_local_port_range="1024 65535"

# 5. ä¼˜åŒ–TIME_WAITè¿æ¥
sysctl -w net.ipv4.tcp_tw_reuse=1
sysctl -w net.ipv4.tcp_fin_timeout=30
```

---

## 6. å­˜å‚¨é—®é¢˜æ’æŸ¥

### 6.1 æŒ‚è½½å¤±è´¥é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- Podæ— æ³•å¯åŠ¨
- å­˜å‚¨å·æ— æ³•æŒ‚è½½
- æ•°æ®æ— æ³•è®¿é—®

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# å­˜å‚¨æŒ‚è½½æ’æŸ¥è„šæœ¬

NAMESPACE=${1:-"yyc3-production"}

echo "=== å­˜å‚¨æŒ‚è½½æ’æŸ¥ ==="
echo "å‘½åç©ºé—´: $NAMESPACE"
echo ""

# 1. æ£€æŸ¥PVçŠ¶æ€
echo "1. PVçŠ¶æ€..."
kubectl get pv

# 2. æ£€æŸ¥PVCçŠ¶æ€
echo ""
echo "2. PVCçŠ¶æ€..."
kubectl get pvc -n $NAMESPACE

# 3. æ£€æŸ¥StorageClass
echo ""
echo "3. StorageClass..."
kubectl get storageclass

# 4. æ£€æŸ¥PodæŒ‚è½½
echo ""
echo "4. PodæŒ‚è½½..."
kubectl get pod -n $NAMESPACE -o jsonpath='{.items[*].spec.volumes[*].name}'

# 5. æ£€æŸ¥å­˜å‚¨äº‹ä»¶
echo ""
echo "5. å­˜å‚¨äº‹ä»¶..."
kubectl get events -n $NAMESPACE --field-selector reason=FailedMount
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æ£€æŸ¥PVç»‘å®šçŠ¶æ€
kubectl get pv <pv-name> -o yaml | grep -A 5 status

# 2. æ£€æŸ¥PVCç»‘å®šçŠ¶æ€
kubectl get pvc <pvc-name> -n <namespace> -o yaml | grep -A 5 status

# 3. é‡æ–°åˆ›å»ºPVC
kubectl delete pvc <pvc-name> -n <namespace>
kubectl apply -f pvc.yaml

# 4. æ£€æŸ¥å­˜å‚¨ç±»é…ç½®
kubectl get storageclass <storage-class-name> -o yaml

# 5. æ£€æŸ¥èŠ‚ç‚¹å­˜å‚¨
df -h
```

### 6.2 å®¹é‡ä¸è¶³é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- æ— æ³•å†™å…¥æ•°æ®
- ç£ç›˜ç©ºé—´ä¸è¶³
- æ€§èƒ½ä¸‹é™

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# å­˜å‚¨å®¹é‡æ’æŸ¥è„šæœ¬

echo "=== å­˜å‚¨å®¹é‡æ’æŸ¥ ==="

# 1. æ£€æŸ¥ç£ç›˜ä½¿ç”¨
echo "1. ç£ç›˜ä½¿ç”¨..."
df -h

# 2. æ£€æŸ¥ç›®å½•å¤§å°
echo ""
echo "2. ç›®å½•å¤§å°..."
du -sh /var/lib/docker /var/log /tmp

# 3. æ£€æŸ¥inodeä½¿ç”¨
echo ""
echo "3. inodeä½¿ç”¨..."
df -i

# 4. æ£€æŸ¥å¤§æ–‡ä»¶
echo ""
echo "4. å¤§æ–‡ä»¶..."
find / -type f -size +1G 2>/dev/null | head -10

# 5. æ£€æŸ¥æ—¥å¿—å¤§å°
echo ""
echo "5. æ—¥å¿—å¤§å°..."
du -sh /var/log/*
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æ¸…ç†æ—¥å¿—æ–‡ä»¶
find /var/log -type f -name "*.log" -mtime +7 -delete

# 2. æ¸…ç†Dockerèµ„æº
docker system prune -a

# 3. æ¸…ç†ä¸´æ—¶æ–‡ä»¶
rm -rf /tmp/*

# 4. æ‰©å±•ç£ç›˜å®¹é‡
# LVMæ‰©å±•
lvextend -L +10G /dev/mapper/vg0-lv0
resize2fs /dev/mapper/vg0-lv0

# 5. å‹ç¼©æ—¥å¿—
logrotate -f /etc/logrotate.conf
```

### 6.3 æƒé™é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- æ— æ³•è¯»å†™æ–‡ä»¶
- æƒé™è¢«æ‹’ç»
- è®¿é—®å¤±è´¥

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# å­˜å‚¨æƒé™æ’æŸ¥è„šæœ¬

echo "=== å­˜å‚¨æƒé™æ’æŸ¥ ==="

# 1. æ£€æŸ¥æ–‡ä»¶æƒé™
echo "1. æ–‡ä»¶æƒé™..."
ls -la /data

# 2. æ£€æŸ¥ç›®å½•æƒé™
echo ""
echo "2. ç›®å½•æƒé™..."
ls -ld /data

# 3. æ£€æŸ¥ç”¨æˆ·ç»„
echo ""
echo "3. ç”¨æˆ·ç»„..."
groups

# 4. æ£€æŸ¥SELinuxä¸Šä¸‹æ–‡
echo ""
echo "4. SELinuxä¸Šä¸‹æ–‡..."
ls -Z /data

# 5. æ£€æŸ¥æŒ‚è½½é€‰é¡¹
echo ""
echo "5. æŒ‚è½½é€‰é¡¹..."
mount | grep /data
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. ä¿®æ”¹æ–‡ä»¶æƒé™
chmod 755 /data

# 2. ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…
chown -R yyc3:yyc3 /data

# 3. ä¿®æ”¹SELinuxä¸Šä¸‹æ–‡
chcon -R -t svirt_sandbox_file_t /data

# 4. ä¿®æ”¹æŒ‚è½½é€‰é¡¹
mount -o remount,rw /data

# 5. æ·»åŠ ç”¨æˆ·åˆ°ç»„
usermod -a -G yyc3 yyc3
```

---

## 7. åº”ç”¨é—®é¢˜æ’æŸ¥

### 7.1 åº”ç”¨å¯åŠ¨å¤±è´¥

**é—®é¢˜ç—‡çŠ¶**
- åº”ç”¨æ— æ³•å¯åŠ¨
- å¯åŠ¨æŠ¥é”™
- å¯åŠ¨è¶…æ—¶

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# åº”ç”¨å¯åŠ¨æ’æŸ¥è„šæœ¬

echo "=== åº”ç”¨å¯åŠ¨æ’æŸ¥ ==="

# 1. æ£€æŸ¥åº”ç”¨è¿›ç¨‹
echo "1. åº”ç”¨è¿›ç¨‹..."
ps aux | grep node

# 2. æ£€æŸ¥åº”ç”¨æ—¥å¿—
echo ""
echo "2. åº”ç”¨æ—¥å¿—..."
tail -100 /var/log/yyc3/application.log

# 3. æ£€æŸ¥åº”ç”¨é…ç½®
echo ""
echo "3. åº”ç”¨é…ç½®..."
cat /etc/yyc3/config.json

# 4. æ£€æŸ¥ç¯å¢ƒå˜é‡
echo ""
echo "4. ç¯å¢ƒå˜é‡..."
env | grep -E "NODE_ENV|PORT|DATABASE_URL"

# 5. æ£€æŸ¥ç«¯å£ç›‘å¬
echo ""
echo "5. ç«¯å£ç›‘å¬..."
netstat -tuln | grep 3200
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f /var/log/yyc3/application.log

# 2. æ£€æŸ¥åº”ç”¨é…ç½®
cat /etc/yyc3/config.json | jq .

# 3. é‡å¯åº”ç”¨
systemctl restart yyc3-web

# 4. æ‰‹åŠ¨å¯åŠ¨åº”ç”¨
cd /opt/yyc3-web
npm start

# 5. è°ƒè¯•æ¨¡å¼å¯åŠ¨
NODE_ENV=development npm start
```

### 7.2 åº”ç”¨è¿è¡Œæ—¶é”™è¯¯

**é—®é¢˜ç—‡çŠ¶**
- åº”ç”¨æŠ¥é”™
- åŠŸèƒ½å¼‚å¸¸
- æ€§èƒ½ä¸‹é™

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# åº”ç”¨è¿è¡Œæ—¶æ’æŸ¥è„šæœ¬

echo "=== åº”ç”¨è¿è¡Œæ—¶æ’æŸ¥ ==="

# 1. æ£€æŸ¥åº”ç”¨æ—¥å¿—
echo "1. åº”ç”¨æ—¥å¿—..."
tail -100 /var/log/yyc3/application.log | grep -i error

# 2. æ£€æŸ¥åº”ç”¨æ€§èƒ½
echo ""
echo "2. åº”ç”¨æ€§èƒ½..."
curl -w "@curl-format.txt" -o /dev/null -s http://localhost:3200/health

# 3. æ£€æŸ¥åº”ç”¨è¿æ¥
echo ""
echo "3. åº”ç”¨è¿æ¥..."
netstat -an | grep 3200 | head -10

# 4. æ£€æŸ¥åº”ç”¨èµ„æº
echo ""
echo "4. åº”ç”¨èµ„æº..."
ps aux | grep node | grep yyc3

# 5. æ£€æŸ¥åº”ç”¨ä¾èµ–
echo ""
echo "5. åº”ç”¨ä¾èµ–..."
cd /opt/yyc3-web
npm list --depth=0
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f /var/log/yyc3/application.log | grep -i error

# 2. æ£€æŸ¥åº”ç”¨å¥åº·çŠ¶æ€
curl http://localhost:3200/health

# 3. é‡å¯åº”ç”¨
systemctl restart yyc3-web

# 4. æ›´æ–°åº”ç”¨ä¾èµ–
cd /opt/yyc3-web
npm update

# 5. å›æ»šåº”ç”¨ç‰ˆæœ¬
cd /opt/yyc3-web
git checkout v1.0.0
npm install
systemctl restart yyc3-web
```

### 7.3 é…ç½®é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- é…ç½®ä¸ç”Ÿæ•ˆ
- é…ç½®é”™è¯¯
- è¡Œä¸ºå¼‚å¸¸

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# åº”ç”¨é…ç½®æ’æŸ¥è„šæœ¬

echo "=== åº”ç”¨é…ç½®æ’æŸ¥ ==="

# 1. æ£€æŸ¥é…ç½®æ–‡ä»¶
echo "1. é…ç½®æ–‡ä»¶..."
cat /etc/yyc3/config.json

# 2. æ£€æŸ¥ç¯å¢ƒå˜é‡
echo ""
echo "2. ç¯å¢ƒå˜é‡..."
env | sort

# 3. æ£€æŸ¥é…ç½®å·®å¼‚
echo ""
echo "3. é…ç½®å·®å¼‚..."
diff /etc/yyc3/config.json /etc/yyc3/config.json.bak

# 4. éªŒè¯é…ç½®è¯­æ³•
echo ""
echo "4. é…ç½®è¯­æ³•..."
cat /etc/yyc3/config.json | jq empty

# 5. æ£€æŸ¥é…ç½®æƒé™
echo ""
echo "5. é…ç½®æƒé™..."
ls -la /etc/yyc3/config.json
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. å¤‡ä»½å½“å‰é…ç½®
cp /etc/yyc3/config.json /etc/yyc3/config.json.bak

# 2. ç¼–è¾‘é…ç½®æ–‡ä»¶
vim /etc/yyc3/config.json

# 3. éªŒè¯é…ç½®
cat /etc/yyc3/config.json | jq empty

# 4. é‡å¯åº”ç”¨
systemctl restart yyc3-web

# 5. éªŒè¯é…ç½®ç”Ÿæ•ˆ
curl http://localhost:3200/config
```

---

## 8. æ€§èƒ½é—®é¢˜æ’æŸ¥

### 8.1 å“åº”æ…¢é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- é¡µé¢åŠ è½½æ…¢
- APIå“åº”æ…¢
- ç”¨æˆ·ä½“éªŒå·®

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# æ€§èƒ½æ’æŸ¥è„šæœ¬

echo "=== æ€§èƒ½æ’æŸ¥ ==="

# 1. æ£€æŸ¥å“åº”æ—¶é—´
echo "1. å“åº”æ—¶é—´..."
curl -w "@curl-format.txt" -o /dev/null -s http://localhost:3200/health

# 2. æ£€æŸ¥CPUä½¿ç”¨
echo ""
echo "2. CPUä½¿ç”¨..."
top -bn1 | grep node

# 3. æ£€æŸ¥å†…å­˜ä½¿ç”¨
echo ""
echo "3. å†…å­˜ä½¿ç”¨..."
ps aux | grep node | grep yyc3

# 4. æ£€æŸ¥ç£ç›˜IO
echo ""
echo "4. ç£ç›˜IO..."
iostat -x 1 3

# 5. æ£€æŸ¥ç½‘ç»œIO
echo ""
echo "5. ç½‘ç»œIO..."
sar -n DEV 1 3
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. ä¼˜åŒ–åº”ç”¨ä»£ç 
# æ·»åŠ ç¼“å­˜
# ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
# ä½¿ç”¨CDN

# 2. å¢åŠ èµ„æº
# å¢åŠ CPU
# å¢åŠ å†…å­˜
# å¢åŠ å¸¦å®½

# 3. ä½¿ç”¨è´Ÿè½½å‡è¡¡
# é…ç½®Nginxè´Ÿè½½å‡è¡¡
# é…ç½®Kubernetes Service

# 4. å¯ç”¨å‹ç¼©
# å¯ç”¨Gzipå‹ç¼©
# å¯ç”¨Brotliå‹ç¼©

# 5. ä½¿ç”¨CDN
# é…ç½®CDNåŠ é€Ÿ
# é¢„åŠ è½½é™æ€èµ„æº
```

### 8.2 ååé‡ä½é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- å¹¶å‘èƒ½åŠ›å·®
- è¯·æ±‚å¤„ç†æ…¢
- ç³»ç»Ÿè´Ÿè½½é«˜

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# ååé‡æ’æŸ¥è„šæœ¬

echo "=== ååé‡æ’æŸ¥ ==="

# 1. å‹åŠ›æµ‹è¯•
echo "1. å‹åŠ›æµ‹è¯•..."
ab -n 1000 -c 10 http://localhost:3200/health

# 2. æ£€æŸ¥è¿æ¥æ•°
echo ""
echo "2. è¿æ¥æ•°..."
netstat -an | grep 3200 | wc -l

# 3. æ£€æŸ¥è¯·æ±‚é˜Ÿåˆ—
echo ""
echo "3. è¯·æ±‚é˜Ÿåˆ—..."
ss -ltn | grep 3200

# 4. æ£€æŸ¥ç³»ç»Ÿè´Ÿè½½
echo ""
echo "4. ç³»ç»Ÿè´Ÿè½½..."
uptime

# 5. æ£€æŸ¥è¿›ç¨‹æ•°
echo ""
echo "5. è¿›ç¨‹æ•°..."
ps aux | wc -l
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. å¢åŠ åº”ç”¨å®ä¾‹
# ä½¿ç”¨Docker Composeæ‰©å±•
docker-compose up -d --scale yyc3-web=3

# ä½¿ç”¨Kubernetesæ‰©å±•
kubectl scale deployment yyc3-web --replicas=3

# 2. ä¼˜åŒ–åº”ç”¨ä»£ç 
# ä½¿ç”¨å¼‚æ­¥å¤„ç†
# ä½¿ç”¨è¿æ¥æ± 
# ä½¿ç”¨ç¼“å­˜

# 3. ä¼˜åŒ–æ•°æ®åº“
# æ·»åŠ ç´¢å¼•
# ä¼˜åŒ–æŸ¥è¯¢
# ä½¿ç”¨è¯»å†™åˆ†ç¦»

# 4. ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—
# ä½¿ç”¨Redisé˜Ÿåˆ—
# ä½¿ç”¨RabbitMQ
# ä½¿ç”¨Kafka

# 5. ä½¿ç”¨CDN
# é…ç½®CDNåŠ é€Ÿ
# é¢„åŠ è½½é™æ€èµ„æº
```

### 8.3 èµ„æºå ç”¨é«˜é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- CPUå ç”¨é«˜
- å†…å­˜å ç”¨é«˜
- ç£ç›˜å ç”¨é«˜

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# èµ„æºå ç”¨æ’æŸ¥è„šæœ¬

echo "=== èµ„æºå ç”¨æ’æŸ¥ ==="

# 1. æ£€æŸ¥CPUä½¿ç”¨
echo "1. CPUä½¿ç”¨..."
top -bn1 | head -20

# 2. æ£€æŸ¥å†…å­˜ä½¿ç”¨
echo ""
echo "2. å†…å­˜ä½¿ç”¨..."
free -h

# 3. æ£€æŸ¥ç£ç›˜ä½¿ç”¨
echo ""
echo "3. ç£ç›˜ä½¿ç”¨..."
df -h

# 4. æ£€æŸ¥è¿›ç¨‹èµ„æº
echo ""
echo "4. è¿›ç¨‹èµ„æº..."
ps aux --sort=-%cpu | head -10
ps aux --sort=-%mem | head -10

# 5. æ£€æŸ¥è¿æ¥æ•°
echo ""
echo "5. è¿æ¥æ•°..."
netstat -an | wc -l
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. ä¼˜åŒ–åº”ç”¨ä»£ç 
# å‡å°‘å†…å­˜æ³„æ¼
# ä¼˜åŒ–ç®—æ³•
# ä½¿ç”¨ç¼“å­˜

# 2. é™åˆ¶èµ„æºä½¿ç”¨
# Dockerèµ„æºé™åˆ¶
docker run -m 512m --cpus="1.0" yyc3-web

# Kubernetesèµ„æºé™åˆ¶
resources:
  limits:
    memory: "512Mi"
    cpu: "1"
  requests:
    memory: "256Mi"
    cpu: "0.5"

# 3. æ¸…ç†æ— ç”¨èµ„æº
# æ¸…ç†Dockeré•œåƒ
docker system prune -a

# æ¸…ç†æ—¥å¿—æ–‡ä»¶
find /var/log -type f -name "*.log" -mtime +7 -delete

# 4. ç›‘æ§èµ„æºä½¿ç”¨
# ä½¿ç”¨Prometheusç›‘æ§
# ä½¿ç”¨Grafanaå¯è§†åŒ–

# 5. è‡ªåŠ¨æ‰©ç¼©å®¹
# Kubernetes HPA
kubectl autoscale deployment yyc3-web --cpu-percent=80 --min=2 --max=10
```

---

## 9. å®‰å…¨é—®é¢˜æ’æŸ¥

### 9.1 æ¼æ´é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- å­˜åœ¨å®‰å…¨æ¼æ´
- ä¾èµ–ç‰ˆæœ¬è¿‡æ—§
- é…ç½®ä¸å½“

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# å®‰å…¨æ¼æ´æ’æŸ¥è„šæœ¬

echo "=== å®‰å…¨æ¼æ´æ’æŸ¥ ==="

# 1. æ£€æŸ¥npmæ¼æ´
echo "1. npmæ¼æ´..."
npm audit

# 2. æ£€æŸ¥Dockeré•œåƒæ¼æ´
echo ""
echo "2. Dockeré•œåƒæ¼æ´..."
trivy image yyc3-web:latest

# 3. æ£€æŸ¥ç³»ç»Ÿæ¼æ´
echo ""
echo "3. ç³»ç»Ÿæ¼æ´..."
apt-get update
apt-get audit

# 4. æ£€æŸ¥é…ç½®å®‰å…¨
echo ""
echo "4. é…ç½®å®‰å…¨..."
grep -r "password" /etc/yyc3/

# 5. æ£€æŸ¥æƒé™
echo ""
echo "5. æƒé™æ£€æŸ¥..."
ls -la /etc/yyc3/
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. ä¿®å¤npmæ¼æ´
npm audit fix

# 2. æ›´æ–°ä¾èµ–
npm update

# 3. æ›´æ–°Dockeré•œåƒ
docker pull yyc3-web:latest

# 4. æ›´æ–°ç³»ç»Ÿ
apt-get update
apt-get upgrade

# 5. ä¿®å¤é…ç½®
# ç§»é™¤ç¡¬ç¼–ç å¯†ç 
# ä½¿ç”¨ç¯å¢ƒå˜é‡
# ä½¿ç”¨å¯†é’¥ç®¡ç†
```

### 9.2 æƒé™é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- æƒé™è¿‡å¤§
- æƒé™ä¸è¶³
- æœªæˆæƒè®¿é—®

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# æƒé™æ’æŸ¥è„šæœ¬

echo "=== æƒé™æ’æŸ¥ ==="

# 1. æ£€æŸ¥ç”¨æˆ·æƒé™
echo "1. ç”¨æˆ·æƒé™..."
id

# 2. æ£€æŸ¥æ–‡ä»¶æƒé™
echo ""
echo "2. æ–‡ä»¶æƒé™..."
ls -la /etc/yyc3/

# 3. æ£€æŸ¥è¿›ç¨‹æƒé™
echo ""
echo "3. è¿›ç¨‹æƒé™..."
ps aux | grep yyc3

# 4. æ£€æŸ¥ç½‘ç»œæƒé™
echo ""
echo "4. ç½‘ç»œæƒé™..."
iptables -L -n

# 5. æ£€æŸ¥sudoæƒé™
echo ""
echo "5. sudoæƒé™..."
sudo -l
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æœ€å°æƒé™åŸåˆ™
# åªæˆäºˆå¿…è¦çš„æƒé™
chmod 644 /etc/yyc3/config.json
chown yyc3:yyc3 /etc/yyc3/config.json

# 2. ä½¿ç”¨érootç”¨æˆ·è¿è¡Œ
# Dockerfile
USER yyc3

# Kubernetes
securityContext:
  runAsNonRoot: true
  runAsUser: 1000

# 3. é™åˆ¶sudoæƒé™
# ç¼–è¾‘sudoers
visudo

# 4. ä½¿ç”¨RBAC
# Kubernetes RBAC
kubectl create rolebinding yyc3-admin \
  --clusterrole=admin \
  --user=yyc3 \
  --namespace=yyc3-production

# 5. å®¡è®¡æƒé™
# å®šæœŸå®¡æŸ¥æƒé™
# è®°å½•æƒé™å˜æ›´
```

### 9.3 é…ç½®å®‰å…¨é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**
- ç¡¬ç¼–ç å¯†ç 
- æ•æ„Ÿä¿¡æ¯æ³„éœ²
- é…ç½®ä¸å½“

**æ’æŸ¥æ­¥éª¤**
```bash
#!/bin/bash

# é…ç½®å®‰å…¨æ’æŸ¥è„šæœ¬

echo "=== é…ç½®å®‰å…¨æ’æŸ¥ ==="

# 1. æ£€æŸ¥ç¡¬ç¼–ç å¯†ç 
echo "1. ç¡¬ç¼–ç å¯†ç ..."
grep -r "password" /etc/yyc3/

# 2. æ£€æŸ¥æ•æ„Ÿä¿¡æ¯
echo ""
echo "2. æ•æ„Ÿä¿¡æ¯..."
grep -r "api_key\|secret\|token" /etc/yyc3/

# 3. æ£€æŸ¥é…ç½®æ–‡ä»¶æƒé™
echo ""
echo "3. é…ç½®æ–‡ä»¶æƒé™..."
ls -la /etc/yyc3/config.json

# 4. æ£€æŸ¥ç¯å¢ƒå˜é‡
echo ""
echo "4. ç¯å¢ƒå˜é‡..."
env | grep -i "password\|secret\|token"

# 5. æ£€æŸ¥æ—¥å¿—
echo ""
echo "5. æ—¥å¿—æ£€æŸ¥..."
grep -i "password\|secret\|token" /var/log/yyc3/application.log
```

**è§£å†³æ–¹æ¡ˆ**
```bash
# 1. ä½¿ç”¨ç¯å¢ƒå˜é‡
# .envæ–‡ä»¶
DATABASE_URL=postgresql://user:password@localhost:5432/db

# 2. ä½¿ç”¨å¯†é’¥ç®¡ç†
# Kubernetes Secrets
kubectl create secret generic yyc3-secret \
  --from-literal=database-url=postgresql://user:password@localhost:5432/db

# 3. ä½¿ç”¨Vault
# HashiCorp Vault
vault kv put secret/yyc3/database url=postgresql://user:password@localhost:5432/db

# 4. åŠ å¯†æ•æ„Ÿä¿¡æ¯
# ä½¿ç”¨opensslåŠ å¯†
echo "password" | openssl enc -aes-256-cbc -salt -out password.enc

# 5. å®¡è®¡é…ç½®
# å®šæœŸå®¡æŸ¥é…ç½®
# è®°å½•é…ç½®å˜æ›´
```

---

## 10. å¸¸è§é—®é¢˜FAQ

### 10.1 éƒ¨ç½²ç›¸å…³

**Q: éƒ¨ç½²å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**

A: æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š
```bash
# 1. æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
kubectl get deployment yyc3-web -n yyc3-production

# 2. æŸ¥çœ‹éƒ¨ç½²è¯¦æƒ…
kubectl describe deployment yyc3-web -n yyc3-production

# 3. æŸ¥çœ‹PodçŠ¶æ€
kubectl get pods -n yyc3-production

# 4. æŸ¥çœ‹Podæ—¥å¿—
kubectl logs -n yyc3-production -l app=yyc3-web

# 5. æŸ¥çœ‹äº‹ä»¶
kubectl get events -n yyc3-production
```

**Q: å¦‚ä½•å›æ»šéƒ¨ç½²ï¼Ÿ**

A: ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å›æ»šï¼š
```bash
# å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
kubectl rollout undo deployment/yyc3-web -n yyc3-production

# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
kubectl rollout undo deployment/yyc3-web -n yyc3-production --to-revision=2

# æŸ¥çœ‹å›æ»šå†å²
kubectl rollout history deployment/yyc3-web -n yyc3-production
```

**Q: å¦‚ä½•å¿«é€Ÿæ‰©å®¹ï¼Ÿ**

A: ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰©å®¹ï¼š
```bash
# æ‰‹åŠ¨æ‰©å®¹
kubectl scale deployment yyc3-web --replicas=5 -n yyc3-production

# è‡ªåŠ¨æ‰©å®¹
kubectl autoscale deployment yyc3-web --cpu-percent=80 --min=2 --max=10 -n yyc3-production
```

### 10.2 å®¹å™¨ç›¸å…³

**Q: å®¹å™¨æ— æ³•å¯åŠ¨æ€ä¹ˆåŠï¼Ÿ**

A: æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š
```bash
# 1. æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps -a

# 2. æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs yyc3-web

# 3. æŸ¥çœ‹å®¹å™¨è¯¦æƒ…
docker inspect yyc3-web

# 4. è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it yyc3-web sh

# 5. é‡æ–°åˆ›å»ºå®¹å™¨
docker stop yyc3-web
docker rm yyc3-web
docker run -d --name yyc3-web -p 3200:3200 yyc3-web:latest
```

**Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ**

A: ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¸…ç†ï¼š
```bash
# æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ
docker image prune -a

# æ¸…ç†æœªä½¿ç”¨çš„å®¹å™¨
docker container prune

# æ¸…ç†æœªä½¿ç”¨çš„å·
docker volume prune

# æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### 10.3 ç½‘ç»œç›¸å…³

**Q: æ— æ³•è®¿é—®æœåŠ¡æ€ä¹ˆåŠï¼Ÿ**

A: æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š
```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
kubectl get svc yyc3-web -n yyc3-production

# 2. æ£€æŸ¥æœåŠ¡ç«¯ç‚¹
kubectl get endpoints yyc3-web -n yyc3-production

# 3. æ£€æŸ¥PodçŠ¶æ€
kubectl get pods -n yyc3-production -l app=yyc3-web

# 4. æµ‹è¯•æœåŠ¡è¿æ¥
kubectl run -it --rm debug --image=busybox --restart=Never -- wget -O- http://yyc3-web.yyc3-production.svc.cluster.local:3200/health

# 5. æ£€æŸ¥ç½‘ç»œç­–ç•¥
kubectl get networkpolicies -n yyc3-production
```

**Q: DNSè§£æå¤±è´¥æ€ä¹ˆåŠï¼Ÿ**

A: æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š
```bash
# 1. æ£€æŸ¥DNSé…ç½®
cat /etc/resolv.conf

# 2. æµ‹è¯•DNSè§£æ
nslookup yyc3-web.yyc3-production.svc.cluster.local

# 3. æ£€æŸ¥CoreDNS
kubectl get pods -n kube-system -l k8s-app=kube-dns

# 4. æŸ¥çœ‹CoreDNSæ—¥å¿—
kubectl logs -n kube-system -l k8s-app=kube-dns

# 5. é‡å¯CoreDNS
kubectl rollout restart deployment/coredns -n kube-system
```

### 10.4 æ€§èƒ½ç›¸å…³

**Q: åº”ç”¨å“åº”æ…¢æ€ä¹ˆåŠï¼Ÿ**

A: æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š
```bash
# 1. æ£€æŸ¥å“åº”æ—¶é—´
curl -w "@curl-format.txt" -o /dev/null -s http://localhost:3200/health

# 2. æ£€æŸ¥èµ„æºä½¿ç”¨
kubectl top pods -n yyc3-production
kubectl top nodes

# 3. æ£€æŸ¥åº”ç”¨æ—¥å¿—
kubectl logs -n yyc3-production -l app=yyc3-web --tail=100

# 4. å‹åŠ›æµ‹è¯•
ab -n 1000 -c 10 http://localhost:3200/health

# 5. æ£€æŸ¥æ•°æ®åº“
# æ£€æŸ¥æ•°æ®åº“è¿æ¥
# æ£€æŸ¥æ•°æ®åº“æŸ¥è¯¢
# æ£€æŸ¥æ•°æ®åº“ç´¢å¼•
```

**Q: å†…å­˜å ç”¨é«˜æ€ä¹ˆåŠï¼Ÿ**

A: æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š
```bash
# 1. æ£€æŸ¥å†…å­˜ä½¿ç”¨
kubectl top pods -n yyc3-production

# 2. æ£€æŸ¥å†…å­˜é™åˆ¶
kubectl get pod -n yyc3-production -o jsonpath='{.items[*].spec.containers[*].resources}'

# 3. æ£€æŸ¥å†…å­˜æ³„æ¼
# ä½¿ç”¨heapdump
# ä½¿ç”¨memory profiler

# 4. ä¼˜åŒ–åº”ç”¨ä»£ç 
# å‡å°‘å†…å­˜æ³„æ¼
# ä½¿ç”¨ç¼“å­˜
# ä¼˜åŒ–æ•°æ®ç»“æ„

# 5. å¢åŠ å†…å­˜é™åˆ¶
kubectl set resources deployment yyc3-web --limits=memory=1Gi -n yyc3-production
```

---

## ğŸ“„ æ–‡æ¡£æ ‡å°¾

> ã€Œ***YanYuCloudCube***ã€
> ã€Œ***<admin@0379.email>***ã€
> ã€Œ***Words Initiate Quadrants, Language Serves as Core for Future***ã€
> ã€Œ***All things converge in cloud pivot; Deep stacks ignite a new era of intelligence***ã€




## æ¦‚è¿°

### æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›äº†å®ç”¨çš„æŠ€å·§å’Œæ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…æé«˜å·¥ä½œæ•ˆç‡å’Œä»£ç è´¨é‡ã€‚

#### é€‚ç”¨åœºæ™¯

- æ—¥å¸¸å¼€å‘å·¥ä½œ
- ä»£ç ä¼˜åŒ–å’Œé‡æ„
- é—®é¢˜æ’æŸ¥å’Œè°ƒè¯•
- æ€§èƒ½ä¼˜åŒ–å’Œè°ƒä¼˜

#### é¢„æœŸæ”¶ç›Š

- æé«˜å¼€å‘æ•ˆç‡
- å‡å°‘ä»£ç é”™è¯¯
- ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½
- æå‡ä»£ç å¯ç»´æŠ¤æ€§



## æ ¸å¿ƒæ¦‚å¿µ

### æ ¸å¿ƒæ¦‚å¿µ

#### å…³é”®æœ¯è¯­

- **æŠ€å·§**ï¼šç»è¿‡å®è·µéªŒè¯çš„æœ‰æ•ˆæ–¹æ³•
- **æœ€ä½³å®è·µ**ï¼šä¸šç•Œå…¬è®¤çš„ä¼˜ç§€åšæ³•
- **æ¨¡å¼**ï¼šå¯é‡å¤ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆ
- **åŸåˆ™**ï¼šæŒ‡å¯¼è®¾è®¡çš„åŸºæœ¬å‡†åˆ™

#### æ ¸å¿ƒåŸç†

1. **DRYåŸåˆ™**ï¼ˆDon't Repeat Yourselfï¼‰
   - é¿å…ä»£ç é‡å¤
   - æå–å…¬å…±é€»è¾‘
   - ä½¿ç”¨å‡½æ•°å’Œç±»å°è£…

2. **KISSåŸåˆ™**ï¼ˆKeep It Simple, Stupidï¼‰
   - ä¿æŒç®€å•
   - é¿å…è¿‡åº¦è®¾è®¡
   - ä¼˜å…ˆå¯è¯»æ€§

3. **YAGNIåŸåˆ™**ï¼ˆYou Aren't Gonna Need Itï¼‰
   - åªå®ç°å½“å‰éœ€è¦çš„åŠŸèƒ½
   - é¿å…è¿‡åº¦å·¥ç¨‹
   - ä¿æŒä»£ç ç²¾ç®€



## å®æ–½æ­¥éª¤

### å®æ–½æ­¥éª¤

#### æ­¥éª¤1ï¼šå‡†å¤‡å·¥ä½œ

```bash
# å®‰è£…å¿…è¦å·¥å…·
npm install -g typescript eslint prettier

# åˆå§‹åŒ–é¡¹ç›®
npm init -y
npm install --save-dev typescript @types/node
```

#### æ­¥éª¤2ï¼šé…ç½®ç¯å¢ƒ

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  }
}
```

#### æ­¥éª¤3ï¼šç¼–å†™ä»£ç 

```typescript
// åˆ›å»ºä¸»æ–‡ä»¶
// src/index.ts
function main() {
  console.log('Hello, YYCÂ³!');
}

main();
```

#### æ­¥éª¤4ï¼šæµ‹è¯•éªŒè¯

```bash
# è¿è¡Œä»£ç 
npm run dev

# è¿è¡Œæµ‹è¯•
npm test
```



## ä»£ç ç¤ºä¾‹

### ä»£ç ç¤ºä¾‹

#### ç¤ºä¾‹1ï¼šåŸºç¡€ç”¨æ³•

```typescript
// ç®€å•ç¤ºä¾‹
function greet(name: string): string {
  return `Hello, ${name}!`;
}

const message = greet('YYCÂ³');
console.log(message); // è¾“å‡º: Hello, YYCÂ³!
```

#### ç¤ºä¾‹2ï¼šé«˜çº§ç”¨æ³•

```typescript
// å¼‚æ­¥æ“ä½œ
async function fetchData(url: string): Promise<any> {
  const response = await fetch(url);
  const data = await response.json();
  return data;
}

// ä½¿ç”¨ç¤ºä¾‹
fetchData('https://api.example.com/data')
  .then(data => console.log(data))
  .catch(error => console.error('Error:', error));
```

#### ç¤ºä¾‹3ï¼šé”™è¯¯å¤„ç†

```typescript
// è‡ªå®šä¹‰é”™è¯¯ç±»
class ValidationError extends Error {
  constructor(public field: string, message: string) {
    super(message);
    this.name = 'ValidationError';
  }
}

// ä½¿ç”¨ç¤ºä¾‹
function validateEmail(email: string): void {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) {
    throw new ValidationError('email', 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®');
  }
}

try {
  validateEmail('invalid-email');
} catch (error) {
  if (error instanceof ValidationError) {
    console.error(`éªŒè¯å¤±è´¥: ${error.field} - ${error.message}`);
  }
}
```



## æ³¨æ„äº‹é¡¹

### æ³¨æ„äº‹é¡¹

#### å¸¸è§é™·é˜±

1. **å¼‚æ­¥æ“ä½œé”™è¯¯**
```typescript
// âŒ é”™è¯¯ï¼šæ²¡æœ‰ç­‰å¾…å¼‚æ­¥æ“ä½œ
async function processData() {
  const data = fetchData(); // å¿˜è®°await
  console.log(data); // è¾“å‡ºPromiseå¯¹è±¡
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨await
async function processData() {
  const data = await fetchData();
  console.log(data); // è¾“å‡ºå®é™…æ•°æ®
}
```

2. **å†…å­˜æ³„æ¼**
```typescript
// âŒ é”™è¯¯ï¼šæ²¡æœ‰æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
useEffect(() => {
  window.addEventListener('resize', handleResize);
}, []); // ç¼ºå°‘æ¸…ç†å‡½æ•°

// âœ… æ­£ç¡®ï¼šæ¸…ç†äº‹ä»¶ç›‘å¬å™¨
useEffect(() => {
  window.addEventListener('resize', handleResize);
  return () => {
    window.removeEventListener('resize', handleResize);
  };
}, []);
```

#### æ€§èƒ½æ³¨æ„äº‹é¡¹

1. **é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“**
```typescript
// âŒ é”™è¯¯ï¼šæ¯æ¬¡éƒ½åˆ›å»ºæ–°å¯¹è±¡
<Component data={{ value: 1 }} />

// âœ… æ­£ç¡®ï¼šä½¿ç”¨useMemoç¼“å­˜
const memoizedData = useMemo(() => ({ value: 1 }), []);
<Component data={memoizedData} />
```

2. **é¿å…å¤§å¯¹è±¡ä¼ é€’**
```typescript
// âŒ é”™è¯¯ï¼šä¼ é€’æ•´ä¸ªå¤§å¯¹è±¡
<Component user={user} />

// âœ… æ­£ç¡®ï¼šåªä¼ é€’éœ€è¦çš„å±æ€§
<Component userName={user.name} userId={user.id} />
```



## æœ€ä½³å®è·µ

### æœ€ä½³å®è·µ

#### ä»£ç è§„èŒƒ

1. **å‘½åè§„èŒƒ**
```typescript
// å˜é‡ï¼šcamelCase
const userName = 'John';

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;

// ç±»ï¼šPascalCase
class UserService { }

// æ¥å£ï¼šPascalCaseï¼Œå‰ç¼€Iï¼ˆå¯é€‰ï¼‰
interface IUserService { }
```

2. **æ³¨é‡Šè§„èŒƒ**
```typescript
/**
 * åˆ›å»ºç”¨æˆ·
 * @param email - ç”¨æˆ·é‚®ç®±
 * @param password - ç”¨æˆ·å¯†ç 
 * @returns åˆ›å»ºçš„ç”¨æˆ·å¯¹è±¡
 * @throws {Error} å½“é‚®ç®±å·²å­˜åœ¨æ—¶æŠ›å‡ºé”™è¯¯
 */
async function createUser(
  email: string, 
  password: string
): Promise<User> {
  // å®ç°
}
```

#### é”™è¯¯å¤„ç†

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
class AppError extends Error {
  constructor(
    public statusCode: number,
    public message: string,
    public isOperational = true
  ) {
    super(message);
    this.name = this.constructor.name;
    Error.captureStackTrace(this, this.constructor);
  }
}

// ä½¿ç”¨é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((err: Error, req: Request, res: Response, next: NextFunction) => {
  if (err instanceof AppError) {
    return res.status(err.statusCode).json({
      success: false,
      error: err.message
    });
  }
  
  // è®°å½•æœªé¢„æœŸçš„é”™è¯¯
  logger.error('Unexpected error:', err);
  
  return res.status(500).json({
    success: false,
    error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
  });
});
```

#### æ—¥å¿—è®°å½•

```typescript
// ç»“æ„åŒ–æ—¥å¿—
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

// ä½¿ç”¨æ—¥å¿—
logger.info('User created', { userId: user.id, email: user.email });
logger.error('Database connection failed', { error: error.message });
```



## å¸¸è§é—®é¢˜

### å¸¸è§é—®é¢˜

#### Q1: å¦‚ä½•å¤„ç†å¼‚æ­¥é”™è¯¯ï¼Ÿ

**A**: ä½¿ç”¨try-catchæ•è·å¼‚æ­¥é”™è¯¯ï¼š

```typescript
async function handleRequest() {
  try {
    const result = await fetchData();
    return result;
  } catch (error) {
    console.error('è¯·æ±‚å¤±è´¥:', error);
    throw error;
  }
}
```

#### Q2: å¦‚ä½•ä¼˜åŒ–Reactç»„ä»¶æ€§èƒ½ï¼Ÿ

**A**: ä½¿ç”¨ä»¥ä¸‹ä¼˜åŒ–æŠ€æœ¯ï¼š

1. **React.memo**ï¼šé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
2. **useMemo**ï¼šç¼“å­˜è®¡ç®—ç»“æœ
3. **useCallback**ï¼šç¼“å­˜å‡½æ•°å¼•ç”¨
4. **ä»£ç åˆ†å‰²**ï¼šæ‡’åŠ è½½ç»„ä»¶

```typescript
const MemoizedComponent = React.memo(({ data }) => {
  const processedData = useMemo(() => processData(data), [data]);
  return <div>{processedData}</div>;
});
```

#### Q3: å¦‚ä½•ç®¡ç†åº”ç”¨çŠ¶æ€ï¼Ÿ

**A**: æ ¹æ®åº”ç”¨å¤æ‚åº¦é€‰æ‹©åˆé€‚çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼š

1. **ç®€å•åº”ç”¨**ï¼šä½¿ç”¨React Context API
2. **ä¸­ç­‰åº”ç”¨**ï¼šä½¿ç”¨Zustandæˆ–Redux Toolkit
3. **å¤æ‚åº”ç”¨**ï¼šä½¿ç”¨Redux + ä¸­é—´ä»¶

```typescript
// Zustandç¤ºä¾‹
const useStore = create((set) => ({
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
  decrement: () => set((state) => ({ count: state.count - 1 }))
}));
```



## æ¡ˆä¾‹åˆ†æ

### æ¡ˆä¾‹åˆ†æ

#### æ¡ˆä¾‹1ï¼šæ€§èƒ½ä¼˜åŒ–

**é—®é¢˜**ï¼šé¡µé¢åŠ è½½æ—¶é—´è¿‡é•¿ï¼Œç”¨æˆ·ä½“éªŒå·®ã€‚

**åˆ†æ**ï¼š
- é¦–æ¬¡å†…å®¹ç»˜åˆ¶(FCP)ï¼š3.2ç§’
- æœ€å¤§å†…å®¹ç»˜åˆ¶(LCP)ï¼š5.8ç§’
- ç´¯ç§¯å¸ƒå±€åç§»(CLS)ï¼š0.25

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å®ç°ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
2. ä¼˜åŒ–å›¾ç‰‡åŠ è½½ï¼ˆä½¿ç”¨WebPæ ¼å¼ï¼Œæ·»åŠ loading="lazy"ï¼‰
3. å¯ç”¨Gzipå‹ç¼©
4. ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æº

**ç»“æœ**ï¼š
- FCPï¼š1.2ç§’ï¼ˆâ†“62.5%ï¼‰
- LCPï¼š2.1ç§’ï¼ˆâ†“63.8%ï¼‰
- CLSï¼š0.08ï¼ˆâ†“68%ï¼‰

#### æ¡ˆä¾‹2ï¼šé”™è¯¯å¤„ç†æ”¹è¿›

**é—®é¢˜**ï¼šé”™è¯¯ä¿¡æ¯ä¸æ¸…æ™°ï¼Œéš¾ä»¥å®šä½é—®é¢˜ã€‚

**åˆ†æ**ï¼š
- é”™è¯¯ä¿¡æ¯è¿‡äºç®€å•
- ç¼ºå°‘é”™è¯¯ä¸Šä¸‹æ–‡
- æ²¡æœ‰é”™è¯¯è¿½è¸ª

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å®ç°è‡ªå®šä¹‰é”™è¯¯ç±»
2. æ·»åŠ é”™è¯¯å †æ ˆè¿½è¸ª
3. é›†æˆé”™è¯¯ç›‘æ§å·¥å…·ï¼ˆSentryï¼‰
4. å®ç°é”™è¯¯æ—¥å¿—è®°å½•

**ç»“æœ**ï¼š
- é”™è¯¯å®šä½æ—¶é—´å‡å°‘70%
- é”™è¯¯è§£å†³ç‡æé«˜40%
- ç”¨æˆ·æŠ•è¯‰å‡å°‘60%

#### æ¡ˆä¾‹3ï¼šä»£ç é‡æ„

**é—®é¢˜**ï¼šä»£ç é‡å¤ç‡é«˜ï¼Œç»´æŠ¤å›°éš¾ã€‚

**åˆ†æ**ï¼š
- ä»£ç é‡å¤ç‡ï¼š35%
- å‡½æ•°å¹³å‡é•¿åº¦ï¼š120è¡Œ
- åœˆå¤æ‚åº¦ï¼š15

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æå–å…¬å…±é€»è¾‘åˆ°å·¥å…·å‡½æ•°
2. ä½¿ç”¨è®¾è®¡æ¨¡å¼é‡æ„
3. æ‹†åˆ†å¤§å‡½æ•°
4. æ·»åŠ å•å…ƒæµ‹è¯•

**ç»“æœ**ï¼š
- ä»£ç é‡å¤ç‡ï¼š8%ï¼ˆâ†“77%ï¼‰
- å‡½æ•°å¹³å‡é•¿åº¦ï¼š35è¡Œï¼ˆâ†“71%ï¼‰
- åœˆå¤æ‚åº¦ï¼š5ï¼ˆâ†“67%ï¼‰



## æœ€ä½³å®è·µ

### æœ€ä½³å®è·µ

#### ä»£ç è§„èŒƒ

1. **å‘½åè§„èŒƒ**
```typescript
// å˜é‡ï¼šcamelCase
const userName = 'John';

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;

// ç±»ï¼šPascalCase
class UserService { }

// æ¥å£ï¼šPascalCaseï¼Œå‰ç¼€Iï¼ˆå¯é€‰ï¼‰
interface IUserService { }
```

2. **æ³¨é‡Šè§„èŒƒ**
```typescript
/**
 * åˆ›å»ºç”¨æˆ·
 * @param email - ç”¨æˆ·é‚®ç®±
 * @param password - ç”¨æˆ·å¯†ç 
 * @returns åˆ›å»ºçš„ç”¨æˆ·å¯¹è±¡
 * @throws {Error} å½“é‚®ç®±å·²å­˜åœ¨æ—¶æŠ›å‡ºé”™è¯¯
 */
async function createUser(
  email: string, 
  password: string
): Promise<User> {
  // å®ç°
}
```

#### é”™è¯¯å¤„ç†

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
class AppError extends Error {
  constructor(
    public statusCode: number,
    public message: string,
    public isOperational = true
  ) {
    super(message);
    this.name = this.constructor.name;
    Error.captureStackTrace(this, this.constructor);
  }
}

// ä½¿ç”¨é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((err: Error, req: Request, res: Response, next: NextFunction) => {
  if (err instanceof AppError) {
    return res.status(err.statusCode).json({
      success: false,
      error: err.message
    });
  }
  
  // è®°å½•æœªé¢„æœŸçš„é”™è¯¯
  logger.error('Unexpected error:', err);
  
  return res.status(500).json({
    success: false,
    error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
  });
});
```

#### æ—¥å¿—è®°å½•

```typescript
// ç»“æ„åŒ–æ—¥å¿—
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

// ä½¿ç”¨æ—¥å¿—
logger.info('User created', { userId: user.id, email: user.email });
logger.error('Database connection failed', { error: error.message });
```


## ç›¸å…³æ–‡æ¡£

- [ğŸ”– YYCÂ³ Dockerå®¹å™¨åŒ–éƒ¨ç½²æŠ€å·§](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»/01-YYC3-Cater--æŠ€å·§ç±»-Dockerå®¹å™¨åŒ–éƒ¨ç½²æŠ€å·§.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ ç°åº¦å‘å¸ƒé£é™©æ§åˆ¶æŠ€å·§](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»/05-YYC3-Cater--æŠ€å·§ç±»-ç°åº¦å‘å¸ƒé£é™©æ§åˆ¶æŠ€å·§.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ K8séƒ¨ç½²è¿ç»´æŠ€å·§](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»/02-YYC3-Cater--æŠ€å·§ç±»-K8séƒ¨ç½²è¿ç»´æŠ€å·§.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ CI/CDæµæ°´çº¿æ­å»ºä¸ä¼˜åŒ–æŠ€å·§](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»/03-YYC3-Cater--æŠ€å·§ç±»-CI_CDæµæ°´çº¿æ­å»ºä¸ä¼˜åŒ–æŠ€å·§.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ æ™ºèƒ½åŒ–éœ€æ±‚ä¼˜å…ˆçº§æ’åºæ–¹æ³•](YYC3-Cater-éœ€æ±‚è§„åˆ’/æŠ€å·§ç±»/03-YYC3-Cater--æŠ€å·§ç±»-æ™ºèƒ½åŒ–éœ€æ±‚ä¼˜å…ˆçº§æ’åºæ–¹æ³•.md) - YYC3-Cater-éœ€æ±‚è§„åˆ’/æŠ€å·§ç±»
