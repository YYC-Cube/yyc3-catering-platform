---

**@file**ï¼šYYCÂ³-CI_CDæµæ°´çº¿æ­å»ºä¸ä¼˜åŒ–æŠ€å·§
**@description**ï¼šYYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°çš„CI_CDæµæ°´çº¿æ­å»ºä¸ä¼˜åŒ–æŠ€å·§
**@author**ï¼šYYCÂ³
**@version**ï¼šv1.0.0
**@created**ï¼š2025-01-30
**@updated**ï¼š2025-01-30
**@status**ï¼špublished
**@tags**ï¼šYYCÂ³,æ–‡æ¡£

---
# ğŸ”– YYCÂ³ CI/CDæµæ°´çº¿æ­å»ºä¸ä¼˜åŒ–æŠ€å·§

> ***YanYuCloudCube***
> **æ ‡è¯­**ï¼šè¨€å¯è±¡é™ | è¯­æ¢æœªæ¥
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **æ ‡è¯­**ï¼šä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| å±æ€§ | å†…å®¹ |
|------|------|
| **æ–‡æ¡£æ ‡é¢˜** | YYCÂ³ CI/CDæµæ°´çº¿æ­å»ºä¸ä¼˜åŒ–æŠ€å·§ |
| **æ–‡æ¡£ç±»å‹** | æŠ€å·§ç±»æ–‡æ¡£ |
| **æ‰€å±é˜¶æ®µ** | éƒ¨ç½²å‘å¸ƒ |
| **éµå¾ªè§„èŒƒ** | YYCÂ³ å›¢é˜Ÿæ ‡å‡†åŒ–è§„èŒƒ v1.0.0 |
| **ç‰ˆæœ¬å·** | v1.0.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2025-01-30 |
| **ä½œè€…** | YYCÂ³ Team |
| **æ›´æ–°æ—¥æœŸ** | 2025-01-30 |

---

## ğŸ“‘ ç›®å½•

1. [CI/CDæ¦‚è¿°](#1-cicdæ¦‚è¿°)
2. [æµæ°´çº¿æ¶æ„](#2-æµæ°´çº¿æ¶æ„)
3. [ä»£ç è´¨é‡æ£€æŸ¥](#3-ä»£ç è´¨é‡æ£€æŸ¥)
4. [è‡ªåŠ¨åŒ–æµ‹è¯•](#4-è‡ªåŠ¨åŒ–æµ‹è¯•)
5. [æ„å»ºä¸æ‰“åŒ…](#5-æ„å»ºä¸æ‰“åŒ…)
6. [é•œåƒç®¡ç†](#6-é•œåƒç®¡ç†)
7. [éƒ¨ç½²æµç¨‹](#7-éƒ¨ç½²æµç¨‹)
8. [ç¯å¢ƒç®¡ç†](#8-ç¯å¢ƒç®¡ç†)
9. [ç›‘æ§ä¸å‘Šè­¦](#9-ç›‘æ§ä¸å‘Šè­¦)
10. [ä¼˜åŒ–æŠ€å·§](#10-ä¼˜åŒ–æŠ€å·§)

---

## 1. æ¦‚è¿°

### 1.1 åŠŸèƒ½è¯´æ˜

### 1.2 æŠ€æœ¯æ ˆ

### 1.3 å¼€å‘ç¯å¢ƒ

## 2. å®ç°æ–¹æ¡ˆ

### 2.1 ä»£ç ç»“æ„

### 2.2 æ ¸å¿ƒé€»è¾‘

### 2.3 æ•°æ®å¤„ç†

## 3. æ¥å£æ–‡æ¡£

### 3.1 APIæ¥å£

### 3.2 è¯·æ±‚å‚æ•°

### 3.3 å“åº”æ ¼å¼

## 4. æµ‹è¯•æ–¹æ¡ˆ

### 4.1 å•å…ƒæµ‹è¯•

### 4.2 é›†æˆæµ‹è¯•

### 4.3 æµ‹è¯•ç”¨ä¾‹

## 5. éƒ¨ç½²æŒ‡å—

### 5.1 ç¯å¢ƒå‡†å¤‡

### 5.2 éƒ¨ç½²æ­¥éª¤

### 5.3 éªŒè¯æ–¹æ³•

## 6. å¸¸è§é—®é¢˜

### 6.1 é—®é¢˜æ’æŸ¥

### 6.2 è§£å†³æ–¹æ¡ˆ

## 1. CI/CDæ¦‚è¿°

### 1.1 CI/CDæµç¨‹

```mermaid
graph LR
    A[ä»£ç æäº¤] --> B[ä»£ç æ£€æŸ¥]
    B --> C[å•å…ƒæµ‹è¯•]
    C --> D[é›†æˆæµ‹è¯•]
    D --> E[æ„å»ºé•œåƒ]
    E --> F[é•œåƒæ‰«æ]
    F --> G[éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ]
    G --> H[E2Eæµ‹è¯•]
    H --> I[éƒ¨ç½²åˆ°é¢„å‘å¸ƒç¯å¢ƒ]
    I --> J[æ‰‹åŠ¨éªŒè¯]
    J --> K[éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ]
    K --> L[ç›‘æ§ä¸å‘Šè­¦]
```

### 1.2 CI/CDæœ€ä½³å®è·µ

- **æŒç»­é›†æˆ(CI)**: é¢‘ç¹é›†æˆä»£ç ,æ¯æ¬¡æäº¤éƒ½è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•
- **æŒç»­äº¤ä»˜(CD)**: è‡ªåŠ¨åŒ–éƒ¨ç½²åˆ°å„ä¸ªç¯å¢ƒ,æ”¯æŒä¸€é”®å‘å¸ƒ
- **åŸºç¡€è®¾æ–½å³ä»£ç (IaC)**: ä½¿ç”¨ä»£ç ç®¡ç†åŸºç¡€è®¾æ–½é…ç½®
- **ç›‘æ§ä¸åé¦ˆ**: å®æ—¶ç›‘æ§æµæ°´çº¿çŠ¶æ€,å¿«é€Ÿåé¦ˆé—®é¢˜
- **å®‰å…¨æ‰«æ**: åœ¨CI/CDæµç¨‹ä¸­é›†æˆå®‰å…¨æ‰«æå·¥å…·

---

## 2. æµæ°´çº¿æ¶æ„

### 2.1 GitHub Actionsé…ç½®

```yaml
# .github/workflows/ci-cd.yml
name: YYCÂ³ CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]
  workflow_dispatch:

env:
  NODE_VERSION: '18'
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}

jobs:
  # ä»£ç è´¨é‡æ£€æŸ¥
  lint:
    name: Code Quality Check
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run ESLint
        run: npm run lint

      - name: Run Prettier check
        run: npm run format:check

      - name: TypeScript type check
        run: npm run type-check

  # å•å…ƒæµ‹è¯•
  test-unit:
    name: Unit Tests
    runs-on: ubuntu-latest
    needs: lint
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run unit tests
        run: npm run test:unit -- --coverage

      - name: Upload coverage reports
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage/lcov.info
          flags: unittests
          name: codecov-umbrella

  # é›†æˆæµ‹è¯•
  test-integration:
    name: Integration Tests
    runs-on: ubuntu-latest
    needs: lint
    services:
      postgres:
        image: postgres:15-alpine
        env:
          POSTGRES_USER: test
          POSTGRES_PASSWORD: test
          POSTGRES_DB: testdb
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 5432:5432
      redis:
        image: redis:7-alpine
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 6379:6379
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run integration tests
        run: npm run test:integration
        env:
          DATABASE_URL: postgresql://test:test@localhost:5432/testdb
          REDIS_URL: redis://localhost:6379

  # æ„å»ºé•œåƒ
  build:
    name: Build Docker Image
    runs-on: ubuntu-latest
    needs: [test-unit, test-integration]
    outputs:
      image-tag: ${{ steps.meta.outputs.tags }}
      image-digest: ${{ steps.build.outputs.digest }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Log in to Container Registry
        uses: docker/login-action@v3
        with:
          registry: ${{ env.REGISTRY }}
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Extract metadata
        id: meta
        uses: docker/metadata-action@v5
        with:
          images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}
          tags: |
            type=ref,event=branch
            type=ref,event=pr
            type=semver,pattern={{version}}
            type=semver,pattern={{major}}.{{minor}}
            type=sha,prefix={{branch}}-

      - name: Build and push Docker image
        id: build
        uses: docker/build-push-action@v5
        with:
          context: .
          push: true
          tags: ${{ steps.meta.outputs.tags }}
          labels: ${{ steps.meta.outputs.labels }}
          cache-from: type=gha
          cache-to: type=gha,mode=max

      - name: Image digest
        run: echo ${{ steps.build.outputs.digest }}

  # å®‰å…¨æ‰«æ
  security:
    name: Security Scan
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Run Trivy vulnerability scanner
        uses: aquasecurity/trivy-action@master
        with:
          image-ref: ${{ needs.build.outputs.image-tag }}
          format: 'sarif'
          output: 'trivy-results.sarif'

      - name: Upload Trivy results to GitHub Security tab
        uses: github/codeql-action/upload-sarif@v2
        if: always()
        with:
          sarif_file: 'trivy-results.sarif'

  # éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
  deploy-staging:
    name: Deploy to Staging
    runs-on: ubuntu-latest
    needs: [build, security]
    if: github.ref == 'refs/heads/develop'
    environment:
      name: staging
      url: https://staging.yyc3.com
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Configure kubectl
        uses: azure/k8s-set-context@v3
        with:
          method: kubeconfig
          kubeconfig: ${{ secrets.KUBE_CONFIG_STAGING }}

      - name: Deploy to Kubernetes
        run: |
          kubectl set image deployment/yyc3-web \
            web=${{ needs.build.outputs.image-tag }} \
            -n yyc3-staging

      - name: Wait for deployment
        run: |
          kubectl rollout status deployment/yyc3-web -n yyc3-staging

      - name: Run smoke tests
        run: |
          kubectl run smoke-test --rm -i --restart=Never \
            --image=curlimages/curl \
            -- curl -f https://staging.yyc3.com/health

  # éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
  deploy-production:
    name: Deploy to Production
    runs-on: ubuntu-latest
    needs: [build, security]
    if: github.ref == 'refs/heads/main'
    environment:
      name: production
      url: https://yyc3.com
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Configure kubectl
        uses: azure/k8s-set-context@v3
        with:
          method: kubeconfig
          kubeconfig: ${{ secrets.KUBE_CONFIG_PRODUCTION }}

      - name: Deploy to Kubernetes
        run: |
          kubectl set image deployment/yyc3-web \
            web=${{ needs.build.outputs.image-tag }} \
            -n yyc3-production

      - name: Wait for deployment
        run: |
          kubectl rollout status deployment/yyc3-web -n yyc3-production

      - name: Run smoke tests
        run: |
          kubectl run smoke-test --rm -i --restart=Never \
            --image=curlimages/curl \
            -- curl -f https://yyc3.com/health

      - name: Notify deployment
        uses: 8398a7/action-slack@v3
        with:
          status: ${{ job.status }}
          text: 'Production deployment completed'
          webhook_url: ${{ secrets.SLACK_WEBHOOK }}
        if: always()
```

### 2.2 GitLab CIé…ç½®

```yaml
# .gitlab-ci.yml
stages:
  - lint
  - test
  - build
  - security
  - deploy-staging
  - deploy-production

variables:
  NODE_VERSION: "18"
  DOCKER_TLS_CERTDIR: ""
  DOCKER_HOST: tcp://docker:2375
  DOCKER_DRIVER: overlay2

# ä»£ç è´¨é‡æ£€æŸ¥
lint:
  stage: lint
  image: node:${NODE_VERSION}
  cache:
    paths:
      - node_modules/
  script:
    - npm ci
    - npm run lint
    - npm run format:check
    - npm run type-check
  artifacts:
    when: on_failure
    paths:
      - lint-report.html
    expire_in: 1 week

# å•å…ƒæµ‹è¯•
test:unit:
  stage: test
  image: node:${NODE_VERSION}
  cache:
    paths:
      - node_modules/
  coverage: '/All files[^|]*\|[^|]*\s+([\d\.]+)/'
  script:
    - npm ci
    - npm run test:unit -- --coverage
  artifacts:
    when: always
    paths:
      - coverage/
    reports:
      coverage_report:
        coverage_format: cobertura
        path: coverage/cobertura-coverage.xml
    expire_in: 1 week

# é›†æˆæµ‹è¯•
test:integration:
  stage: test
  image: node:${NODE_VERSION}
  services:
    - postgres:15-alpine
    - redis:7-alpine
  cache:
    paths:
      - node_modules/
  variables:
    POSTGRES_USER: test
    POSTGRES_PASSWORD: test
    POSTGRES_DB: testdb
    DATABASE_URL: postgresql://test:test@postgres:5432/testdb
    REDIS_URL: redis://redis:6379
  script:
    - npm ci
    - npm run test:integration
  artifacts:
    when: on_failure
    paths:
      - test-results/
    expire_in: 1 week

# æ„å»ºDockeré•œåƒ
build:
  stage: build
  image: docker:24
  services:
    - docker:24-dind
  before_script:
    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY
  script:
    - docker build -t $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA .
    - docker push $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA
    - |
      if [ "$CI_COMMIT_BRANCH" == "$CI_DEFAULT_BRANCH" ]; then
        docker tag $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA $CI_REGISTRY_IMAGE:latest
        docker push $CI_REGISTRY_IMAGE:latest
      fi
  only:
    - main
    - develop
    - merge_requests

# å®‰å…¨æ‰«æ
security:
  stage: security
  image: aquasec/trivy:latest
  needs: [build]
  script:
    - trivy image --exit-code 1 --severity HIGH,CRITICAL $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA
  allow_failure: true

# éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
deploy:staging:
  stage: deploy-staging
  image: bitnami/kubectl:latest
  needs: [build, security]
  environment:
    name: staging
    url: https://staging.yyc3.com
  script:
    - kubectl config use-context $KUBE_CONTEXT_STAGING
    - kubectl set image deployment/yyc3-web web=$CI_REGISTRY_IMAGE:$CI_COMMIT_SHA -n yyc3-staging
    - kubectl rollout status deployment/yyc3-web -n yyc3-staging
  only:
    - develop

# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
deploy:production:
  stage: deploy-production
  image: bitnami/kubectl:latest
  needs: [build, security]
  environment:
    name: production
    url: https://yyc3.com
  when: manual
  script:
    - kubectl config use-context $KUBE_CONTEXT_PRODUCTION
    - kubectl set image deployment/yyc3-web web=$CI_REGISTRY_IMAGE:$CI_COMMIT_SHA -n yyc3-production
    - kubectl rollout status deployment/yyc3-web -n yyc3-production
  only:
    - main
```

---

## 3. ä»£ç è´¨é‡æ£€æŸ¥

### 3.1 ESLinté…ç½®

```javascript
// .eslintrc.js
module.exports = {
  root: true,
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaVersion: 2022,
    sourceType: 'module',
    project: './tsconfig.json',
    tsconfigRootDir: __dirname,
  },
  plugins: [
    '@typescript-eslint',
    'import',
    'jsx-a11y',
    'react',
    'react-hooks',
  ],
  extends: [
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:@typescript-eslint/recommended-requiring-type-checking',
    'plugin:import/recommended',
    'plugin:import/typescript',
    'plugin:jsx-a11y/recommended',
    'plugin:react/recommended',
    'plugin:react-hooks/recommended',
    'prettier',
  ],
  rules: {
    // TypeScriptè§„åˆ™
    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    '@typescript-eslint/no-explicit-any': 'warn',
    '@typescript-eslint/strict-boolean-expressions': 'error',
    '@typescript-eslint/no-floating-promises': 'error',
    '@typescript-eslint/no-misused-promises': 'error',

    // Reactè§„åˆ™
    'react/react-in-jsx-scope': 'off',
    'react/prop-types': 'off',
    'react-hooks/rules-of-hooks': 'error',
    'react-hooks/exhaustive-deps': 'warn',

    // Importè§„åˆ™
    'import/order': [
      'error',
      {
        groups: [
          'builtin',
          'external',
          'internal',
          'parent',
          'sibling',
          'index',
        ],
        'newlines-between': 'always',
        alphabetize: {
          order: 'asc',
          caseInsensitive: true,
        },
      },
    ],
    'import/no-unresolved': 'error',
    'import/no-cycle': 'error',

    // é€šç”¨è§„åˆ™
    'no-console': ['warn', { allow: ['warn', 'error'] }],
    'no-debugger': 'error',
    'no-alert': 'error',
    'no-var': 'error',
    'prefer-const': 'error',
    'eqeqeq': ['error', 'always'],
    'curly': ['error', 'all'],
  },
  settings: {
    react: {
      version: 'detect',
    },
    'import/resolver': {
      typescript: {
        alwaysTryTypes: true,
        project: './tsconfig.json',
      },
    },
  },
};
```

### 3.2 Prettieré…ç½®

```javascript
// .prettierrc.js
module.exports = {
  printWidth: 100,
  tabWidth: 2,
  useTabs: false,
  semi: true,
  singleQuote: true,
  quoteProps: 'as-needed',
  jsxSingleQuote: false,
  trailingComma: 'all',
  bracketSpacing: true,
  bracketSameLine: false,
  arrowParens: 'always',
  proseWrap: 'preserve',
  htmlWhitespaceSensitivity: 'css',
  endOfLine: 'lf',
  embeddedLanguageFormatting: 'auto',
  singleAttributePerLine: false,
};
```

### 3.3 TypeScripté…ç½®

```json
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "allowJs": true,
    "checkJs": false,
    "outDir": "./dist",
    "rootDir": "./src",
    "removeComments": true,
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true,
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "@/components/*": ["./src/components/*"],
      "@/lib/*": ["./src/lib/*"],
      "@/hooks/*": ["./src/hooks/*"],
      "@/utils/*": ["./src/utils/*"],
      "@/types/*": ["./src/types/*"],
      "@/config/*": ["./src/config/*"]
    }
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "build", ".next"]
}
```

---

## 4. è‡ªåŠ¨åŒ–æµ‹è¯•

### 4.1 Vitesté…ç½®

```typescript
// vitest.config.ts
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: ['./src/test/setup.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html', 'lcov'],
      exclude: [
        'node_modules/',
        'src/test/',
        '**/*.d.ts',
        '**/*.config.*',
        '**/mockData',
      ],
      lines: 80,
      functions: 80,
      branches: 80,
      statements: 80,
    },
    include: ['src/**/*.{test,spec}.{ts,tsx}'],
    exclude: ['node_modules', 'dist', '.next', 'build'],
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
      '@/components': path.resolve(__dirname, './src/components'),
      '@/lib': path.resolve(__dirname, './src/lib'),
      '@/hooks': path.resolve(__dirname, './src/hooks'),
      '@/utils': path.resolve(__dirname, './src/utils'),
      '@/types': path.resolve(__dirname, './src/types'),
      '@/config': path.resolve(__dirname, './src/config'),
    },
  },
});
```

### 4.2 å•å…ƒæµ‹è¯•ç¤ºä¾‹

```typescript
// src/lib/utils.test.ts
import { describe, it, expect, beforeEach, vi } from 'vitest';
import { formatDate, formatCurrency, debounce } from './utils';

describe('Utils', () => {
  describe('formatDate', () => {
    it('åº”è¯¥æ­£ç¡®æ ¼å¼åŒ–æ—¥æœŸ', () => {
      const date = new Date('2025-01-30');
      expect(formatDate(date)).toBe('2025-01-30');
    });

    it('åº”è¯¥æ”¯æŒè‡ªå®šä¹‰æ ¼å¼', () => {
      const date = new Date('2025-01-30');
      expect(formatDate(date, 'YYYY/MM/DD')).toBe('2025/01/30');
    });

    it('åº”è¯¥å¤„ç†æ— æ•ˆæ—¥æœŸ', () => {
      expect(formatDate(null as any)).toBe('');
      expect(formatDate(undefined as any)).toBe('');
    });
  });

  describe('formatCurrency', () => {
    it('åº”è¯¥æ­£ç¡®æ ¼å¼åŒ–è´§å¸', () => {
      expect(formatCurrency(1234.56)).toBe('Â¥1,234.56');
    });

    it('åº”è¯¥æ”¯æŒè‡ªå®šä¹‰è´§å¸ç¬¦å·', () => {
      expect(formatCurrency(1234.56, '$')).toBe('$1,234.56');
    });

    it('åº”è¯¥å¤„ç†è´Ÿæ•°', () => {
      expect(formatCurrency(-1234.56)).toBe('-Â¥1,234.56');
    });
  });

  describe('debounce', () => {
    beforeEach(() => {
      vi.useFakeTimers();
    });

    it('åº”è¯¥å»¶è¿Ÿæ‰§è¡Œå‡½æ•°', () => {
      const fn = vi.fn();
      const debouncedFn = debounce(fn, 100);

      debouncedFn();
      expect(fn).not.toHaveBeenCalled();

      vi.advanceTimersByTime(100);
      expect(fn).toHaveBeenCalledTimes(1);
    });

    it('åº”è¯¥å–æ¶ˆä¹‹å‰çš„è°ƒç”¨', () => {
      const fn = vi.fn();
      const debouncedFn = debounce(fn, 100);

      debouncedFn();
      debouncedFn();
      debouncedFn();

      vi.advanceTimersByTime(100);
      expect(fn).toHaveBeenCalledTimes(1);
    });
  });
});
```

### 4.3 é›†æˆæµ‹è¯•ç¤ºä¾‹

```typescript
// src/test/integration/api.test.ts
import { describe, it, expect, beforeAll, afterAll } from 'vitest';
import { setupServer } from 'msw/node';
import { rest } from 'msw';
import { apiClient } from '@/lib/api-client';

const server = setupServer(
  rest.get('/api/users', (req, res, ctx) => {
    return res(
      ctx.json([
        { id: 1, name: 'User 1' },
        { id: 2, name: 'User 2' },
      ])
    );
  }),

  rest.post('/api/users', (req, res, ctx) => {
    return res(
      ctx.status(201),
      ctx.json({ id: 3, name: 'New User' })
    );
  })
);

describe('API Integration Tests', () => {
  beforeAll(() => server.listen());
  afterAll(() => server.close());

  it('åº”è¯¥è·å–ç”¨æˆ·åˆ—è¡¨', async () => {
    const users = await apiClient.getUsers();
    expect(users).toHaveLength(2);
    expect(users[0].name).toBe('User 1');
  });

  it('åº”è¯¥åˆ›å»ºæ–°ç”¨æˆ·', async () => {
    const newUser = await apiClient.createUser({ name: 'New User' });
    expect(newUser.id).toBe(3);
    expect(newUser.name).toBe('New User');
  });
});
```

---

## 5. æ„å»ºä¸æ‰“åŒ…

### 5.1 Next.jsæ„å»ºé…ç½®

```javascript
// next.config.js
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
  compress: true,
  poweredByHeader: false,

  // ç¯å¢ƒå˜é‡
  env: {
    NEXT_PUBLIC_APP_NAME: 'YYCÂ³ Web',
    NEXT_PUBLIC_API_URL: process.env.NEXT_PUBLIC_API_URL,
  },

  // å›¾ç‰‡ä¼˜åŒ–
  images: {
    domains: ['yyc3.com'],
    formats: ['image/avif', 'image/webp'],
    deviceSizes: [640, 750, 828, 1080, 1200, 1920],
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
  },

  // è¾“å‡ºé…ç½®
  output: 'standalone',
  outputMode: 'export',

  // å®éªŒæ€§åŠŸèƒ½
  experimental: {
    optimizeCss: true,
    optimizePackageImports: ['lucide-react', '@radix-ui/react-icons'],
  },

  // æ€§èƒ½ä¼˜åŒ–
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production',
  },

  // Webpacké…ç½®
  webpack: (config, { isServer }) => {
    if (!isServer) {
      config.resolve.fallback = {
        ...config.resolve.fallback,
        fs: false,
        net: false,
        tls: false,
      };
    }
    return config;
  },
};

module.exports = nextConfig;
```

### 5.2 å¤šé˜¶æ®µDockerfile

```dockerfile
# ç¬¬ä¸€é˜¶æ®µ: ä¾èµ–å®‰è£…
FROM node:18-alpine AS deps
RUN apk add --no-cache libc6-compat
WORKDIR /app

COPY package.json package-lock.json ./
COPY prisma ./prisma/
RUN npm ci

# ç¬¬äºŒé˜¶æ®µ: æ„å»º
FROM node:18-alpine AS builder
WORKDIR /app

COPY --from=deps /app/node_modules ./node_modules
COPY . .

ENV NEXT_TELEMETRY_DISABLED 1
ENV NODE_ENV production

RUN npx prisma generate
RUN npm run build

# ç¬¬ä¸‰é˜¶æ®µ: è¿è¡Œ
FROM node:18-alpine AS runner
WORKDIR /app

ENV NODE_ENV production
ENV NEXT_TELEMETRY_DISABLED 1

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static

USER nextjs

EXPOSE 3200

ENV PORT 3200
ENV HOSTNAME "0.0.0.0"

CMD ["node", "server.js"]
```

### 5.3 æ„å»ºè„šæœ¬

```bash
#!/bin/bash

# æ„å»ºè„šæœ¬

set -euo pipefail

echo "=== å¼€å§‹æ„å»º ==="

# æ¸…ç†ä¹‹å‰çš„æ„å»º
echo "1. æ¸…ç†ä¹‹å‰çš„æ„å»º..."
rm -rf dist .next build

# å®‰è£…ä¾èµ–
echo "2. å®‰è£…ä¾èµ–..."
npm ci

# è¿è¡Œç±»å‹æ£€æŸ¥
echo "3. è¿è¡Œç±»å‹æ£€æŸ¥..."
npm run type-check

# è¿è¡Œä»£ç æ£€æŸ¥
echo "4. è¿è¡Œä»£ç æ£€æŸ¥..."
npm run lint

# è¿è¡Œæµ‹è¯•
echo "5. è¿è¡Œæµ‹è¯•..."
npm run test

# æ„å»ºåº”ç”¨
echo "6. æ„å»ºåº”ç”¨..."
npm run build

# éªŒè¯æ„å»º
echo "7. éªŒè¯æ„å»º..."
if [ -d ".next" ]; then
  echo "âœ… æ„å»ºæˆåŠŸ"
else
  echo "âŒ æ„å»ºå¤±è´¥"
  exit 1
fi

echo "=== æ„å»ºå®Œæˆ ==="
```

---

## 6. é•œåƒç®¡ç†

### 6.1 é•œåƒæ ‡ç­¾ç­–ç•¥

```bash
#!/bin/bash

# é•œåƒæ ‡ç­¾ç®¡ç†è„šæœ¬

REGISTRY="ghcr.io/yyc3"
IMAGE_NAME="web"
VERSION=$(node -p "require('./package.json').version")
COMMIT_SHA=$(git rev-parse --short HEAD)
BRANCH_NAME=$(git rev-parse --abbrev-ref HEAD)
TIMESTAMP=$(date +%Y%m%d%H%M%S)

echo "=== é•œåƒæ ‡ç­¾ç­–ç•¥ ==="
echo "ç‰ˆæœ¬: $VERSION"
echo "æäº¤: $COMMIT_SHA"
echo "åˆ†æ”¯: $BRANCH_NAME"
echo "æ—¶é—´æˆ³: $TIMESTAMP"

# ç”Ÿæˆæ ‡ç­¾
TAGS=(
  "$REGISTRY/$IMAGE_NAME:$VERSION"
  "$REGISTRY/$IMAGE_NAME:$COMMIT_SHA"
  "$REGISTRY/$IMAGE_NAME:$BRANCH_NAME"
  "$REGISTRY/$IMAGE_NAME:$TIMESTAMP"
)

# å¦‚æœæ˜¯mainåˆ†æ”¯,æ·»åŠ latestæ ‡ç­¾
if [ "$BRANCH_NAME" == "main" ]; then
  TAGS+=("$REGISTRY/$IMAGE_NAME:latest")
fi

# å¦‚æœæ˜¯developåˆ†æ”¯,æ·»åŠ stagingæ ‡ç­¾
if [ "$BRANCH_NAME" == "develop" ]; then
  TAGS+=("$REGISTRY/$IMAGE_NAME:staging")
fi

echo ""
echo "ç”Ÿæˆçš„æ ‡ç­¾:"
for tag in "${TAGS[@]}"; do
  echo "  - $tag"
done

# æ„å»ºå¹¶æ¨é€é•œåƒ
echo ""
echo "æ„å»ºå¹¶æ¨é€é•œåƒ..."
docker buildx build \
  --platform linux/amd64,linux/arm64 \
  --push \
  ${TAGS[@]/#/--tag } \
  .
```

### 6.2 é•œåƒæ‰«æ

```bash
#!/bin/bash

# é•œåƒå®‰å…¨æ‰«æè„šæœ¬

IMAGE=${1:-"ghcr.io/yyc3/web:latest"}

echo "=== é•œåƒå®‰å…¨æ‰«æ ==="
echo "é•œåƒ: $IMAGE"
echo ""

# ä½¿ç”¨Trivyæ‰«ææ¼æ´
echo "1. ä½¿ç”¨Trivyæ‰«ææ¼æ´..."
trivy image --severity HIGH,CRITICAL --format table $IMAGE

# æ£€æŸ¥æ‰«æç»“æœ
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ å‘ç°é«˜å±æ¼æ´,è¯·ä¿®å¤åå†éƒ¨ç½²"
  exit 1
fi

echo ""
echo "âœ… é•œåƒå®‰å…¨æ‰«æé€šè¿‡"

# ç”Ÿæˆæ‰«ææŠ¥å‘Š
echo ""
echo "2. ç”Ÿæˆæ‰«ææŠ¥å‘Š..."
trivy image --severity HIGH,CRITICAL --format json --output trivy-report.json $IMAGE

echo "æ‰«ææŠ¥å‘Šå·²ä¿å­˜åˆ° trivy-report.json"
```

### 6.3 é•œåƒæ¸…ç†

```bash
#!/bin/bash

# é•œåƒæ¸…ç†è„šæœ¬

REGISTRY="ghcr.io/yyc3"
IMAGE_NAME="web"
KEEP_COUNT=5

echo "=== é•œåƒæ¸…ç† ==="
echo "ä»“åº“: $REGISTRY/$IMAGE_NAME"
echo "ä¿ç•™æ•°é‡: $KEEP_COUNT"
echo ""

# è·å–æ‰€æœ‰æ ‡ç­¾
echo "1. è·å–æ‰€æœ‰æ ‡ç­¾..."
TAGS=$(crane ls $REGISTRY/$IMAGE_NAME | sort -V)

# è®¡ç®—è¦åˆ é™¤çš„æ ‡ç­¾
TOTAL_COUNT=$(echo "$TAGS" | wc -l)
DELETE_COUNT=$((TOTAL_COUNT - KEEP_COUNT))

if [ $DELETE_COUNT -le 0 ]; then
  echo "âœ… ä¸éœ€è¦æ¸…ç†é•œåƒ"
  exit 0
fi

echo "æ€»æ ‡ç­¾æ•°: $TOTAL_COUNT"
echo "åˆ é™¤æ ‡ç­¾æ•°: $DELETE_COUNT"
echo ""

# åˆ é™¤æ—§æ ‡ç­¾
echo "2. åˆ é™¤æ—§æ ‡ç­¾..."
echo "$TAGS" | head -n $DELETE_COUNT | while read tag; do
  echo "åˆ é™¤: $REGISTRY/$IMAGE_NAME:$tag"
  crane delete $REGISTRY/$IMAGE_NAME:$tag
done

echo ""
echo "âœ… é•œåƒæ¸…ç†å®Œæˆ"
```

---

## 7. éƒ¨ç½²æµç¨‹

### 7.1 Kuberneteséƒ¨ç½²è„šæœ¬

```bash
#!/bin/bash

# Kuberneteséƒ¨ç½²è„šæœ¬

set -euo pipefail

NAMESPACE=${1:-"yyc3-production"}
DEPLOYMENT=${2:-"yyc3-web"}
IMAGE=${3:-"ghcr.io/yyc3/web:latest"}

echo "=== Kuberneteséƒ¨ç½² ==="
echo "å‘½åç©ºé—´: $NAMESPACE"
echo "éƒ¨ç½²: $DEPLOYMENT"
echo "é•œåƒ: $IMAGE"
echo ""

# 1. æ£€æŸ¥å‘½åç©ºé—´æ˜¯å¦å­˜åœ¨
echo "1. æ£€æŸ¥å‘½åç©ºé—´..."
if ! kubectl get namespace $NAMESPACE > /dev/null 2>&1; then
  echo "å‘½åç©ºé—´ $NAMESPACE ä¸å­˜åœ¨,åˆ›å»ºä¸­..."
  kubectl create namespace $NAMESPACE
fi

# 2. æ£€æŸ¥éƒ¨ç½²æ˜¯å¦å­˜åœ¨
echo "2. æ£€æŸ¥éƒ¨ç½²..."
if kubectl get deployment $DEPLOYMENT -n $NAMESPACE > /dev/null 2>&1; then
  echo "éƒ¨ç½² $DEPLOYMENT å·²å­˜åœ¨,æ›´æ–°ä¸­..."
  kubectl set image deployment/$DEPLOYMENT web=$IMAGE -n $NAMESPACE
else
  echo "éƒ¨ç½² $DEPLOYMENT ä¸å­˜åœ¨,åˆ›å»ºä¸­..."
  kubectl create deployment $DEPLOYMENT --image=$IMAGE -n $NAMESPACE
fi

# 3. ç­‰å¾…éƒ¨ç½²å®Œæˆ
echo "3. ç­‰å¾…éƒ¨ç½²å®Œæˆ..."
kubectl rollout status deployment/$DEPLOYMENT -n $NAMESPACE --timeout=5m

# 4. éªŒè¯éƒ¨ç½²
echo "4. éªŒè¯éƒ¨ç½²..."
kubectl get pods -n $NAMESPACE -l app=$DEPLOYMENT

# 5. æ£€æŸ¥PodçŠ¶æ€
echo "5. æ£€æŸ¥PodçŠ¶æ€..."
READY_PODS=$(kubectl get deployment $DEPLOYMENT -n $NAMESPACE -o jsonpath='{.status.readyReplicas}')
TOTAL_PODS=$(kubectl get deployment $DEPLOYMENT -n $NAMESPACE -o jsonpath='{.spec.replicas}')

if [ "$READY_PODS" == "$TOTAL_PODS" ]; then
  echo "âœ… éƒ¨ç½²æˆåŠŸ"
else
  echo "âŒ éƒ¨ç½²å¤±è´¥"
  exit 1
fi
```

### 7.2 æ»šåŠ¨æ›´æ–°è„šæœ¬

```bash
#!/bin/bash

# æ»šåŠ¨æ›´æ–°è„šæœ¬

NAMESPACE=${1:-"yyc3-production"}
DEPLOYMENT=${2:-"yyc3-web"}
NEW_IMAGE=${3:-"ghcr.io/yyc3/web:latest"}

echo "=== æ»šåŠ¨æ›´æ–° ==="
echo "å‘½åç©ºé—´: $NAMESPACE"
echo "éƒ¨ç½²: $DEPLOYMENT"
echo "æ–°é•œåƒ: $NEW_IMAGE"
echo ""

# 1. æ£€æŸ¥å½“å‰éƒ¨ç½²çŠ¶æ€
echo "1. æ£€æŸ¥å½“å‰éƒ¨ç½²çŠ¶æ€..."
kubectl get deployment $DEPLOYMENT -n $NAMESPACE

# 2. æ›´æ–°é•œåƒ
echo "2. æ›´æ–°é•œåƒ..."
kubectl set image deployment/$DEPLOYMENT web=$NEW_IMAGE -n $NAMESPACE --record

# 3. ç›‘æ§æ›´æ–°è¿›åº¦
echo "3. ç›‘æ§æ›´æ–°è¿›åº¦..."
kubectl rollout status deployment/$DEPLOYMENT -n $NAMESPACE --timeout=10m

# 4. æŸ¥çœ‹æ›´æ–°å†å²
echo "4. æŸ¥çœ‹æ›´æ–°å†å²..."
kubectl rollout history deployment/$DEPLOYMENT -n $NAMESPACE

# 5. éªŒè¯æ›´æ–°
echo "5. éªŒè¯æ›´æ–°..."
CURRENT_IMAGE=$(kubectl get deployment $DEPLOYMENT -n $NAMESPACE -o jsonpath='{.spec.template.spec.containers[0].image}')

if [ "$CURRENT_IMAGE" == "$NEW_IMAGE" ]; then
  echo "âœ… æ›´æ–°æˆåŠŸ"
else
  echo "âŒ æ›´æ–°å¤±è´¥"
  exit 1
fi
```

### 7.3 å›æ»šè„šæœ¬

```bash
#!/bin/bash

# å›æ»šè„šæœ¬

NAMESPACE=${1:-"yyc3-production"}
DEPLOYMENT=${2:-"yyc3-web"}
REVISION=${3:-""}

echo "=== å›æ»šéƒ¨ç½² ==="
echo "å‘½åç©ºé—´: $NAMESPACE"
echo "éƒ¨ç½²: $DEPLOYMENT"
echo "ç‰ˆæœ¬: ${REVISION:-ä¸Šä¸€ä¸ªç‰ˆæœ¬}"
echo ""

# 1. æŸ¥çœ‹æ›´æ–°å†å²
echo "1. æŸ¥çœ‹æ›´æ–°å†å²..."
kubectl rollout history deployment/$DEPLOYMENT -n $NAMESPACE

# 2. ç¡®è®¤å›æ»š
echo ""
read -p "ç¡®è®¤å›æ»š? (y/n) " -n 1 -r
echo
if [[ ! $REPLY =~ ^[Yy]$ ]]; then
  echo "å–æ¶ˆå›æ»š"
  exit 0
fi

# 3. æ‰§è¡Œå›æ»š
echo "3. æ‰§è¡Œå›æ»š..."
if [ -z "$REVISION" ]; then
  kubectl rollout undo deployment/$DEPLOYMENT -n $NAMESPACE
else
  kubectl rollout undo deployment/$DEPLOYMENT --to-revision=$REVISION -n $NAMESPACE
fi

# 4. ç›‘æ§å›æ»šè¿›åº¦
echo "4. ç›‘æ§å›æ»šè¿›åº¦..."
kubectl rollout status deployment/$DEPLOYMENT -n $NAMESPACE --timeout=10m

# 5. éªŒè¯å›æ»š
echo "5. éªŒè¯å›æ»š..."
kubectl get pods -n $NAMESPACE -l app=$DEPLOYMENT

echo "âœ… å›æ»šå®Œæˆ"
```

---

## 8. ç¯å¢ƒç®¡ç†

### 8.1 ç¯å¢ƒé…ç½®ç®¡ç†

```typescript
// src/config/env.ts
import { z } from 'zod';

const envSchema = z.object({
  // åº”ç”¨é…ç½®
  NODE_ENV: z.enum(['development', 'staging', 'production']).default('development'),
  PORT: z.string().default('3200'),
  APP_NAME: z.string().default('YYCÂ³ Web'),
  APP_URL: z.string().url(),

  // æ•°æ®åº“é…ç½®
  DATABASE_URL: z.string().url(),
  DATABASE_POOL_MIN: z.string().default('2'),
  DATABASE_POOL_MAX: z.string().default('10'),

  // Redisé…ç½®
  REDIS_URL: z.string().url(),
  REDIS_PREFIX: z.string().default('yyc3:'),

  // JWTé…ç½®
  JWT_SECRET: z.string().min(32),
  JWT_EXPIRES_IN: z.string().default('7d'),

  // ç¬¬ä¸‰æ–¹æœåŠ¡
  SMTP_HOST: z.string().optional(),
  SMTP_PORT: z.string().default('587'),
  SMTP_USER: z.string().optional(),
  SMTP_PASS: z.string().optional(),

  // ç›‘æ§é…ç½®
  SENTRY_DSN: z.string().optional(),
  SENTRY_ENVIRONMENT: z.string().optional(),

  // æ—¥å¿—é…ç½®
  LOG_LEVEL: z.enum(['debug', 'info', 'warn', 'error']).default('info'),
  LOG_FORMAT: z.enum(['json', 'text']).default('json'),
});

export const env = envSchema.parse(process.env);
```

### 8.2 å¤šç¯å¢ƒé…ç½®

```yaml
# .env.development
NODE_ENV=development
PORT=3200
APP_NAME=YYCÂ³ Web (Development)
APP_URL=http://localhost:3200

DATABASE_URL=postgresql://yyc3:yyc3@localhost:5432/yyc3_dev
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=5

REDIS_URL=redis://localhost:6379
REDIS_PREFIX=yyc3:dev:

JWT_SECRET=development-secret-key-change-in-production
JWT_EXPIRES_IN=7d

LOG_LEVEL=debug
LOG_FORMAT=text
```

```yaml
# .env.staging
NODE_ENV=staging
PORT=3200
APP_NAME=YYCÂ³ Web (Staging)
APP_URL=https://staging.yyc3.com

DATABASE_URL=postgresql://yyc3:password@postgres-staging:5432/yyc3_staging
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

REDIS_URL=redis://:password@redis-staging:6379
REDIS_PREFIX=yyc3:staging:

JWT_SECRET=staging-secret-key-change-in-production
JWT_EXPIRES_IN=7d

SENTRY_DSN=https://xxx@sentry.io/xxx
SENTRY_ENVIRONMENT=staging

LOG_LEVEL=info
LOG_FORMAT=json
```

```yaml
# .env.production
NODE_ENV=production
PORT=3200
APP_NAME=YYCÂ³ Web
APP_URL=https://yyc3.com

DATABASE_URL=postgresql://yyc3:password@postgres-production:5432/yyc3_prod
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20

REDIS_URL=redis://:password@redis-production:6379
REDIS_PREFIX=yyc3:prod:

JWT_SECRET=production-secret-key-very-long-and-secure
JWT_EXPIRES_IN=7d

SENTRY_DSN=https://xxx@sentry.io/xxx
SENTRY_ENVIRONMENT=production

LOG_LEVEL=info
LOG_FORMAT=json
```

### 8.3 ç¯å¢ƒåˆ‡æ¢è„šæœ¬

```bash
#!/bin/bash

# ç¯å¢ƒåˆ‡æ¢è„šæœ¬

ENVIRONMENT=${1:-"development"}

echo "=== ç¯å¢ƒåˆ‡æ¢ ==="
echo "ç›®æ ‡ç¯å¢ƒ: $ENVIRONMENT"
echo ""

# æ£€æŸ¥ç¯å¢ƒå˜é‡æ–‡ä»¶
ENV_FILE=".env.$ENVIRONMENT"

if [ ! -f "$ENV_FILE" ]; then
  echo "âŒ ç¯å¢ƒæ–‡ä»¶ $ENV_FILE ä¸å­˜åœ¨"
  exit 1
fi

# å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶
echo "å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶..."
cp $ENV_FILE .env

# éªŒè¯ç¯å¢ƒå˜é‡
echo "éªŒè¯ç¯å¢ƒå˜é‡..."
source .env

echo "å½“å‰é…ç½®:"
echo "  NODE_ENV: $NODE_ENV"
echo "  APP_NAME: $APP_NAME"
echo "  APP_URL: $APP_URL"
echo ""

# é‡å¯åº”ç”¨
echo "é‡å¯åº”ç”¨..."
if [ "$ENVIRONMENT" == "development" ]; then
  npm run dev
else
  npm run build
  npm run start
fi

echo "âœ… ç¯å¢ƒåˆ‡æ¢å®Œæˆ"
```

---

## 9. ç›‘æ§ä¸å‘Šè­¦

### 9.1 éƒ¨ç½²ç›‘æ§

```bash
#!/bin/bash

# éƒ¨ç½²ç›‘æ§è„šæœ¬

NAMESPACE=${1:-"yyc3-production"}
DEPLOYMENT=${2:-"yyc3-web"}

echo "=== éƒ¨ç½²ç›‘æ§ ==="
echo "å‘½åç©ºé—´: $NAMESPACE"
echo "éƒ¨ç½²: $DEPLOYMENT"
echo ""

# 1. æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
echo "1. æ£€æŸ¥éƒ¨ç½²çŠ¶æ€..."
kubectl get deployment $DEPLOYMENT -n $NAMESPACE

# 2. æ£€æŸ¥PodçŠ¶æ€
echo ""
echo "2. æ£€æŸ¥PodçŠ¶æ€..."
kubectl get pods -n $NAMESPACE -l app=$DEPLOYMENT

# 3. æ£€æŸ¥èµ„æºä½¿ç”¨
echo ""
echo "3. æ£€æŸ¥èµ„æºä½¿ç”¨..."
kubectl top pods -n $NAMESPACE -l app=$DEPLOYMENT

# 4. æ£€æŸ¥äº‹ä»¶
echo ""
echo "4. æ£€æŸ¥äº‹ä»¶..."
kubectl get events -n $NAMESPACE --field-selector involvedObject.name=$DEPLOYMENT --sort-by='.lastTimestamp' | tail -10

# 5. æ£€æŸ¥æ—¥å¿—
echo ""
echo "5. æ£€æŸ¥æ—¥å¿—..."
kubectl logs -n $NAMESPACE -l app=$DEPLOYMENT --tail=50 | grep -i "error\|warning" || echo "æ²¡æœ‰å‘ç°é”™è¯¯æˆ–è­¦å‘Š"

# 6. å¥åº·æ£€æŸ¥
echo ""
echo "6. å¥åº·æ£€æŸ¥..."
POD=$(kubectl get pods -n $NAMESPACE -l app=$DEPLOYMENT -o jsonpath='{.items[0].metadata.name}')
kubectl exec -it $POD -n $NAMESPACE -- wget -O- http://localhost:3200/health || echo "å¥åº·æ£€æŸ¥å¤±è´¥"

echo ""
echo "âœ… ç›‘æ§å®Œæˆ"
```

### 9.2 å‘Šè­¦é…ç½®

```yaml
# alerting-rules.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: deployment-alerts
  namespace: monitoring
  labels:
    release: prometheus
spec:
  groups:
  - name: deployment.rules
    rules:
    # éƒ¨ç½²å¤±è´¥å‘Šè­¦
    - alert: DeploymentFailed
      expr: |
        kube_deployment_status_replicas_unavailable{deployment="yyc3-web"} > 0
      for: 5m
      labels:
        severity: critical
        team: yyc3
      annotations:
        summary: "Deployment {{ $labels.deployment }} has unavailable replicas"
        description: "Deployment {{ $labels.deployment }} has {{ $value }} unavailable replicas for more than 5 minutes"

    # Podé‡å¯å‘Šè­¦
    - alert: PodRestarting
      expr: |
        increase(kube_pod_container_status_restarts_total{container="web"}[15m]) > 0
      for: 5m
      labels:
        severity: warning
        team: yyc3
      annotations:
        summary: "Pod {{ $labels.pod }} is restarting"
        description: "Pod {{ $labels.pod }} has restarted {{ $value }} times in the last 15 minutes"

    # é•œåƒæ‹‰å–å¤±è´¥å‘Šè­¦
    - alert: ImagePullBackOff
      expr: |
        kube_pod_container_status_waiting_reason{reason="ImagePullBackOff"} > 0
      for: 5m
      labels:
        severity: critical
        team: yyc3
      annotations:
        summary: "Pod {{ $labels.pod }} has ImagePullBackOff"
        description: "Pod {{ $labels.pod }} cannot pull image {{ $labels.image }}"

    # éƒ¨ç½²å›æ»šå‘Šè­¦
    - alert: DeploymentRolledBack
      expr: |
        increase(kube_deployment_status_replicas_updated{deployment="yyc3-web"}[1h]) < 0
      for: 1m
      labels:
        severity: warning
        team: yyc3
      annotations:
        summary: "Deployment {{ $labels.deployment }} has been rolled back"
        description: "Deployment {{ $labels.deployment }} has been rolled back"
```

### 9.3 é€šçŸ¥é…ç½®

```yaml
# notification-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: notification-config
  namespace: monitoring
data:
  slack-webhook.yaml: |
    apiVersion: v1
    kind: Secret
    metadata:
      name: slack-webhook
      namespace: monitoring
    type: Opaque
    stringData:
      url: "https://hooks.slack.com/services/XXX/YYY/ZZZ"

  email-config.yaml: |
    apiVersion: v1
    kind: Secret
    metadata:
      name: email-config
      namespace: monitoring
    type: Opaque
    stringData:
      smtp_host: "smtp.gmail.com"
      smtp_port: "587"
      smtp_user: "alert@yyc3.com"
      smtp_pass: "password"
      from: "alert@yyc3.com"
      to: "admin@0379.email"
```

---

## 10. ä¼˜åŒ–æŠ€å·§

### 10.1 å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–

```yaml
# .github/workflows/optimized-ci.yml
name: YYCÂ³ Optimized CI Pipeline

on:
  push:
    branches: [main, develop]

jobs:
  # å¹¶è¡Œæ‰§è¡Œä»£ç æ£€æŸ¥å’Œæµ‹è¯•
  lint-and-test:
    name: Lint and Test
    runs-on: ubuntu-latest
    strategy:
      matrix:
        task: [lint, test-unit, test-integration]
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run ${{ matrix.task }}
        run: npm run ${{ matrix.task }}

  # å¹¶è¡Œæ„å»ºå¤šæ¶æ„é•œåƒ
  build:
    name: Build Docker Image
    runs-on: ubuntu-latest
    needs: lint-and-test
    strategy:
      matrix:
        platform: [linux/amd64, linux/arm64]
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up QEMU
        uses: docker/setup-qemu-action@v3

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Log in to Container Registry
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Build and push
        uses: docker/build-push-action@v5
        with:
          context: .
          platforms: ${{ matrix.platform }}
          push: true
          tags: ghcr.io/yyc3/web:latest
          cache-from: type=gha
          cache-to: type=gha,mode=max
```

### 10.2 ç¼“å­˜ä¼˜åŒ–

```yaml
# .github/workflows/cached-ci.yml
name: YYCÂ³ Cached CI Pipeline

on:
  push:
    branches: [main, develop]

jobs:
  build:
    name: Build with Cache
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      # Node.jsç¼“å­˜
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      # Next.jsç¼“å­˜
      - name: Cache Next.js build
        uses: actions/cache@v3
        with:
          path: |
            ~/.npm
            .next/cache
          key: ${{ runner.os }}-nextjs-${{ hashFiles('**/package-lock.json') }}
          restore-keys: |
            ${{ runner.os }}-nextjs-

      # Dockerå±‚ç¼“å­˜
      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Cache Docker layers
        uses: actions/cache@v3
        with:
          path: /tmp/.buildx-cache
          key: ${{ runner.os }}-buildx-${{ github.sha }}
          restore-keys: |
            ${{ runner.os }}-buildx-

      - name: Build with cache
        run: |
          docker buildx build \
            --cache-from type=local,src=/tmp/.buildx-cache \
            --cache-to type=local,dest=/tmp/.buildx-cache-new,mode=max \
            -t ghcr.io/yyc3/web:latest \
            .

      - name: Move cache
        run: |
          rm -rf /tmp/.buildx-cache
          mv /tmp/.buildx-cache-new /tmp/.buildx-cache
```

### 10.3 çŸ©é˜µæ„å»ºä¼˜åŒ–

```yaml
# .github/workflows/matrix-build.yml
name: YYCÂ³ Matrix Build Pipeline

on:
  push:
    branches: [main, develop]

jobs:
  # çŸ©é˜µæµ‹è¯•
  test:
    name: Test on Node ${{ matrix.node-version }}
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        node-version: [16, 18, 20]
        os: [ubuntu-latest, macos-latest, windows-latest]
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run tests
        run: npm test

  # çŸ©é˜µæ„å»º
  build:
    name: Build for ${{ matrix.platform }}
    runs-on: ubuntu-latest
    needs: test
    strategy:
      matrix:
        platform: [linux/amd64, linux/arm64]
        include:
          - platform: linux/amd64
            dockerfile: Dockerfile.amd64
          - platform: linux/arm64
            dockerfile: Dockerfile.arm64
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up QEMU
        uses: docker/setup-qemu-action@v3

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Log in to Container Registry
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Build and push
        uses: docker/build-push-action@v5
        with:
          context: .
          file: ${{ matrix.dockerfile }}
          platforms: ${{ matrix.platform }}
          push: true
          tags: ghcr.io/yyc3/web:${{ matrix.platform }}
```

### 10.4 æ¡ä»¶æ‰§è¡Œä¼˜åŒ–

```yaml
# .github/workflows/conditional-ci.yml
name: YYCÂ³ Conditional CI Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  # ä»…åœ¨PRæ—¶è¿è¡Œå®Œæ•´æµ‹è¯•
  full-test:
    name: Full Test Suite
    runs-on: ubuntu-latest
    if: github.event_name == 'pull_request'
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run full test suite
        run: |
          npm run lint
          npm run test:unit
          npm run test:integration
          npm run test:e2e

  # ä»…åœ¨mainåˆ†æ”¯æ—¶éƒ¨ç½²
  deploy-production:
    name: Deploy to Production
    runs-on: ubuntu-latest
    needs: [build]
    if: github.ref == 'refs/heads/main' && github.event_name == 'push'
    environment:
      name: production
      url: https://yyc3.com
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Deploy to production
        run: |
          kubectl set image deployment/yyc3-web \
            web=ghcr.io/yyc3/web:latest \
            -n yyc3-production

  # è·³è¿‡æŸäº›æ–‡ä»¶çš„å˜æ›´
  skip-changes:
    name: Skip for Documentation Changes
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Check for documentation changes
        id: docs-changes
        run: |
          git diff --name-only ${{ github.event.before }} ${{ github.sha }} | grep -E '^docs/' && echo "docs=true" >> $GITHUB_OUTPUT || echo "docs=false" >> $GITHUB_OUTPUT

      - name: Skip if only docs changed
        if: steps.docs-changes.outputs.docs == 'true'
        run: |
          echo "Only documentation changed, skipping CI"
          exit 0
```

---

## ğŸ“„ æ–‡æ¡£æ ‡å°¾

> ã€Œ***YanYuCloudCube***ã€
> ã€Œ***<admin@0379.email>***ã€
> ã€Œ***Words Initiate Quadrants, Language Serves as Core for the Future***ã€
> ã€Œ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***ã€




## æ¦‚è¿°

### æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›äº†å®ç”¨çš„æŠ€å·§å’Œæ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…æé«˜å·¥ä½œæ•ˆç‡å’Œä»£ç è´¨é‡ã€‚

#### é€‚ç”¨åœºæ™¯

- æ—¥å¸¸å¼€å‘å·¥ä½œ
- ä»£ç ä¼˜åŒ–å’Œé‡æ„
- é—®é¢˜æ’æŸ¥å’Œè°ƒè¯•
- æ€§èƒ½ä¼˜åŒ–å’Œè°ƒä¼˜

#### é¢„æœŸæ”¶ç›Š

- æé«˜å¼€å‘æ•ˆç‡
- å‡å°‘ä»£ç é”™è¯¯
- ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½
- æå‡ä»£ç å¯ç»´æŠ¤æ€§



## æ ¸å¿ƒæ¦‚å¿µ

### æ ¸å¿ƒæ¦‚å¿µ

#### å…³é”®æœ¯è¯­

- **æŠ€å·§**ï¼šç»è¿‡å®è·µéªŒè¯çš„æœ‰æ•ˆæ–¹æ³•
- **æœ€ä½³å®è·µ**ï¼šä¸šç•Œå…¬è®¤çš„ä¼˜ç§€åšæ³•
- **æ¨¡å¼**ï¼šå¯é‡å¤ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆ
- **åŸåˆ™**ï¼šæŒ‡å¯¼è®¾è®¡çš„åŸºæœ¬å‡†åˆ™

#### æ ¸å¿ƒåŸç†

1. **DRYåŸåˆ™**ï¼ˆDon't Repeat Yourselfï¼‰
   - é¿å…ä»£ç é‡å¤
   - æå–å…¬å…±é€»è¾‘
   - ä½¿ç”¨å‡½æ•°å’Œç±»å°è£…

2. **KISSåŸåˆ™**ï¼ˆKeep It Simple, Stupidï¼‰
   - ä¿æŒç®€å•
   - é¿å…è¿‡åº¦è®¾è®¡
   - ä¼˜å…ˆå¯è¯»æ€§

3. **YAGNIåŸåˆ™**ï¼ˆYou Aren't Gonna Need Itï¼‰
   - åªå®ç°å½“å‰éœ€è¦çš„åŠŸèƒ½
   - é¿å…è¿‡åº¦å·¥ç¨‹
   - ä¿æŒä»£ç ç²¾ç®€



## å®æ–½æ­¥éª¤

### å®æ–½æ­¥éª¤

#### æ­¥éª¤1ï¼šå‡†å¤‡å·¥ä½œ

```bash
# å®‰è£…å¿…è¦å·¥å…·
npm install -g typescript eslint prettier

# åˆå§‹åŒ–é¡¹ç›®
npm init -y
npm install --save-dev typescript @types/node
```

#### æ­¥éª¤2ï¼šé…ç½®ç¯å¢ƒ

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  }
}
```

#### æ­¥éª¤3ï¼šç¼–å†™ä»£ç 

```typescript
// åˆ›å»ºä¸»æ–‡ä»¶
// src/index.ts
function main() {
  console.log('Hello, YYCÂ³!');
}

main();
```

#### æ­¥éª¤4ï¼šæµ‹è¯•éªŒè¯

```bash
# è¿è¡Œä»£ç 
npm run dev

# è¿è¡Œæµ‹è¯•
npm test
```



## ä»£ç ç¤ºä¾‹

### ä»£ç ç¤ºä¾‹

#### ç¤ºä¾‹1ï¼šåŸºç¡€ç”¨æ³•

```typescript
// ç®€å•ç¤ºä¾‹
function greet(name: string): string {
  return `Hello, ${name}!`;
}

const message = greet('YYCÂ³');
console.log(message); // è¾“å‡º: Hello, YYCÂ³!
```

#### ç¤ºä¾‹2ï¼šé«˜çº§ç”¨æ³•

```typescript
// å¼‚æ­¥æ“ä½œ
async function fetchData(url: string): Promise<any> {
  const response = await fetch(url);
  const data = await response.json();
  return data;
}

// ä½¿ç”¨ç¤ºä¾‹
fetchData('https://api.example.com/data')
  .then(data => console.log(data))
  .catch(error => console.error('Error:', error));
```

#### ç¤ºä¾‹3ï¼šé”™è¯¯å¤„ç†

```typescript
// è‡ªå®šä¹‰é”™è¯¯ç±»
class ValidationError extends Error {
  constructor(public field: string, message: string) {
    super(message);
    this.name = 'ValidationError';
  }
}

// ä½¿ç”¨ç¤ºä¾‹
function validateEmail(email: string): void {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) {
    throw new ValidationError('email', 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®');
  }
}

try {
  validateEmail('invalid-email');
} catch (error) {
  if (error instanceof ValidationError) {
    console.error(`éªŒè¯å¤±è´¥: ${error.field} - ${error.message}`);
  }
}
```



## æ³¨æ„äº‹é¡¹

### æ³¨æ„äº‹é¡¹

#### å¸¸è§é™·é˜±

1. **å¼‚æ­¥æ“ä½œé”™è¯¯**
```typescript
// âŒ é”™è¯¯ï¼šæ²¡æœ‰ç­‰å¾…å¼‚æ­¥æ“ä½œ
async function processData() {
  const data = fetchData(); // å¿˜è®°await
  console.log(data); // è¾“å‡ºPromiseå¯¹è±¡
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨await
async function processData() {
  const data = await fetchData();
  console.log(data); // è¾“å‡ºå®é™…æ•°æ®
}
```

2. **å†…å­˜æ³„æ¼**
```typescript
// âŒ é”™è¯¯ï¼šæ²¡æœ‰æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
useEffect(() => {
  window.addEventListener('resize', handleResize);
}, []); // ç¼ºå°‘æ¸…ç†å‡½æ•°

// âœ… æ­£ç¡®ï¼šæ¸…ç†äº‹ä»¶ç›‘å¬å™¨
useEffect(() => {
  window.addEventListener('resize', handleResize);
  return () => {
    window.removeEventListener('resize', handleResize);
  };
}, []);
```

#### æ€§èƒ½æ³¨æ„äº‹é¡¹

1. **é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“**
```typescript
// âŒ é”™è¯¯ï¼šæ¯æ¬¡éƒ½åˆ›å»ºæ–°å¯¹è±¡
<Component data={{ value: 1 }} />

// âœ… æ­£ç¡®ï¼šä½¿ç”¨useMemoç¼“å­˜
const memoizedData = useMemo(() => ({ value: 1 }), []);
<Component data={memoizedData} />
```

2. **é¿å…å¤§å¯¹è±¡ä¼ é€’**
```typescript
// âŒ é”™è¯¯ï¼šä¼ é€’æ•´ä¸ªå¤§å¯¹è±¡
<Component user={user} />

// âœ… æ­£ç¡®ï¼šåªä¼ é€’éœ€è¦çš„å±æ€§
<Component userName={user.name} userId={user.id} />
```



## æœ€ä½³å®è·µ

### æœ€ä½³å®è·µ

#### ä»£ç è§„èŒƒ

1. **å‘½åè§„èŒƒ**
```typescript
// å˜é‡ï¼šcamelCase
const userName = 'John';

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;

// ç±»ï¼šPascalCase
class UserService { }

// æ¥å£ï¼šPascalCaseï¼Œå‰ç¼€Iï¼ˆå¯é€‰ï¼‰
interface IUserService { }
```

2. **æ³¨é‡Šè§„èŒƒ**
```typescript
/**
 * åˆ›å»ºç”¨æˆ·
 * @param email - ç”¨æˆ·é‚®ç®±
 * @param password - ç”¨æˆ·å¯†ç 
 * @returns åˆ›å»ºçš„ç”¨æˆ·å¯¹è±¡
 * @throws {Error} å½“é‚®ç®±å·²å­˜åœ¨æ—¶æŠ›å‡ºé”™è¯¯
 */
async function createUser(
  email: string, 
  password: string
): Promise<User> {
  // å®ç°
}
```

#### é”™è¯¯å¤„ç†

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
class AppError extends Error {
  constructor(
    public statusCode: number,
    public message: string,
    public isOperational = true
  ) {
    super(message);
    this.name = this.constructor.name;
    Error.captureStackTrace(this, this.constructor);
  }
}

// ä½¿ç”¨é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((err: Error, req: Request, res: Response, next: NextFunction) => {
  if (err instanceof AppError) {
    return res.status(err.statusCode).json({
      success: false,
      error: err.message
    });
  }
  
  // è®°å½•æœªé¢„æœŸçš„é”™è¯¯
  logger.error('Unexpected error:', err);
  
  return res.status(500).json({
    success: false,
    error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
  });
});
```

#### æ—¥å¿—è®°å½•

```typescript
// ç»“æ„åŒ–æ—¥å¿—
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

// ä½¿ç”¨æ—¥å¿—
logger.info('User created', { userId: user.id, email: user.email });
logger.error('Database connection failed', { error: error.message });
```



## å¸¸è§é—®é¢˜

### å¸¸è§é—®é¢˜

#### Q1: å¦‚ä½•å¤„ç†å¼‚æ­¥é”™è¯¯ï¼Ÿ

**A**: ä½¿ç”¨try-catchæ•è·å¼‚æ­¥é”™è¯¯ï¼š

```typescript
async function handleRequest() {
  try {
    const result = await fetchData();
    return result;
  } catch (error) {
    console.error('è¯·æ±‚å¤±è´¥:', error);
    throw error;
  }
}
```

#### Q2: å¦‚ä½•ä¼˜åŒ–Reactç»„ä»¶æ€§èƒ½ï¼Ÿ

**A**: ä½¿ç”¨ä»¥ä¸‹ä¼˜åŒ–æŠ€æœ¯ï¼š

1. **React.memo**ï¼šé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
2. **useMemo**ï¼šç¼“å­˜è®¡ç®—ç»“æœ
3. **useCallback**ï¼šç¼“å­˜å‡½æ•°å¼•ç”¨
4. **ä»£ç åˆ†å‰²**ï¼šæ‡’åŠ è½½ç»„ä»¶

```typescript
const MemoizedComponent = React.memo(({ data }) => {
  const processedData = useMemo(() => processData(data), [data]);
  return <div>{processedData}</div>;
});
```

#### Q3: å¦‚ä½•ç®¡ç†åº”ç”¨çŠ¶æ€ï¼Ÿ

**A**: æ ¹æ®åº”ç”¨å¤æ‚åº¦é€‰æ‹©åˆé€‚çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼š

1. **ç®€å•åº”ç”¨**ï¼šä½¿ç”¨React Context API
2. **ä¸­ç­‰åº”ç”¨**ï¼šä½¿ç”¨Zustandæˆ–Redux Toolkit
3. **å¤æ‚åº”ç”¨**ï¼šä½¿ç”¨Redux + ä¸­é—´ä»¶

```typescript
// Zustandç¤ºä¾‹
const useStore = create((set) => ({
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
  decrement: () => set((state) => ({ count: state.count - 1 }))
}));
```



## æ¡ˆä¾‹åˆ†æ

### æ¡ˆä¾‹åˆ†æ

#### æ¡ˆä¾‹1ï¼šæ€§èƒ½ä¼˜åŒ–

**é—®é¢˜**ï¼šé¡µé¢åŠ è½½æ—¶é—´è¿‡é•¿ï¼Œç”¨æˆ·ä½“éªŒå·®ã€‚

**åˆ†æ**ï¼š
- é¦–æ¬¡å†…å®¹ç»˜åˆ¶(FCP)ï¼š3.2ç§’
- æœ€å¤§å†…å®¹ç»˜åˆ¶(LCP)ï¼š5.8ç§’
- ç´¯ç§¯å¸ƒå±€åç§»(CLS)ï¼š0.25

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å®ç°ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
2. ä¼˜åŒ–å›¾ç‰‡åŠ è½½ï¼ˆä½¿ç”¨WebPæ ¼å¼ï¼Œæ·»åŠ loading="lazy"ï¼‰
3. å¯ç”¨Gzipå‹ç¼©
4. ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æº

**ç»“æœ**ï¼š
- FCPï¼š1.2ç§’ï¼ˆâ†“62.5%ï¼‰
- LCPï¼š2.1ç§’ï¼ˆâ†“63.8%ï¼‰
- CLSï¼š0.08ï¼ˆâ†“68%ï¼‰

#### æ¡ˆä¾‹2ï¼šé”™è¯¯å¤„ç†æ”¹è¿›

**é—®é¢˜**ï¼šé”™è¯¯ä¿¡æ¯ä¸æ¸…æ™°ï¼Œéš¾ä»¥å®šä½é—®é¢˜ã€‚

**åˆ†æ**ï¼š
- é”™è¯¯ä¿¡æ¯è¿‡äºç®€å•
- ç¼ºå°‘é”™è¯¯ä¸Šä¸‹æ–‡
- æ²¡æœ‰é”™è¯¯è¿½è¸ª

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å®ç°è‡ªå®šä¹‰é”™è¯¯ç±»
2. æ·»åŠ é”™è¯¯å †æ ˆè¿½è¸ª
3. é›†æˆé”™è¯¯ç›‘æ§å·¥å…·ï¼ˆSentryï¼‰
4. å®ç°é”™è¯¯æ—¥å¿—è®°å½•

**ç»“æœ**ï¼š
- é”™è¯¯å®šä½æ—¶é—´å‡å°‘70%
- é”™è¯¯è§£å†³ç‡æé«˜40%
- ç”¨æˆ·æŠ•è¯‰å‡å°‘60%

#### æ¡ˆä¾‹3ï¼šä»£ç é‡æ„

**é—®é¢˜**ï¼šä»£ç é‡å¤ç‡é«˜ï¼Œç»´æŠ¤å›°éš¾ã€‚

**åˆ†æ**ï¼š
- ä»£ç é‡å¤ç‡ï¼š35%
- å‡½æ•°å¹³å‡é•¿åº¦ï¼š120è¡Œ
- åœˆå¤æ‚åº¦ï¼š15

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æå–å…¬å…±é€»è¾‘åˆ°å·¥å…·å‡½æ•°
2. ä½¿ç”¨è®¾è®¡æ¨¡å¼é‡æ„
3. æ‹†åˆ†å¤§å‡½æ•°
4. æ·»åŠ å•å…ƒæµ‹è¯•

**ç»“æœ**ï¼š
- ä»£ç é‡å¤ç‡ï¼š8%ï¼ˆâ†“77%ï¼‰
- å‡½æ•°å¹³å‡é•¿åº¦ï¼š35è¡Œï¼ˆâ†“71%ï¼‰
- åœˆå¤æ‚åº¦ï¼š5ï¼ˆâ†“67%ï¼‰


## ç›¸å…³æ–‡æ¡£

- [ğŸ”– YYCÂ³ éƒ¨ç½²é—®é¢˜æ’æŸ¥æŒ‡å—](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»/04-YYC3-Cater--æŠ€å·§ç±»-éƒ¨ç½²é—®é¢˜æ’æŸ¥æŒ‡å—.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ Dockerå®¹å™¨åŒ–éƒ¨ç½²æŠ€å·§](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»/01-YYC3-Cater--æŠ€å·§ç±»-Dockerå®¹å™¨åŒ–éƒ¨ç½²æŠ€å·§.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ ç°åº¦å‘å¸ƒé£é™©æ§åˆ¶æŠ€å·§](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»/05-YYC3-Cater--æŠ€å·§ç±»-ç°åº¦å‘å¸ƒé£é™©æ§åˆ¶æŠ€å·§.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ K8séƒ¨ç½²è¿ç»´æŠ€å·§](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»/02-YYC3-Cater--æŠ€å·§ç±»-K8séƒ¨ç½²è¿ç»´æŠ€å·§.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æŠ€å·§ç±»
- [ğŸ”– YYCÂ³ CI/CD æµæ°´çº¿æ¶æ„æ–‡æ¡£](YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æ¶æ„ç±»/02-YYC3-Cater--æ¶æ„ç±»-CI_CDæµæ°´çº¿æ¶æ„æ–‡æ¡£.md) - YYC3-Cater-éƒ¨ç½²å‘å¸ƒ/æ¶æ„ç±»
