---

**@file**ï¼šYYCÂ³-YYC3-é”™è¯¯å¤„ç†æ¶æ„è®¾è®¡æ–‡æ¡£
**@description**ï¼šYYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°çš„YYC3-é”™è¯¯å¤„ç†æ¶æ„è®¾è®¡æ–‡æ¡£
**@author**ï¼šYYCÂ³
**@version**ï¼šv1.0.0
**@created**ï¼š2025-01-30
**@updated**ï¼š2025-01-30
**@status**ï¼špublished
**@tags**ï¼šæ¶æ„è®¾è®¡,YYCÂ³,ç³»ç»Ÿæ¶æ„

---
# ğŸ”– YYCÂ³ é”™è¯¯å¤„ç†æ¶æ„è®¾è®¡æ–‡æ¡£

> ***YanYuCloudCube***
> **æ ‡è¯­**ï¼šè¨€å¯è±¡é™ | è¯­æ¢æœªæ¥
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **æ ‡è¯­**ï¼šä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| å±æ€§ | å†…å®¹ |
|------|------|
| **æ–‡æ¡£æ ‡é¢˜** | YYCÂ³ é”™è¯¯å¤„ç†æ¶æ„è®¾è®¡æ–‡æ¡£ |
| **æ–‡æ¡£ç±»å‹** | æ¶æ„è®¾è®¡æ–‡æ¡£ |
| **æ‰€å±é˜¶æ®µ** | ç³»ç»Ÿæ¶æ„è®¾è®¡ |
| **éµå¾ªè§„èŒƒ** | YYCÂ³ å›¢é˜Ÿæ ‡å‡†åŒ–è§„èŒƒ v1.0.0 |
| **ç‰ˆæœ¬å·** | v1.0.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2025-01-30 |
| **ä½œè€…** | YYCÂ³ Team |
| **æ›´æ–°æ—¥æœŸ** | 2025-01-30 |

---

## ğŸ“‘ ç›®å½•

1. [é”™è¯¯å¤„ç†æ¦‚è¿°](#1-é”™è¯¯å¤„ç†æ¦‚è¿°)
2. [é”™è¯¯åˆ†ç±»ä½“ç³»](#2-é”™è¯¯åˆ†ç±»ä½“ç³»)
3. [é”™è¯¯å¤„ç†æ¶æ„è®¾è®¡](#3-é”™è¯¯å¤„ç†æ¶æ„è®¾è®¡)
4. [å‰ç«¯é”™è¯¯å¤„ç†æœºåˆ¶](#4-å‰ç«¯é”™è¯¯å¤„ç†æœºåˆ¶)
5. [åç«¯é”™è¯¯å¤„ç†æœºåˆ¶](#5-åç«¯é”™è¯¯å¤„ç†æœºåˆ¶)
6. [é”™è¯¯ç›‘æ§ä¸å‘Šè­¦](#6-é”™è¯¯ç›‘æ§ä¸å‘Šè­¦)
7. [æ•…éšœæ’æŸ¥ä¸æ¢å¤](#7-æ•…éšœæ’æŸ¥ä¸æ¢å¤)
8. [æœ€ä½³å®è·µä¸è§„èŒƒ](#8-æœ€ä½³å®è·µä¸è§„èŒƒ)

---

## 1. æ¦‚è¿°

### 1.1 è®¾è®¡ç›®æ ‡

æœ¬æ¶æ„è®¾è®¡æ–‡æ¡£æ—¨åœ¨ä¸ºYYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°æä¾›æ¸…æ™°ã€å®Œæ•´çš„æŠ€æœ¯æ¶æ„æŒ‡å¯¼ã€‚ä¸»è¦ç›®æ ‡åŒ…æ‹¬ï¼š

- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒä¸šåŠ¡å¿«é€Ÿæ‰©å±•ï¼Œæ¨¡å—åŒ–è®¾è®¡ä¾¿äºåŠŸèƒ½è¿­ä»£
- **é«˜æ€§èƒ½**ï¼šä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼Œç¡®ä¿é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ç¨³å®šè¿è¡Œ
- **é«˜å¯ç”¨æ€§**ï¼šå®ç°ç³»ç»Ÿé«˜å¯ç”¨ï¼Œæ•…éšœè‡ªåŠ¨æ¢å¤ï¼Œä¿éšœä¸šåŠ¡è¿ç»­æ€§
- **å®‰å…¨æ€§**ï¼šå»ºç«‹å®Œå–„çš„å®‰å…¨ä½“ç³»ï¼Œä¿æŠ¤æ•°æ®å’Œç³»ç»Ÿå®‰å…¨
- **æ˜“ç»´æŠ¤æ€§**ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œæ–‡æ¡£å®Œå–„ï¼Œä¾¿äºå›¢é˜Ÿåä½œå’Œç»´æŠ¤

é€šè¿‡æœ¬æ¶æ„è®¾è®¡ï¼Œç¡®ä¿å¹³å°èƒ½å¤Ÿæ»¡è¶³å½“å‰ä¸šåŠ¡éœ€æ±‚ï¼Œå¹¶ä¸ºæœªæ¥çš„å‘å±•å¥ å®šåšå®åŸºç¡€ã€‚

### 1.2 è®¾è®¡åŸåˆ™

æ¶æ„è®¾è®¡éµå¾ªä»¥ä¸‹æ ¸å¿ƒåŸåˆ™ï¼š

- **å•ä¸€èŒè´£åŸåˆ™**ï¼šæ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„ä¸šåŠ¡åŠŸèƒ½
- **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•
- **ä¾èµ–å€’ç½®åŸåˆ™**ï¼šé«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œéƒ½ä¾èµ–æŠ½è±¡
- **æ¥å£éš”ç¦»åŸåˆ™**ï¼šä½¿ç”¨ç»†ç²’åº¦çš„æ¥å£ï¼Œé¿å…æ¥å£æ±¡æŸ“
- **æœ€å°‘çŸ¥è¯†åŸåˆ™**ï¼šæ¨¡å—é—´æœ€å°åŒ–ä¾èµ–ï¼Œé™ä½è€¦åˆåº¦

åŒæ—¶éµå¾ªYYCÂ³ã€Œäº”é«˜äº”æ ‡äº”åŒ–ã€æ ¸å¿ƒç†å¿µï¼š
- **äº”é«˜**ï¼šé«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€é«˜å®‰å…¨ã€é«˜æ‰©å±•ã€é«˜å¯ç»´æŠ¤
- **äº”æ ‡**ï¼šæ ‡å‡†åŒ–ã€è§„èŒƒåŒ–ã€è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–ã€å¯è§†åŒ–
- **äº”åŒ–**ï¼šæµç¨‹åŒ–ã€æ–‡æ¡£åŒ–ã€å·¥å…·åŒ–ã€æ•°å­—åŒ–ã€ç”Ÿæ€åŒ–

### 1.3 æŠ€æœ¯é€‰å‹

æŠ€æœ¯æ ˆé€‰æ‹©åŸºäºä»¥ä¸‹è€ƒè™‘ï¼š

**å‰ç«¯æŠ€æœ¯æ ˆ**
- React 18+ï¼šé‡‡ç”¨ç°ä»£åŒ–å‰ç«¯æ¡†æ¶ï¼Œç»„ä»¶åŒ–å¼€å‘
- TypeScript 5.0+ï¼šç±»å‹å®‰å…¨ï¼Œæé«˜ä»£ç è´¨é‡
- Next.js 14+ï¼šSSR/SSGæ”¯æŒï¼Œä¼˜åŒ–SEOå’Œæ€§èƒ½
- Tailwind CSSï¼šåŸå­åŒ–CSSï¼Œå¿«é€Ÿæ„å»ºUI

**åç«¯æŠ€æœ¯æ ˆ**
- Node.js 18+ï¼šé«˜æ€§èƒ½JavaScriptè¿è¡Œæ—¶
- Express/Fastifyï¼šè½»é‡çº§Webæ¡†æ¶
- PostgreSQL 15+ï¼šå…³ç³»å‹æ•°æ®åº“ï¼ŒACIDä¿è¯
- Redis 7+ï¼šç¼“å­˜å’Œä¼šè¯å­˜å‚¨

**åŸºç¡€è®¾æ–½**
- Dockerï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼Œç¯å¢ƒä¸€è‡´æ€§
- Kubernetesï¼šå®¹å™¨ç¼–æ’ï¼Œè‡ªåŠ¨åŒ–è¿ç»´
- Nginxï¼šåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡
- Prometheus + Grafanaï¼šç›‘æ§å’Œå‘Šè­¦

**å¼€å‘å·¥å…·**
- Gitï¼šç‰ˆæœ¬æ§åˆ¶
- ESLint + Prettierï¼šä»£ç è§„èŒƒ
- Jest + Vitestï¼šå•å…ƒæµ‹è¯•
- GitHub Actionsï¼šCI/CDè‡ªåŠ¨åŒ–

## 2. æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

YYCÂ³é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†ä¸ºä»¥ä¸‹å±‚æ¬¡ï¼š

**è¡¨ç°å±‚ï¼ˆPresentation Layerï¼‰**
- Webå‰ç«¯ï¼šReact + Next.jsæ„å»ºçš„å•é¡µåº”ç”¨
- ç§»åŠ¨ç«¯ï¼šå“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šè®¾å¤‡è®¿é—®
- ç®¡ç†åå°ï¼šç‹¬ç«‹çš„ç®¡ç†ç•Œé¢

**åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰**
- APIç½‘å…³ï¼šç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±åˆ†å‘
- ä¸šåŠ¡æœåŠ¡ï¼šè®¢å•ã€ç”¨æˆ·ã€å•†å“ç­‰æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- è®¤è¯æˆæƒï¼šJWTè®¤è¯ï¼ŒRBACæƒé™æ§åˆ¶

**é¢†åŸŸå±‚ï¼ˆDomain Layerï¼‰**
- é¢†åŸŸæ¨¡å‹ï¼šæ ¸å¿ƒä¸šåŠ¡å®ä½“å’Œè§„åˆ™
- é¢†åŸŸæœåŠ¡ï¼šå¤æ‚ä¸šåŠ¡é€»è¾‘å°è£…
- ä»“å‚¨æ¥å£ï¼šæ•°æ®è®¿é—®æŠ½è±¡

**åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructure Layerï¼‰**
- æ•°æ®åº“ï¼šPostgreSQLä¸»ä»æ¶æ„
- ç¼“å­˜ï¼šRedisé›†ç¾¤
- æ¶ˆæ¯é˜Ÿåˆ—ï¼šRabbitMQ/Kafka
- æ–‡ä»¶å­˜å‚¨ï¼šOSS/MinIO

**è·¨å±‚å…³æ³¨ç‚¹**
- æ—¥å¿—ç›‘æ§ï¼šELK Stack
- é…ç½®ç®¡ç†ï¼šApollo/Nacos
- æœåŠ¡å‘ç°ï¼šConsul/Eureka
- é“¾è·¯è¿½è¸ªï¼šJaeger/SkyWalking

### 2.2 æ¨¡å—åˆ’åˆ†

ç³»ç»ŸæŒ‰ç…§ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†ä¸ºä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š

**ç”¨æˆ·æ¨¡å—ï¼ˆUser Moduleï¼‰**
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€è®¤è¯
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- æƒé™å’Œè§’è‰²ç®¡ç†

**å•†å“æ¨¡å—ï¼ˆProduct Moduleï¼‰**
- å•†å“ä¿¡æ¯ç®¡ç†
- å•†å“åˆ†ç±»å’Œæ ‡ç­¾
- åº“å­˜ç®¡ç†

**è®¢å•æ¨¡å—ï¼ˆOrder Moduleï¼‰**
- è®¢å•åˆ›å»ºå’Œæ”¯ä»˜
- è®¢å•çŠ¶æ€æµè½¬
- è®¢å•æŸ¥è¯¢å’Œç»Ÿè®¡

**æ”¯ä»˜æ¨¡å—ï¼ˆPayment Moduleï¼‰**
- æ”¯ä»˜æ¥å£é›†æˆ
- æ”¯ä»˜çŠ¶æ€åŒæ­¥
- é€€æ¬¾å¤„ç†

**è¥é”€æ¨¡å—ï¼ˆMarketing Moduleï¼‰**
- ä¼˜æƒ åˆ¸ç®¡ç†
- ä¿ƒé”€æ´»åŠ¨
- ä¼šå‘˜ç§¯åˆ†

**æŠ¥è¡¨æ¨¡å—ï¼ˆReport Moduleï¼‰**
- é”€å”®æŠ¥è¡¨
- æ•°æ®åˆ†æ
- å¯è§†åŒ–å±•ç¤º

**ç³»ç»Ÿæ¨¡å—ï¼ˆSystem Moduleï¼‰**
- é…ç½®ç®¡ç†
- æ—¥å¿—ç®¡ç†
- ç›‘æ§å‘Šè­¦

### 2.3 æ•°æ®æµå‘

## 3. æŠ€æœ¯å®ç°

### 3.1 æ ¸å¿ƒæŠ€æœ¯

### 3.2 å…³é”®ç®—æ³•

### 3.3 æ€§èƒ½ä¼˜åŒ–

## 4. æ¥å£è®¾è®¡

### 4.1 APIæ¥å£

### 4.2 æ•°æ®æ¥å£

### 4.3 æ¶ˆæ¯æ¥å£

## 5. éƒ¨ç½²æ–¹æ¡ˆ

### 5.1 éƒ¨ç½²æ¶æ„

### 5.2 é…ç½®ç®¡ç†

### 5.3 ç›‘æ§å‘Šè­¦

## 6. é™„å½•

### 6.1 æœ¯è¯­è¡¨

### 6.2 å‚è€ƒèµ„æ–™

## 1. é”™è¯¯å¤„ç†æ¦‚è¿°

### 1.1 è®¾è®¡ç›®æ ‡

YYCÂ³ é”™è¯¯å¤„ç†æ¶æ„åŸºäº **ã€Œäº”é«˜äº”æ ‡äº”åŒ–ã€** æ ¸å¿ƒç†å¿µæ„å»ºï¼Œæ—¨åœ¨å®ç°ï¼š

- **é«˜å¯ç”¨**ï¼šç¡®ä¿ç³»ç»Ÿåœ¨é”™è¯¯å‘ç”Ÿæ—¶èƒ½å¤Ÿä¼˜é›…é™çº§ï¼Œä¸å½±å“æ ¸å¿ƒåŠŸèƒ½
- **é«˜æ€§èƒ½**ï¼šé”™è¯¯å¤„ç†æœºåˆ¶è½»é‡é«˜æ•ˆï¼Œä¸å½±å“ç³»ç»Ÿæ•´ä½“æ€§èƒ½
- **é«˜å®‰å…¨**ï¼šæ•æ„Ÿé”™è¯¯ä¿¡æ¯ä¸æ³„éœ²ï¼Œé˜²æ­¢ä¿¡æ¯æ³„éœ²é£é™©
- **é«˜æ‰©å±•**ï¼šæ”¯æŒè‡ªå®šä¹‰é”™è¯¯ç±»å‹å’Œå¤„ç†ç­–ç•¥
- **é«˜å¯ç»´æŠ¤**ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†æµç¨‹ï¼Œä¾¿äºæ’æŸ¥å’Œä¿®å¤

### 1.2 æ ¸å¿ƒåŸåˆ™

#### 1.2.1 ç»Ÿä¸€æ€§åŸåˆ™
- å…¨å±€ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- æ ‡å‡†åŒ–çš„é”™è¯¯å“åº”æ ¼å¼
- ä¸€è‡´çš„é”™è¯¯ç ä½“ç³»

#### 1.2.2 å¯è§‚æµ‹æ€§åŸåˆ™
- å®Œæ•´çš„é”™è¯¯æ—¥å¿—è®°å½•
- ç»“æ„åŒ–çš„é”™è¯¯ä¿¡æ¯
- å®æ—¶é”™è¯¯ç›‘æ§å’Œå‘Šè­¦

#### 1.2.3 ç”¨æˆ·ä½“éªŒåŸåˆ™
- å‹å¥½çš„é”™è¯¯æç¤ºä¿¡æ¯
- æ¸…æ™°çš„é”™è¯¯æ¢å¤æŒ‡å¼•
- é€‚å½“çš„é”™è¯¯é‡è¯•æœºåˆ¶

#### 1.2.4 å®‰å…¨æ€§åŸåˆ™
- ç”Ÿäº§ç¯å¢ƒéšè—æ•æ„Ÿä¿¡æ¯
- é˜²æ­¢é”™è¯¯ä¿¡æ¯æ³„éœ²
- å®‰å…¨çš„é”™è¯¯æ—¥å¿—å­˜å‚¨

### 1.3 é€‚ç”¨èŒƒå›´

æœ¬æ¶æ„é€‚ç”¨äº YYCÂ³ é¤é¥®è¡Œä¸šæ™ºèƒ½åŒ–å¹³å°çš„æ‰€æœ‰å±‚çº§ï¼š

- **å‰ç«¯åº”ç”¨**ï¼šç®¡ç†åå°ã€ç§»åŠ¨ç«¯åº”ç”¨ã€å°ç¨‹åº
- **åç«¯æœåŠ¡**ï¼šAPIç½‘å…³ã€å¾®æœåŠ¡ã€ä¸šåŠ¡æœåŠ¡
- **åŸºç¡€è®¾æ–½**ï¼šæ•°æ®åº“ã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ç¬¬ä¸‰æ–¹æœåŠ¡

---

## 2. é”™è¯¯åˆ†ç±»ä½“ç³»

### 2.1 æŒ‰é”™è¯¯æ¥æºåˆ†ç±»

#### 2.1.1 å®¢æˆ·ç«¯é”™è¯¯ï¼ˆ4xxï¼‰

| é”™è¯¯ç  | åç§° | è¯´æ˜ | å¤„ç†ç­–ç•¥ |
|--------|------|------|----------|
| 400 | Bad Request | è¯·æ±‚å‚æ•°é”™è¯¯ | è¿”å›è¯¦ç»†éªŒè¯é”™è¯¯ä¿¡æ¯ |
| 401 | Unauthorized | æœªè®¤è¯ | é‡å®šå‘åˆ°ç™»å½•é¡µé¢ |
| 403 | Forbidden | æƒé™ä¸è¶³ | æç¤ºæƒé™ä¸è¶³ï¼Œè”ç³»ç®¡ç†å‘˜ |
| 404 | Not Found | èµ„æºä¸å­˜åœ¨ | è¿”å›å‹å¥½æç¤ºä¿¡æ¯ |
| 409 | Conflict | èµ„æºå†²çª | æç¤ºå†²çªåŸå› ï¼Œå»ºè®®è§£å†³æ–¹æ¡ˆ |
| 422 | Unprocessable Entity | è¯­ä¹‰é”™è¯¯ | è¿”å›å­—æ®µçº§éªŒè¯é”™è¯¯ |
| 429 | Too Many Requests | è¯·æ±‚è¿‡äºé¢‘ç¹ | è¿”å›é‡è¯•ç­‰å¾…æ—¶é—´ |

#### 2.1.2 æœåŠ¡ç«¯é”™è¯¯ï¼ˆ5xxï¼‰

| é”™è¯¯ç  | åç§° | è¯´æ˜ | å¤„ç†ç­–ç•¥ |
|--------|------|------|----------|
| 500 | Internal Server Error | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | è®°å½•è¯¦ç»†æ—¥å¿—ï¼Œè¿”å›é€šç”¨é”™è¯¯ä¿¡æ¯ |
| 502 | Bad Gateway | ç½‘å…³é”™è¯¯ | æ£€æŸ¥ä¸Šæ¸¸æœåŠ¡çŠ¶æ€ |
| 503 | Service Unavailable | æœåŠ¡ä¸å¯ç”¨ | è¿”å›ç»´æŠ¤æç¤ºï¼Œå¯ç”¨é™çº§æ–¹æ¡ˆ |
| 504 | Gateway Timeout | ç½‘å…³è¶…æ—¶ | æ£€æŸ¥æœåŠ¡å“åº”æ—¶é—´ï¼Œä¼˜åŒ–æ€§èƒ½ |

### 2.2 æŒ‰é”™è¯¯ç±»å‹åˆ†ç±»

#### 2.2.1 ç½‘ç»œé”™è¯¯
- è¯·æ±‚è¶…æ—¶
- ç½‘ç»œè¿æ¥å¤±è´¥
- DNSè§£æå¤±è´¥
- CORSé”™è¯¯

#### 2.2.2 ä¸šåŠ¡é”™è¯¯
- å‚æ•°éªŒè¯å¤±è´¥
- ä¸šåŠ¡è§„åˆ™å†²çª
- æ•°æ®çŠ¶æ€å¼‚å¸¸
- æƒé™éªŒè¯å¤±è´¥

#### 2.2.3 ç³»ç»Ÿé”™è¯¯
- å†…å­˜æº¢å‡º
- æ•°æ®åº“è¿æ¥å¤±è´¥
- ç¼“å­˜æœåŠ¡å¼‚å¸¸
- æ¶ˆæ¯é˜Ÿåˆ—æ•…éšœ

#### 2.2.4 ç¬¬ä¸‰æ–¹æœåŠ¡é”™è¯¯
- æ”¯ä»˜æ¥å£å¼‚å¸¸
- çŸ­ä¿¡å‘é€å¤±è´¥
- åœ°å›¾æœåŠ¡è¶…æ—¶
- æ–‡ä»¶ä¸Šä¼ å¤±è´¥

### 2.3 é”™è¯¯ç ä½“ç³»

#### 2.3.1 é”™è¯¯ç æ ¼å¼

```
YYC3-XXX-YYYY

XXX: æ¨¡å—æ ‡è¯†ï¼ˆå¦‚ AUTHã€USERã€ORDERï¼‰
YYYY: å…·ä½“é”™è¯¯ç¼–å·ï¼ˆå¦‚ 0001ã€0002ï¼‰
```

#### 2.3.2 æ¨¡å—æ ‡è¯†

| æ¨¡å— | æ ‡è¯† | è¯´æ˜ |
|------|------|------|
| è®¤è¯æˆæƒ | AUTH | ç”¨æˆ·è®¤è¯ã€æƒé™éªŒè¯ |
| ç”¨æˆ·ç®¡ç† | USER | ç”¨æˆ·ä¿¡æ¯ã€è´¦æˆ·ç®¡ç† |
| è®¢å•ç®¡ç† | ORDER | è®¢å•åˆ›å»ºã€æ”¯ä»˜ã€é…é€ |
| å•†å“ç®¡ç† | PRODUCT | å•†å“ä¿¡æ¯ã€åº“å­˜ç®¡ç† |
| è¥é”€æ´»åŠ¨ | PROMO | ä¼˜æƒ åˆ¸ã€ä¿ƒé”€æ´»åŠ¨ |
| æ”¯ä»˜æœåŠ¡ | PAYMENT | æ”¯ä»˜æ¥å£ã€é€€æ¬¾å¤„ç† |
| æ¶ˆæ¯é€šçŸ¥ | NOTIFY | çŸ­ä¿¡ã€é‚®ä»¶ã€æ¨é€ |
| æ–‡ä»¶æœåŠ¡ | FILE | æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€å­˜å‚¨ |
| ç³»ç»Ÿç®¡ç† | SYSTEM | ç³»ç»Ÿé…ç½®ã€æ—¥å¿—ç›‘æ§ |

#### 2.3.3 é”™è¯¯ç ç¤ºä¾‹

```typescript
// è®¤è¯æ¨¡å—é”™è¯¯ç 
const AUTH_ERROR_CODES = {
  INVALID_CREDENTIALS: 'YYC3-AUTH-0001',  // ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
  TOKEN_EXPIRED: 'YYC3-AUTH-0002',         // ä»¤ç‰Œå·²è¿‡æœŸ
  TOKEN_INVALID: 'YYC3-AUTH-0003',         // ä»¤ç‰Œæ— æ•ˆ
  ACCOUNT_LOCKED: 'YYC3-AUTH-0004',         // è´¦æˆ·å·²é”å®š
  PERMISSION_DENIED: 'YYC3-AUTH-0005',      // æƒé™ä¸è¶³
}

// è®¢å•æ¨¡å—é”™è¯¯ç 
const ORDER_ERROR_CODES = {
  PRODUCT_OUT_OF_STOCK: 'YYC3-ORDER-0001',  // å•†å“åº“å­˜ä¸è¶³
  PAYMENT_FAILED: 'YYC3-ORDER-0002',         // æ”¯ä»˜å¤±è´¥
  ORDER_NOT_FOUND: 'YYC3-ORDER-0003',         // è®¢å•ä¸å­˜åœ¨
  ORDER_STATUS_INVALID: 'YYC3-ORDER-0004',   // è®¢å•çŠ¶æ€æ— æ•ˆ
  DELIVERY_FAILED: 'YYC3-ORDER-0005',        // é…é€å¤±è´¥
}
```

---

## 3. é”™è¯¯å¤„ç†æ¶æ„è®¾è®¡

### 3.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®¢æˆ·ç«¯å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Web åº”ç”¨    â”‚  â”‚  ç§»åŠ¨ç«¯åº”ç”¨  â”‚  â”‚  å°ç¨‹åº      â”‚      â”‚
â”‚  â”‚ ErrorBoundaryâ”‚  â”‚ Error Handlerâ”‚  â”‚ Error Handlerâ”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API ç½‘å…³å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶ (errorHandler)                    â”‚  â”‚
â”‚  â”‚  - é”™è¯¯æ•è·ä¸åˆ†ç±»                                     â”‚  â”‚
â”‚  â”‚  - é”™è¯¯å“åº”æ ¼å¼åŒ–                                     â”‚  â”‚
â”‚  â”‚  - é”™è¯¯æ—¥å¿—è®°å½•                                       â”‚  â”‚
â”‚  â”‚  - é”™è¯¯ç»Ÿè®¡ä¸ç›‘æ§                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å¾®æœåŠ¡å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  ç”¨æˆ·æœåŠ¡    â”‚  â”‚  è®¢å•æœåŠ¡    â”‚  â”‚  æ”¯ä»˜æœåŠ¡    â”‚      â”‚
â”‚  â”‚ Error Handlerâ”‚  â”‚ Error Handlerâ”‚  â”‚ Error Handlerâ”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å­˜å‚¨å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  MySQL       â”‚  â”‚  Redis       â”‚  â”‚  MongoDB     â”‚      â”‚
â”‚  â”‚ Error Handlerâ”‚  â”‚ Error Handlerâ”‚  â”‚ Error Handlerâ”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç›‘æ§ä¸å‘Šè­¦å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  æ—¥å¿—ç³»ç»Ÿ     â”‚  â”‚  ç›‘æ§ç³»ç»Ÿ     â”‚  â”‚  å‘Šè­¦ç³»ç»Ÿ     â”‚      â”‚
â”‚  â”‚  (ELK)       â”‚  â”‚  (Prometheus) â”‚  â”‚  (Alertmanager)â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 é”™è¯¯å¤„ç†æµç¨‹

#### 3.2.1 å‰ç«¯é”™è¯¯å¤„ç†æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·æ“ä½œ] --> B{å‘ç”Ÿé”™è¯¯?}
    B -->|æ˜¯| C[ErrorBoundaryæ•è·]
    B -->|å¦| D[æ­£å¸¸æ‰§è¡Œ]
    C --> E[é”™è¯¯åˆ†ç±»]
    E --> F{é”™è¯¯ç±»å‹}
    F -->|ç½‘ç»œé”™è¯¯| G[æ˜¾ç¤ºç½‘ç»œé”™è¯¯æç¤º]
    F -->|æƒé™é”™è¯¯| H[æ˜¾ç¤ºæƒé™é”™è¯¯æç¤º]
    F -->|æœåŠ¡ç«¯é”™è¯¯| I[æ˜¾ç¤ºæœåŠ¡ç«¯é”™è¯¯æç¤º]
    F -->|å®¢æˆ·ç«¯é”™è¯¯| J[æ˜¾ç¤ºå®¢æˆ·ç«¯é”™è¯¯æç¤º]
    G --> K[è®°å½•é”™è¯¯æ—¥å¿—]
    H --> K
    I --> K
    J --> K
    K --> L[å‘é€é”™è¯¯æŠ¥å‘Š]
    L --> M[ç”¨æˆ·æ“ä½œ]
    M --> N{é‡è¯•?}
    N -->|æ˜¯| O[æ‰§è¡Œé‡è¯•é€»è¾‘]
    N -->|å¦| P[åˆ·æ–°é¡µé¢/è¿”å›é¦–é¡µ]
    O --> Q{é‡è¯•æˆåŠŸ?}
    Q -->|æ˜¯| D
    Q -->|å¦| G
```

#### 3.2.2 åç«¯é”™è¯¯å¤„ç†æµç¨‹

```mermaid
graph TD
    A[æ¥æ”¶è¯·æ±‚] --> B[æ‰§è¡Œä¸šåŠ¡é€»è¾‘]
    B --> C{å‘ç”Ÿé”™è¯¯?}
    C -->|æ˜¯| D[é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ•è·]
    C -->|å¦| E[è¿”å›æˆåŠŸå“åº”]
    D --> F[é”™è¯¯åˆ†ç±»]
    F --> G{é”™è¯¯ç±»å‹}
    G -->|AppError| H[å¤„ç†åº”ç”¨é”™è¯¯]
    G -->|ValidationError| I[å¤„ç†éªŒè¯é”™è¯¯]
    G -->|SystemError| J[å¤„ç†ç³»ç»Ÿé”™è¯¯]
    G -->|ThirdPartyError| K[å¤„ç†ç¬¬ä¸‰æ–¹é”™è¯¯]
    H --> L[è®°å½•é”™è¯¯æ—¥å¿—]
    I --> L
    J --> L
    K --> L
    L --> M[æ ¼å¼åŒ–é”™è¯¯å“åº”]
    M --> N[è¿”å›é”™è¯¯å“åº”]
    N --> O[æ›´æ–°ç›‘æ§æŒ‡æ ‡]
    O --> P{éœ€è¦å‘Šè­¦?}
    P -->|æ˜¯| Q[è§¦å‘å‘Šè­¦]
    P -->|å¦| R[ç»“æŸ]
    Q --> R
```

### 3.3 é”™è¯¯å“åº”æ ¼å¼

#### 3.3.1 æ ‡å‡†é”™è¯¯å“åº”

```typescript
interface ErrorResponse {
  success: false;
  code: string;           // é”™è¯¯ç 
  message: string;        // é”™è¯¯ä¿¡æ¯
  details?: any;          // é”™è¯¯è¯¦æƒ…ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
  timestamp: string;       // æ—¶é—´æˆ³
  requestId: string;      // è¯·æ±‚ID
  path?: string;          // è¯·æ±‚è·¯å¾„
  stack?: string;         // å †æ ˆä¿¡æ¯ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
}
```

#### 3.3.2 é”™è¯¯å“åº”ç¤ºä¾‹

```json
{
  "success": false,
  "code": "YYC3-AUTH-0001",
  "message": "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯",
  "timestamp": "2025-01-30T10:30:00.000Z",
  "requestId": "req_1234567890"
}
```

```json
{
  "success": false,
  "code": "YYC3-ORDER-0001",
  "message": "å•†å“åº“å­˜ä¸è¶³",
  "details": {
    "productId": "prod_123",
    "productName": "æ‹›ç‰Œçº¢çƒ§è‚‰å¥—é¤",
    "requestedQuantity": 10,
    "availableQuantity": 5
  },
  "timestamp": "2025-01-30T10:30:00.000Z",
  "requestId": "req_1234567890"
}
```

---

## 4. å‰ç«¯é”™è¯¯å¤„ç†æœºåˆ¶

### 4.1 ErrorBoundary ç»„ä»¶

#### 4.1.1 ç»„ä»¶æ¦‚è¿°

<mcfile name="ErrorBoundary.vue" path="/Users/yanyu/yyc3-catering-platform/frontend/apps/admin-dashboard/src/components/UI/ErrorBoundary.vue"></mcfile>

ErrorBoundary ç»„ä»¶æ˜¯å‰ç«¯é”™è¯¯å¤„ç†çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£æ•è· React ç»„ä»¶æ ‘ä¸­çš„é”™è¯¯ï¼Œå¹¶æä¾›å‹å¥½çš„é”™è¯¯ç•Œé¢å’Œæ¢å¤æœºåˆ¶ã€‚

#### 4.1.2 æ ¸å¿ƒåŠŸèƒ½

- **é”™è¯¯æ•è·**ï¼šæ•è·å­ç»„ä»¶æ¸²æŸ“é”™è¯¯ã€ç”Ÿå‘½å‘¨æœŸé”™è¯¯ã€äº‹ä»¶å¤„ç†é”™è¯¯
- **é”™è¯¯åˆ†ç±»**ï¼šè‡ªåŠ¨è¯†åˆ«ç½‘ç»œé”™è¯¯ã€æƒé™é”™è¯¯ã€æœåŠ¡ç«¯é”™è¯¯ã€å®¢æˆ·ç«¯é”™è¯¯
- **é”™è¯¯å±•ç¤º**ï¼šæä¾›å‹å¥½çš„é”™è¯¯æç¤ºç•Œé¢
- **é”™è¯¯æ¢å¤**ï¼šæ”¯æŒé‡è¯•ã€åˆ·æ–°é¡µé¢ã€è¿”å›é¦–é¡µç­‰æ¢å¤æ“ä½œ
- **é”™è¯¯æŠ¥å‘Š**ï¼šæ”¯æŒç”¨æˆ·æäº¤é”™è¯¯æŠ¥å‘Šï¼Œå¸®åŠ©æ”¹è¿›ç³»ç»Ÿ

#### 4.1.3 ç»„ä»¶æ¥å£

```typescript
interface Props {
  fallback?: (error: Error, errorInfo: ErrorInfo) => void
  onError?: (error: Error, errorInfo: ErrorInfo) => void
  enableReporting?: boolean
  maxRetries?: number
  retryDelay?: number
}

interface ErrorInfo {
  message: string
  stack?: string
  componentStack?: string
  timestamp: number
  url: string
  userAgent: string
  userId?: string
}
```

#### 4.1.4 ä½¿ç”¨ç¤ºä¾‹

```vue
<template>
  <ErrorBoundary
    :enable-reporting="true"
    :max-retries="3"
    :retry-delay="1000"
    @error="handleError"
  >
    <YourComponent />
  </ErrorBoundary>
</template>

<script setup lang="ts">
import ErrorBoundary from '@/components/UI/ErrorBoundary.vue'

const handleError = (error: Error, errorInfo: ErrorInfo) => {
  console.error('Error caught:', error, errorInfo)
  // å‘é€é”™è¯¯æ—¥å¿—åˆ°æœåŠ¡å™¨
  sendErrorLog(error, errorInfo)
}
</script>
```

### 4.2 å…¨å±€é”™è¯¯ç›‘å¬

#### 4.2.1 window.onerror

ç›‘å¬å…¨å±€ JavaScript é”™è¯¯ï¼š

```typescript
const errorHandler = (event: ErrorEvent) => {
  handleError(
    new Error(event.message),
    event.error,
    'Global Error Event'
  )
  event.preventDefault()
}

window.addEventListener('error', errorHandler)
```

#### 4.2.2 unhandledrejection

ç›‘å¬æœªå¤„ç†çš„ Promise æ‹’ç»ï¼š

```typescript
const unhandledRejectionHandler = (event: PromiseRejectionEvent) => {
  handleError(
    new Error(event.reason?.message || 'Unhandled Promise Rejection'),
    event.reason,
    'Unhandled Promise Rejection'
  )
  event.preventDefault()
}

window.addEventListener('unhandledrejection', unhandledRejectionHandler)
```

### 4.3 é”™è¯¯åˆ†ç±»ä¸å¤„ç†

#### 4.3.1 é”™è¯¯ç±»å‹è¯†åˆ«

```typescript
const analyzeError = (error: Error) => {
  const message = error.message.toLowerCase()

  if (message.includes('network') || 
      message.includes('fetch') || 
      message.includes('timeout')) {
    return 'network'
  } else if (message.includes('permission') || 
             message.includes('unauthorized') || 
             message.includes('403')) {
    return 'permission'
  } else if (message.includes('500') || 
             message.includes('server error')) {
    return 'server'
  } else {
    return 'client'
  }
}
```

#### 4.3.2 é”™è¯¯å¤„ç†ç­–ç•¥

| é”™è¯¯ç±»å‹ | å¤„ç†ç­–ç•¥ | ç”¨æˆ·æç¤º |
|---------|---------|---------|
| ç½‘ç»œé”™è¯¯ | è‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š3æ¬¡ï¼‰ | è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œç„¶åé‡è¯• |
| æƒé™é”™è¯¯ | è·³è½¬åˆ°ç™»å½•é¡µé¢ | æ‚¨æ²¡æœ‰æƒé™è®¿é—®æ­¤é¡µé¢ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ |
| æœåŠ¡ç«¯é”™è¯¯ | æ˜¾ç¤ºé€šç”¨é”™è¯¯ä¿¡æ¯ | æœåŠ¡å™¨æš‚æ—¶æ— æ³•å“åº”ï¼Œè¯·ç¨åå†è¯• |
| å®¢æˆ·ç«¯é”™è¯¯ | æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯ | å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯• |

### 4.4 é”™è¯¯æŠ¥å‘Šæœºåˆ¶

#### 4.4.1 é”™è¯¯æŠ¥å‘Šè¡¨å•

```typescript
interface ErrorReport {
  errorInfo: ErrorInfo
  userDescription: string
  userContact: string
  userAgent: string
  timestamp: number
  url: string
}
```

#### 4.4.2 æäº¤é”™è¯¯æŠ¥å‘Š

```typescript
const submitReport = async (reportData: ErrorReport) => {
  try {
    await fetch('/api/error-reports', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(reportData),
    })
    
    ElMessage.success('é”™è¯¯æŠ¥å‘Šå·²å‘é€ï¼Œæ„Ÿè°¢æ‚¨çš„åé¦ˆ')
  } catch (error) {
    console.error('Failed to submit error report:', error)
    ElMessage.error('å‘é€æŠ¥å‘Šå¤±è´¥ï¼Œè¯·ç¨åå†è¯•')
  }
}
```

---

## 5. åç«¯é”™è¯¯å¤„ç†æœºåˆ¶

### 5.1 å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶

#### 5.1.1 ä¸­ä»¶æ¦‚è¿°

<mcfile name="errorHandler.ts" path="/Users/yanyu/yyc3-catering-platform/backend/gateway/src/middleware/errorHandler.ts"></mcfile>

å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ˜¯åç«¯é”™è¯¯å¤„ç†çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£æ•è·æ‰€æœ‰æœªå¤„ç†çš„é”™è¯¯ï¼Œå¹¶è¿”å›æ ‡å‡†åŒ–çš„é”™è¯¯å“åº”ã€‚

#### 5.1.2 æ ¸å¿ƒåŠŸèƒ½

- **é”™è¯¯æ•è·**ï¼šæ•è·æ‰€æœ‰æœªå¤„ç†çš„é”™è¯¯
- **é”™è¯¯åˆ†ç±»**ï¼šåŒºåˆ†åº”ç”¨é”™è¯¯ã€éªŒè¯é”™è¯¯ã€ç³»ç»Ÿé”™è¯¯
- **é”™è¯¯æ—¥å¿—**ï¼šè®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—ï¼ŒåŒ…æ‹¬è¯·æ±‚ä¸Šä¸‹æ–‡
- **é”™è¯¯å“åº”**ï¼šè¿”å›æ ‡å‡†åŒ–çš„é”™è¯¯å“åº”æ ¼å¼
- **é”™è¯¯ç»Ÿè®¡**ï¼šç»Ÿè®¡é”™è¯¯æ•°é‡å’Œç±»å‹ï¼Œç”¨äºç›‘æ§å’Œåˆ†æ

#### 5.1.3 è‡ªå®šä¹‰é”™è¯¯ç±»

```typescript
export class AppError extends Error {
  public statusCode: number
  public isOperational: boolean
  public code?: string
  public details?: any

  constructor(
    message: string,
    statusCode: number = 500,
    isOperational: boolean = true,
    code?: string,
    details?: any
  ) {
    super(message)
    this.statusCode = statusCode
    this.isOperational = isOperational
    this.code = code
    this.details = details

    Error.captureStackTrace(this, this.constructor)
  }
}
```

#### 5.1.4 é”™è¯¯å¤„ç†ä¸­é—´ä»¶

```typescript
export const errorHandler = (
  err: any, 
  req: Request, 
  res: Response, 
  next: NextFunction
): void => {
  // é»˜è®¤é”™è¯¯é…ç½®
  let errorResponse: ErrorResponse = {
    success: false,
    message: 'Internal Server Error',
    code: 'INTERNAL_SERVER_ERROR',
    timestamp: new Date().toISOString()
  }

  let statusCode = 500

  // å¤„ç†åº”ç”¨é”™è¯¯
  if (err instanceof AppError) {
    statusCode = err.status
    errorResponse = {
      ...errorResponse,
      message: err.message,
      code: err.code
    }
  } else if (err instanceof Error) {
    // å¤„ç†åŸç”Ÿé”™è¯¯
    statusCode = 500
    errorResponse = {
      ...errorResponse,
      message: err.message || 'Internal Server Error',
      code: 'INTERNAL_SERVER_ERROR'
    }
  }

  // å¼€å‘ç¯å¢ƒæ˜¾ç¤ºå †æ ˆä¿¡æ¯
  if (process.env.NODE_ENV === 'development') {
    errorResponse.stack = err.stack
  }

  // è®°å½•é”™è¯¯æ—¥å¿—
  logger.error('Error occurred', {
    error: err.message,
    code: errorResponse.code,
    status: statusCode,
    path: req.path,
    method: req.method,
    ip: req.ip,
    userId: req.user?.id,
    email: req.user?.email,
    roles: req.user?.roles,
    stack: err.stack
  })

  // å‘é€é”™è¯¯å“åº”
  res.status(statusCode).json(errorResponse)
}
```

### 5.2 é”™è¯¯è¾¹ç•Œè£…é¥°å™¨

#### 5.2.1 è£…é¥°å™¨æ¦‚è¿°

<mcfile name="errorHandler.ts" path="/Users/yanyu/yyc3-catering-platform/backend/src/middleware/errorHandler.ts"></mcfile>

é”™è¯¯è¾¹ç•Œè£…é¥°å™¨ç”¨äºæ•è·æ§åˆ¶å™¨æ–¹æ³•ä¸­çš„é”™è¯¯ï¼Œå¹¶è½¬æ¢ä¸ºæ ‡å‡†çš„åº”ç”¨é”™è¯¯ã€‚

#### 5.2.2 è£…é¥°å™¨å®ç°

```typescript
export function catchError(
  errorMessage: string = 'æ“ä½œå¤±è´¥',
  statusCode: number = 500,
  code?: string
) {
  return function (
    target: any,
    propertyName: string,
    descriptor: PropertyDescriptor
  ) {
    const method = descriptor.value

    descriptor.value = async function (...args: any[]) {
      try {
        return await method.apply(this, args)
      } catch (error) {
        if (error instanceof AppError) {
          throw error
        }
        throw new AppError(errorMessage, statusCode, true, code)
      }
    }

    return descriptor
  }
}
```

#### 5.2.3 ä½¿ç”¨ç¤ºä¾‹

```typescript
class UserController {
  @catchError('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥', 500, 'YYC3-USER-0001')
  async getUserInfo(req: Request, res: Response) {
    const userId = req.params.id
    const user = await userService.getUserById(userId)
    return res.json({ success: true, data: user })
  }
}
```

### 5.3 å¼‚æ­¥é”™è¯¯åŒ…è£…å™¨

#### 5.3.1 åŒ…è£…å™¨æ¦‚è¿°

å¼‚æ­¥é”™è¯¯åŒ…è£…å™¨ç”¨äºåŒ…è£…å¼‚æ­¥è·¯ç”±å¤„ç†å‡½æ•°ï¼Œè‡ªåŠ¨æ•è·å¼‚æ­¥é”™è¯¯å¹¶ä¼ é€’ç»™é”™è¯¯å¤„ç†ä¸­é—´ä»¶ã€‚

#### 5.3.2 åŒ…è£…å™¨å®ç°

```typescript
export const asyncHandler = <T extends (...args: any[]) => Promise<any>>(
  fn: T
): ((...args: Parameters<T>) => void) => {
  return (...args: Parameters<T>) => {
    fn(...args).catch(args[2]) // args[2] æ˜¯ next å‡½æ•°
  }
}
```

#### 5.3.3 ä½¿ç”¨ç¤ºä¾‹

```typescript
router.get('/users/:id', asyncHandler(async (req, res, next) => {
  const userId = req.params.id
  const user = await userService.getUserById(userId)
  res.json({ success: true, data: user })
}))
```

### 5.4 éªŒè¯é”™è¯¯å¤„ç†

#### 5.4.1 Zod éªŒè¯é”™è¯¯

```typescript
if (err.name === 'ZodError') {
  response.code = ErrorCode.VALIDATION_ERROR
  response.message = 'å‚æ•°éªŒè¯å¤±è´¥'
  response.data = err.errors
}
```

#### 5.4.2 Sequelize éªŒè¯é”™è¯¯

```typescript
if (err.name === 'SequelizeValidationError' || 
    err.name === 'SequelizeUniqueConstraintError') {
  response.code = ErrorCode.VALIDATION_ERROR
  response.message = 'æ•°æ®éªŒè¯å¤±è´¥'
  response.data = err.errors
}
```

---

## 6. é”™è¯¯ç›‘æ§ä¸å‘Šè­¦

### 6.1 ç›‘æ§æŒ‡æ ‡

#### 6.1.1 é”™è¯¯ç‡æŒ‡æ ‡

<mcfile name="metrics.ts" path="/Users/yanyu/yyc3-catering-platform/backend/gateway/src/middleware/metrics.ts"></mcfile>

```typescript
interface Metrics {
  // è¯·æ±‚æŒ‡æ ‡
  requestCount: number
  requestCountByMethod: Record<string, number>
  requestCountByPath: Record<string, number>
  errorCount: number
  errorCountByCode: Record<number, number>
  responseTime: number[]
  avgResponseTime: number
  maxResponseTime: number
  minResponseTime: number
  p95ResponseTime: number
  p99ResponseTime: number
  
  // èµ„æºæŒ‡æ ‡
  memoryUsage: NodeJS.MemoryUsage
  cpuUsage: number
  uptime: number
  
  // å‘Šè­¦çŠ¶æ€
  activeAlerts: Alert[]
}
```

#### 6.1.2 é”™è¯¯ç‡è®¡ç®—

```typescript
const calculateErrorRate = (): number => {
  if (metrics.requestCount === 0) return 0
  return (metrics.errorCount / metrics.requestCount) * 100
}
```

### 6.2 å‘Šè­¦æœºåˆ¶

#### 6.2.1 å‘Šè­¦çº§åˆ«

| çº§åˆ« | è¯´æ˜ | å“åº”æ—¶é—´ | é€šçŸ¥æ–¹å¼ |
|------|------|----------|----------|
| info | ä¿¡æ¯æ€§å‘Šè­¦ | æ—  | æ—¥å¿—è®°å½• |
| warn | è­¦å‘Šå‘Šè­¦ | 5åˆ†é’Ÿ | é‚®ä»¶ã€ä¼ä¸šå¾®ä¿¡ |
| error | é”™è¯¯å‘Šè­¦ | 1åˆ†é’Ÿ | é‚®ä»¶ã€ä¼ä¸šå¾®ä¿¡ã€ç”µè¯ |
| critical | ä¸¥é‡å‘Šè­¦ | ç«‹å³ | é‚®ä»¶ã€ä¼ä¸šå¾®ä¿¡ã€ç”µè¯ã€çŸ­ä¿¡ |

#### 6.2.2 å‘Šè­¦è§„åˆ™

```typescript
interface AlertRule {
  id: string
  name: string
  metric: string
  threshold: number
  operator: '>' | '<' | '==' | '>=' | '<='
  level: 'info' | 'warn' | 'error' | 'critical'
  duration: number // æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰
  enabled: boolean
}

const alertRules: AlertRule[] = [
  {
    id: 'error-rate-high',
    name: 'é”™è¯¯ç‡è¿‡é«˜',
    metric: 'errorRate',
    threshold: 5,
    operator: '>',
    level: 'error',
    duration: 300,
    enabled: true
  },
  {
    id: 'response-time-high',
    name: 'å“åº”æ—¶é—´è¿‡é•¿',
    metric: 'avgResponseTime',
    threshold: 1000,
    operator: '>',
    level: 'warn',
    duration: 60,
    enabled: true
  },
  {
    id: 'memory-usage-high',
    name: 'å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜',
    metric: 'memoryUsage',
    threshold: 90,
    operator: '>',
    level: 'critical',
    duration: 300,
    enabled: true
  }
]
```

#### 6.2.3 å‘Šè­¦æ£€æŸ¥

```typescript
private checkForAlerts(req: Request, statusCode: number, responseTime: number): void {
  const now = Date.now()
  const timeSinceLastCheck = now - this.lastAlertCheck

  if (timeSinceLastCheck < this.alertCheckInterval) {
    return
  }

  this.lastAlertCheck = now

  // æ£€æŸ¥é”™è¯¯ç‡
  const errorRate = this.calculateErrorRate()
  if (errorRate > 5) {
    this.createAlert({
      id: `alert-${now}`,
      timestamp: new Date(),
      level: 'error',
      metric: 'errorRate',
      threshold: 5,
      currentValue: errorRate,
      message: `é”™è¯¯ç‡è¿‡é«˜: ${errorRate.toFixed(2)}%`,
      acknowledged: false,
      resolved: false
    })
  }

  // æ£€æŸ¥å“åº”æ—¶é—´
  if (this.metrics.avgResponseTime > 1000) {
    this.createAlert({
      id: `alert-${now}`,
      timestamp: new Date(),
      level: 'warn',
      metric: 'avgResponseTime',
      threshold: 1000,
      currentValue: this.metrics.avgResponseTime,
      message: `å¹³å‡å“åº”æ—¶é—´è¿‡é•¿: ${this.metrics.avgResponseTime.toFixed(0)}ms`,
      acknowledged: false,
      resolved: false
    })
  }
}
```

### 6.3 æ ¹å› åˆ†æ

#### 6.3.1 æ ¹å› åˆ†ææ¥å£

```typescript
interface RootCauseAnalysis {
  id: string
  timestamp: Date
  issue: string
  probableCause: string
  confidence: number
  relatedMetrics: string[]
  suggestedActions: string[]
  affectedServices: string[]
}
```

#### 6.3.2 æ ¹å› åˆ†æå®ç°

```typescript
public analyzeRootCause(alert: Alert): RootCauseAnalysis {
  const analysis: RootCauseAnalysis = {
    id: `rca-${Date.now()}`,
    timestamp: new Date(),
    issue: alert.message,
    probableCause: '',
    confidence: 0,
    relatedMetrics: [],
    suggestedActions: [],
    affectedServices: []
  }

  // æ ¹æ®å‘Šè­¦ç±»å‹è¿›è¡Œæ ¹å› åˆ†æ
  switch (alert.metric) {
    case 'errorRate':
      analysis.probableCause = 'æœåŠ¡å¼‚å¸¸æˆ–ä¾èµ–æœåŠ¡æ•…éšœ'
      analysis.confidence = 0.8
      analysis.relatedMetrics = ['errorCountByCode', 'responseTime']
      analysis.suggestedActions = [
        'æ£€æŸ¥æœåŠ¡æ—¥å¿—',
        'æ£€æŸ¥ä¾èµ–æœåŠ¡çŠ¶æ€',
        'æŸ¥çœ‹é”™è¯¯ç åˆ†å¸ƒ'
      ]
      analysis.affectedServices = ['api-gateway', 'user-service', 'order-service']
      break

    case 'avgResponseTime':
      analysis.probableCause = 'æ•°æ®åº“æŸ¥è¯¢æ…¢æˆ–ç½‘ç»œå»¶è¿Ÿé«˜'
      analysis.confidence = 0.7
      analysis.relatedMetrics = ['p95ResponseTime', 'p99ResponseTime']
      analysis.suggestedActions = [
        'æ£€æŸ¥æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½',
        'æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€',
        'æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—'
      ]
      analysis.affectedServices = ['api-gateway', 'database']
      break

    case 'memoryUsage':
      analysis.probableCause = 'å†…å­˜æ³„æ¼æˆ–å†…å­˜é…ç½®ä¸è¶³'
      analysis.confidence = 0.9
      analysis.relatedMetrics = ['cpuUsage', 'uptime']
      analysis.suggestedActions = [
        'æ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µ',
        'åˆ†æå†…å­˜æ³„æ¼',
        'å¢åŠ å†…å­˜é…ç½®'
      ]
      analysis.affectedServices = ['api-gateway']
      break
  }

  this.rootCauseAnalyses.push(analysis)
  return analysis
}
```

### 6.4 ç›‘æ§é¢æ¿

#### 6.4.1 ç›‘æ§æŒ‡æ ‡å±•ç¤º

<mcfile name="SystemMonitoring.vue" path="/Users/yanyu/yyc3-catering-platform/frontend/apps/admin-dashboard/src/views/SystemMonitoring.vue"></mcfile>

```vue
<template>
  <div class="system-monitoring">
    <el-row :gutter="20">
      <el-col :span="6">
        <el-card>
          <div class="metric-card">
            <div class="metric-title">è¯·æ±‚æ€»æ•°</div>
            <div class="metric-value">{{ metrics.requestCount }}</div>
          </div>
        </el-card>
      </el-col>
      <el-col :span="6">
        <el-card>
          <div class="metric-card">
            <div class="metric-title">é”™è¯¯æ€»æ•°</div>
            <div class="metric-value error">{{ metrics.errorCount }}</div>
          </div>
        </el-card>
      </el-col>
      <el-col :span="6">
        <el-card>
          <div class="metric-card">
            <div class="metric-title">é”™è¯¯ç‡</div>
            <div class="metric-value">{{ calculateErrorRate() }}%</div>
          </div>
        </el-card>
      </el-col>
      <el-col :span="6">
        <el-card>
          <div class="metric-card">
            <div class="metric-title">å¹³å‡å“åº”æ—¶é—´</div>
            <div class="metric-value">{{ metrics.avgResponseTime }}ms</div>
          </div>
        </el-card>
      </el-col>
    </el-row>
  </div>
</template>
```

#### 6.4.2 å‘Šè­¦çŠ¶æ€å±•ç¤º

<mcfile name="alert.ts" path="/Users/yanyu/yyc3-catering-platform/frontend/apps/admin-dashboard/src/stores/alert.ts"></mcfile>

```typescript
export const useAlertStore = defineStore('alert', () => {
  const alerts = ref<Alert[]>([])
  const activeAlerts = computed(() => alerts.value.filter(a => !a.resolved))

  const addAlert = (alert: Alert) => {
    alerts.value.push(alert)
  }

  const closeAlert = (alertId: string) => {
    const alert = alerts.value.find(a => a.id === alertId)
    if (alert) {
      alert.acknowledged = true
      alert.resolved = true
      alert.resolution = new Date()
    }
  }

  const clearAlerts = () => {
    alerts.value = []
  }

  return {
    alerts,
    activeAlerts,
    addAlert,
    closeAlert,
    clearAlerts
  }
})
```

---

## 7. æ•…éšœæ’æŸ¥ä¸æ¢å¤

### 7.1 æ•…éšœæ’æŸ¥æµç¨‹

#### 7.1.1 æ•…éšœå‘ç°

- **è‡ªåŠ¨å‘Šè­¦**ï¼šç›‘æ§ç³»ç»Ÿè‡ªåŠ¨å‘é€å‘Šè­¦é€šçŸ¥
- **ç”¨æˆ·åé¦ˆ**ï¼šç”¨æˆ·é€šè¿‡é”™è¯¯æŠ¥å‘Šæˆ–å®¢æœåé¦ˆé—®é¢˜
- **ä¸»åŠ¨å·¡æ£€**ï¼šè¿ç»´äººå‘˜å®šæœŸæ£€æŸ¥ç³»ç»ŸçŠ¶æ€

#### 7.1.2 æ•…éšœå®šä½

```mermaid
graph TD
    A[æ•…éšœå‘ç°] --> B[æ”¶é›†æ•…éšœä¿¡æ¯]
    B --> C[åˆ†æé”™è¯¯æ—¥å¿—]
    C --> D[æŸ¥çœ‹ç›‘æ§æŒ‡æ ‡]
    D --> E[æ£€æŸ¥ç³»ç»ŸçŠ¶æ€]
    E --> F[å®šä½æ•…éšœæ ¹å› ]
    F --> G[åˆ¶å®šä¿®å¤æ–¹æ¡ˆ]
    G --> H[å®æ–½ä¿®å¤æªæ–½]
    H --> I[éªŒè¯ä¿®å¤æ•ˆæœ]
    I --> J{ä¿®å¤æˆåŠŸ?}
    J -->|æ˜¯| K[è®°å½•æ•…éšœä¿¡æ¯]
    J -->|å¦| G
    K --> L[æ•…éšœå¤ç›˜]
```

#### 7.1.3 æ•…éšœä¿¡æ¯æ”¶é›†

```typescript
interface FaultInfo {
  id: string
  timestamp: Date
  level: 'info' | 'warn' | 'error' | 'critical'
  type: string
  message: string
  stack?: string
  context: {
    userId?: string
    requestId?: string
    path?: string
    method?: string
    userAgent?: string
  }
  metrics: {
    errorRate: number
    responseTime: number
    memoryUsage: number
    cpuUsage: number
  }
  rootCause?: string
  resolution?: string
  resolvedAt?: Date
}
```

### 7.2 æ•…éšœæ¢å¤ç­–ç•¥

#### 7.2.1 è‡ªåŠ¨æ¢å¤

```typescript
class FaultRecovery {
  private recoveryStrategies: Map<string, RecoveryStrategy> = new Map()

  constructor() {
    this.registerRecoveryStrategies()
  }

  private registerRecoveryStrategies() {
    // æ•°æ®åº“è¿æ¥å¤±è´¥æ¢å¤ç­–ç•¥
    this.recoveryStrategies.set('DATABASE_CONNECTION_FAILED', {
      name: 'æ•°æ®åº“è¿æ¥å¤±è´¥',
      maxRetries: 3,
      retryDelay: 5000,
      action: async () => {
        await database.reconnect()
      }
    })

    // ç¼“å­˜æœåŠ¡å¤±è´¥æ¢å¤ç­–ç•¥
    this.recoveryStrategies.set('CACHE_SERVICE_FAILED', {
      name: 'ç¼“å­˜æœåŠ¡å¤±è´¥',
      maxRetries: 3,
      retryDelay: 3000,
      action: async () => {
        await cache.reconnect()
      }
    })

    // ç¬¬ä¸‰æ–¹æœåŠ¡è¶…æ—¶æ¢å¤ç­–ç•¥
    this.recoveryStrategies.set('THIRD_PARTY_TIMEOUT', {
      name: 'ç¬¬ä¸‰æ–¹æœåŠ¡è¶…æ—¶',
      maxRetries: 2,
      retryDelay: 10000,
      action: async () => {
        await thirdPartyService.resetConnection()
      }
    })
  }

  async recover(faultType: string): Promise<boolean> {
    const strategy = this.recoveryStrategies.get(faultType)
    if (!strategy) {
      return false
    }

    for (let i = 0; i < strategy.maxRetries; i++) {
      try {
        await strategy.action()
        logger.info(`Recovery successful for ${strategy.name}`)
        return true
      } catch (error) {
        logger.error(`Recovery attempt ${i + 1} failed for ${strategy.name}`, error)
        if (i < strategy.maxRetries - 1) {
          await new Promise(resolve => setTimeout(resolve, strategy.retryDelay))
        }
      }
    }

    logger.error(`All recovery attempts failed for ${strategy.name}`)
    return false
  }
}
```

#### 7.2.2 æ‰‹åŠ¨æ¢å¤

å½“è‡ªåŠ¨æ¢å¤å¤±è´¥æ—¶ï¼Œéœ€è¦è¿ç»´äººå‘˜æ‰‹åŠ¨ä»‹å…¥ï¼š

1. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**ï¼šç¡®è®¤æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. **æŸ¥çœ‹æ—¥å¿—**ï¼šåˆ†æé”™è¯¯æ—¥å¿—ï¼Œå®šä½é—®é¢˜
3. **é‡å¯æœåŠ¡**ï¼šå¿…è¦æ—¶é‡å¯ç›¸å…³æœåŠ¡
4. **å›æ»šç‰ˆæœ¬**ï¼šå¦‚æœæ˜¯ç‰ˆæœ¬é—®é¢˜ï¼Œå›æ»šåˆ°ç¨³å®šç‰ˆæœ¬
5. **æ‰©å®¹èµ„æº**ï¼šå¦‚æœæ˜¯èµ„æºä¸è¶³ï¼Œå¢åŠ æœåŠ¡å™¨èµ„æº

### 7.3 æ•…éšœå¤ç›˜

#### 7.3.1 å¤ç›˜ä¼šè®®

æ•…éšœæ¢å¤åï¼Œç»„ç»‡å¤ç›˜ä¼šè®®ï¼Œè®¨è®ºä»¥ä¸‹å†…å®¹ï¼š

- æ•…éšœåŸå› åˆ†æ
- æ•…éšœå½±å“è¯„ä¼°
- æ¢å¤è¿‡ç¨‹å›é¡¾
- æ”¹è¿›æªæ–½åˆ¶å®š
- è´£ä»»äººæ˜ç¡®

#### 7.3.2 å¤ç›˜æŠ¥å‘Š

```typescript
interface PostMortemReport {
  id: string
  incidentDate: Date
  incidentTitle: string
  incidentSummary: string
  impactAssessment: {
    affectedUsers: number
    affectedServices: string[]
    downtime: number
    businessImpact: string
  }
  rootCauseAnalysis: {
    primaryCause: string
    contributingFactors: string[]
    timeline: Array<{
      time: Date
      event: string
    }>
  }
  resolution: {
    actionsTaken: string[]
    resolutionTime: number
    successful: boolean
  }
  lessonsLearned: string[]
  actionItems: Array<{
    action: string
    owner: string
    dueDate: Date
    status: 'pending' | 'in_progress' | 'completed'
  }>
  attachments: string[]
}
```

---

## 8. æœ€ä½³å®è·µä¸è§„èŒƒ

### 8.1 é”™è¯¯å¤„ç†æœ€ä½³å®è·µ

#### 8.1.1 å‰ç«¯æœ€ä½³å®è·µ

1. **ä½¿ç”¨ ErrorBoundary åŒ…è£¹å…³é”®ç»„ä»¶**
```vue
<ErrorBoundary>
  <CriticalComponent />
</ErrorBoundary>
```

2. **æä¾›å‹å¥½çš„é”™è¯¯æç¤º**
```typescript
const getErrorMessage = (error: Error): string => {
  const errorType = analyzeError(error)
  switch (errorType) {
    case 'network':
      return 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®'
    case 'permission':
      return 'æ‚¨æ²¡æœ‰æƒé™æ‰§è¡Œæ­¤æ“ä½œ'
    case 'server':
      return 'æœåŠ¡å™¨æš‚æ—¶æ— æ³•å“åº”ï¼Œè¯·ç¨åå†è¯•'
    default:
      return 'æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•'
  }
}
```

3. **å®ç°è‡ªåŠ¨é‡è¯•æœºåˆ¶**
```typescript
const retryWithBackoff = async <T>(
  fn: () => Promise<T>,
  maxRetries: number = 3,
  delay: number = 1000
): Promise<T> => {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await fn()
    } catch (error) {
      if (i === maxRetries - 1) throw error
      await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)))
    }
  }
  throw new Error('Max retries exceeded')
}
```

4. **è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—**
```typescript
const logError = (error: Error, context: any) => {
  const errorLog = {
    timestamp: new Date().toISOString(),
    error: {
      name: error.name,
      message: error.message,
      stack: error.stack
    },
    context
  }
  
  // å‘é€åˆ°æ—¥å¿—æœåŠ¡å™¨
  sendToLogServer(errorLog)
}
```

#### 8.1.2 åç«¯æœ€ä½³å®è·µ

1. **ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯ç±»**
```typescript
throw new AppError(
  'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯',
  401,
  true,
  'YYC3-AUTH-0001'
)
```

2. **ä½¿ç”¨é”™è¯¯è¾¹ç•Œè£…é¥°å™¨**
```typescript
@catchError('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥', 500, 'YYC3-USER-0001')
async getUserInfo(req: Request, res: Response) {
  const userId = req.params.id
  const user = await userService.getUserById(userId)
  return res.json({ success: true, data: user })
}
```

3. **ä½¿ç”¨å¼‚æ­¥é”™è¯¯åŒ…è£…å™¨**
```typescript
router.get('/users/:id', asyncHandler(async (req, res, next) => {
  const userId = req.params.id
  const user = await userService.getUserById(userId)
  res.json({ success: true, data: user })
}))
```

4. **è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—**
```typescript
logger.error('Error occurred', {
  error: {
    name: err.name,
    message: err.message,
    code: err.code,
    statusCode: err.statusCode,
    stack: err.stack,
    details: err.details
  },
  request: {
    method: req.method,
    path: req.path,
    query: req.query,
    body: req.body,
    headers: req.headers
  },
  user: {
    id: req.user?.id,
    email: req.user?.email,
    roles: req.user?.roles
  }
})
```

### 8.2 é”™è¯¯å¤„ç†è§„èŒƒ

#### 8.2.1 é”™è¯¯ç è§„èŒƒ

- é”™è¯¯ç æ ¼å¼ï¼š`YYC3-XXX-YYYY`
- æ¨¡å—æ ‡è¯†ä½¿ç”¨å¤§å†™å­—æ¯
- é”™è¯¯ç¼–å·ä½¿ç”¨4ä½æ•°å­—ï¼Œä»0001å¼€å§‹
- é”™è¯¯ç å¿…é¡»å”¯ä¸€ä¸”æœ‰æ„ä¹‰

#### 8.2.2 é”™è¯¯ä¿¡æ¯è§„èŒƒ

- é”™è¯¯ä¿¡æ¯å¿…é¡»æ¸…æ™°ã€å‡†ç¡®ã€å‹å¥½
- é¿å…ä½¿ç”¨æŠ€æœ¯æœ¯è¯­
- æä¾›é”™è¯¯åŸå› å’Œè§£å†³å»ºè®®
- æ”¯æŒå¤šè¯­è¨€

#### 8.2.3 é”™è¯¯æ—¥å¿—è§„èŒƒ

- æ—¥å¿—çº§åˆ«ï¼šERRORã€WARNã€INFOã€DEBUG
- æ—¥å¿—æ ¼å¼ï¼šJSONæ ¼å¼ï¼ŒåŒ…å«æ—¶é—´æˆ³ã€é”™è¯¯ä¿¡æ¯ã€ä¸Šä¸‹æ–‡
- æ—¥å¿—å­˜å‚¨ï¼šæŒ‰æ—¥æœŸåˆ†æ–‡ä»¶ï¼Œä¿ç•™30å¤©
- æ—¥å¿—æŸ¥è¯¢ï¼šæ”¯æŒæŒ‰æ—¶é—´ã€é”™è¯¯ç ã€ç”¨æˆ·IDæŸ¥è¯¢

#### 8.2.4 é”™è¯¯ç›‘æ§è§„èŒƒ

- ç›‘æ§æŒ‡æ ‡ï¼šé”™è¯¯ç‡ã€å“åº”æ—¶é—´ã€èµ„æºä½¿ç”¨ç‡
- å‘Šè­¦è§„åˆ™ï¼šè®¾ç½®åˆç†çš„é˜ˆå€¼å’ŒæŒç»­æ—¶é—´
- å‘Šè­¦é€šçŸ¥ï¼šå¤šæ¸ é“é€šçŸ¥ï¼Œç¡®ä¿åŠæ—¶å“åº”
- ç›‘æ§é¢æ¿ï¼šå¯è§†åŒ–å±•ç¤ºï¼Œä¾¿äºæŸ¥çœ‹å’Œåˆ†æ

### 8.3 é”™è¯¯å¤„ç†æ£€æŸ¥æ¸…å•

#### 8.3.1 å‰ç«¯æ£€æŸ¥æ¸…å•

- [ ] ä½¿ç”¨ ErrorBoundary åŒ…è£¹å…³é”®ç»„ä»¶
- [ ] å®ç°å…¨å±€é”™è¯¯ç›‘å¬
- [ ] æä¾›å‹å¥½çš„é”™è¯¯æç¤º
- [ ] å®ç°è‡ªåŠ¨é‡è¯•æœºåˆ¶
- [ ] è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- [ ] æ”¯æŒé”™è¯¯æŠ¥å‘ŠåŠŸèƒ½
- [ ] é”™è¯¯ä¿¡æ¯æ”¯æŒå¤šè¯­è¨€
- [ ] é”™è¯¯ç•Œé¢æ”¯æŒå“åº”å¼è®¾è®¡

#### 8.3.2 åç«¯æ£€æŸ¥æ¸…å•

- [ ] ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯ç±»
- [ ] å®ç°å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶
- [ ] ä½¿ç”¨é”™è¯¯è¾¹ç•Œè£…é¥°å™¨
- [ ] ä½¿ç”¨å¼‚æ­¥é”™è¯¯åŒ…è£…å™¨
- [ ] è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- [ ] å®ç°é”™è¯¯ç›‘æ§å’Œå‘Šè­¦
- [ ] å®ç°æ•…éšœè‡ªåŠ¨æ¢å¤
- [ ] å®šæœŸè¿›è¡Œæ•…éšœå¤ç›˜

---

## ğŸ“„ æ–‡æ¡£æ ‡å°¾ (Footer)

> ã€Œ***YanYuCloudCube***ã€
> ã€Œ***<admin@0379.email>***ã€
> ã€Œ***Words Initiate Quadrants, Language Serves as Core for the Future***ã€
> ã€Œ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***ã€




## æ¦‚è¿°

### æ¶æ„æ¦‚è¿°

æœ¬æ¶æ„æ–‡æ¡£è¯¦ç»†æè¿°äº†ç³»ç»Ÿçš„æ•´ä½“æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬æ¶æ„ç›®æ ‡ã€è®¾è®¡åŸåˆ™ã€æŠ€æœ¯é€‰å‹ç­‰å…³é”®ä¿¡æ¯ã€‚

#### æ¶æ„ç›®æ ‡

- **é«˜å¯ç”¨æ€§**ï¼šç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œï¼Œæ•…éšœè‡ªåŠ¨æ¢å¤
- **é«˜æ€§èƒ½**ï¼šå“åº”è¿…é€Ÿï¼Œèµ„æºåˆ©ç”¨é«˜æ•ˆ
- **é«˜å®‰å…¨æ€§**ï¼šæ•°æ®åŠ å¯†ï¼Œæƒé™ä¸¥æ ¼æ§åˆ¶
- **é«˜æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºåŠŸèƒ½æ‰©å±•
- **é«˜å¯ç»´æŠ¤æ€§**ï¼šä»£ç æ¸…æ™°ï¼Œæ–‡æ¡£å®Œå–„

#### è®¾è®¡åŸåˆ™

- **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
- **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- **ä¾èµ–å€’ç½®**ï¼šä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°
- **æ¥å£éš”ç¦»**ï¼šä½¿ç”¨ç»†ç²’åº¦çš„æ¥å£
- **è¿ªç±³ç‰¹æ³•åˆ™**ï¼šæœ€å°‘çŸ¥è¯†åŸåˆ™



## æ¶æ„è®¾è®¡

### æ¶æ„è®¾è®¡

#### æ•´ä½“æ¶æ„

ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬ï¼š

- **è¡¨ç°å±‚**ï¼šè´Ÿè´£ç”¨æˆ·ç•Œé¢å’Œäº¤äº’
- **åº”ç”¨å±‚**ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘
- **ä¸šåŠ¡å±‚**ï¼šå®ç°æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½
- **æ•°æ®å±‚**ï¼šç®¡ç†æ•°æ®å­˜å‚¨å’Œè®¿é—®
- **åŸºç¡€è®¾æ–½å±‚**ï¼šæä¾›åŸºç¡€æœåŠ¡æ”¯æŒ

#### æ¨¡å—åˆ’åˆ†

ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ç‰¹å®šåŠŸèƒ½ï¼š

- **ç”¨æˆ·æ¨¡å—**ï¼šç”¨æˆ·ç®¡ç†å’Œè®¤è¯
- **è®¢å•æ¨¡å—**ï¼šè®¢å•å¤„ç†å’Œç®¡ç†
- **æ”¯ä»˜æ¨¡å—**ï¼šæ”¯ä»˜é›†æˆå’Œå¤„ç†
- **é€šçŸ¥æ¨¡å—**ï¼šæ¶ˆæ¯é€šçŸ¥å’Œæ¨é€
- **æŠ¥è¡¨æ¨¡å—**ï¼šæ•°æ®ç»Ÿè®¡å’Œåˆ†æ

#### æŠ€æœ¯é€‰å‹

- **å‰ç«¯æ¡†æ¶**ï¼šReact / Vue
- **åç«¯æ¡†æ¶**ï¼šNode.js / Express / Fastify
- **æ•°æ®åº“**ï¼šPostgreSQL / MongoDB
- **ç¼“å­˜**ï¼šRedis
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šRabbitMQ / Kafka



## æŠ€æœ¯å®ç°

### æŠ€æœ¯å®ç°

#### æ ¸å¿ƒæŠ€æœ¯æ ˆ

```typescript
// æ ¸å¿ƒä¾èµ–
{
  "dependencies": {
    "react": "^18.0.0",
    "typescript": "^5.0.0",
    "express": "^4.18.0",
    "prisma": "^5.0.0",
    "redis": "^4.6.0"
  }
}
```

#### å…³é”®å®ç°

1. **æœåŠ¡å±‚å®ç°**
```typescript
class UserService {
  async createUser(data: CreateUserDto): Promise<User> {
    // éªŒè¯è¾“å…¥
    this.validateUserData(data);
    
    // åŠ å¯†å¯†ç 
    const hashedPassword = await this.hashPassword(data.password);
    
    // åˆ›å»ºç”¨æˆ·
    const user = await this.userRepository.create({
      ...data,
      password: hashedPassword
    });
    
    return user;
  }
}
```

2. **ä¸­é—´ä»¶å®ç°**
```typescript
const authMiddleware = async (req: Request, res: Response, next: NextFunction) => {
  const token = req.headers.authorization?.split(' ')[1];
  
  if (!token) {
    return res.status(401).json({ error: 'æœªæˆæƒè®¿é—®' });
  }
  
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.user = decoded;
    next();
  } catch (error) {
    return res.status(401).json({ error: 'ä»¤ç‰Œæ— æ•ˆ' });
  }
};
```



## éƒ¨ç½²æ–¹æ¡ˆ

### éƒ¨ç½²æ–¹æ¡ˆ

#### éƒ¨ç½²æ¶æ„

é‡‡ç”¨å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆï¼Œä½¿ç”¨Dockerå’ŒKubernetesè¿›è¡Œç¼–æ’ã€‚

#### éƒ¨ç½²æ­¥éª¤

1. **ç¯å¢ƒå‡†å¤‡**
```bash
# å®‰è£…Docker
curl -fsSL https://get.docker.com | sh

# å®‰è£…Kubernetes
# æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©ç›¸åº”çš„å®‰è£…æ–¹å¼
```

2. **æ„å»ºé•œåƒ**
```bash
# æ„å»ºåº”ç”¨é•œåƒ
docker build -t yyc3-app:latest .

# æ¨é€åˆ°é•œåƒä»“åº“
docker push registry.example.com/yyc3-app:latest
```

3. **éƒ¨ç½²åˆ°Kubernetes**
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: yyc3-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: yyc3-app
  template:
    metadata:
      labels:
        app: yyc3-app
    spec:
      containers:
      - name: app
        image: registry.example.com/yyc3-app:latest
        ports:
        - containerPort: 3000
        env:
        - name: NODE_ENV
          value: "production"
```

4. **é…ç½®æœåŠ¡**
```yaml
apiVersion: v1
kind: Service
metadata:
  name: yyc3-app-service
spec:
  selector:
    app: yyc3-app
  ports:
  - protocol: TCP
    port: 80
    targetPort: 3000
  type: LoadBalancer
```



## æ€§èƒ½ä¼˜åŒ–

### æ€§èƒ½ä¼˜åŒ–

#### å‰ç«¯ä¼˜åŒ–

1. **ä»£ç åˆ†å‰²**
```typescript
// è·¯ç”±çº§åˆ«ä»£ç åˆ†å‰²
const Home = lazy(() => import('./pages/Home'));
const About = lazy(() => import('./pages/About'));

function App() {
  return (
    <Suspense fallback={<Loading />}>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
      </Routes>
    </Suspense>
  );
}
```

2. **ç¼“å­˜ç­–ç•¥**
```typescript
// React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
const MemoizedComponent = React.memo(({ data }) => {
  return <div>{data.value}</div>;
});

// useMemo ç¼“å­˜è®¡ç®—ç»“æœ
const expensiveValue = useMemo(() => {
  return computeExpensiveValue(data);
}, [data]);
```

#### åç«¯ä¼˜åŒ–

1. **æ•°æ®åº“ä¼˜åŒ–**
```typescript
// ä½¿ç”¨ç´¢å¼•
CREATE INDEX idx_user_email ON users(email);

// æŸ¥è¯¢ä¼˜åŒ–
const users = await prisma.user.findMany({
  select: {
    id: true,
    name: true,
    email: true
  },
  where: {
    active: true
  },
  take: 100
});
```

2. **ç¼“å­˜ç­–ç•¥**
```typescript
// Redisç¼“å­˜
async function getUser(id: string): Promise<User> {
  const cacheKey = `user:${id}`;
  
  // å°è¯•ä»ç¼“å­˜è·å–
  const cached = await redis.get(cacheKey);
  if (cached) {
    return JSON.parse(cached);
  }
  
  // ä»æ•°æ®åº“è·å–
  const user = await prisma.user.findUnique({ where: { id } });
  
  // å†™å…¥ç¼“å­˜
  await redis.setex(cacheKey, 3600, JSON.stringify(user));
  
  return user;
}
```



## å®‰å…¨è€ƒè™‘

### å®‰å…¨è€ƒè™‘

#### è®¤è¯ä¸æˆæƒ

1. **JWTè®¤è¯**
```typescript
// ç”ŸæˆJWTä»¤ç‰Œ
const token = jwt.sign(
  { userId: user.id, role: user.role },
  process.env.JWT_SECRET,
  { expiresIn: '24h' }
);

// éªŒè¯JWTä»¤ç‰Œ
const decoded = jwt.verify(token, process.env.JWT_SECRET);
```

2. **RBACæˆæƒ**
```typescript
// è§’è‰²æƒé™æ£€æŸ¥
function checkPermission(user: User, resource: string, action: string): boolean {
  const permissions = rolePermissions[user.role];
  return permissions.some(p => 
    p.resource === resource && p.actions.includes(action)
  );
}
```

#### æ•°æ®ä¿æŠ¤

1. **è¾“å…¥éªŒè¯**
```typescript
// ä½¿ç”¨Zodè¿›è¡Œè¾“å…¥éªŒè¯
const createUserSchema = z.object({
  email: z.string().email(),
  password: z.string().min(8).regex(/[A-Z]/),
  name: z.string().min(2)
});

const validated = createUserSchema.parse(input);
```

2. **æ•°æ®åŠ å¯†**
```typescript
// ä½¿ç”¨bcryptåŠ å¯†å¯†ç 
const hashedPassword = await bcrypt.hash(password, 10);

// éªŒè¯å¯†ç 
const isValid = await bcrypt.compare(password, hashedPassword);
```

#### å®‰å…¨å¤´é…ç½®

```typescript
// Expresså®‰å…¨å¤´é…ç½®
app.use(helmet());
app.use(cors({
  origin: process.env.ALLOWED_ORIGINS?.split(','),
  credentials: true
}));
```



## ç›‘æ§å‘Šè­¦

### ç›‘æ§å‘Šè­¦

#### ç›‘æ§æŒ‡æ ‡

1. **ç³»ç»ŸæŒ‡æ ‡**
- CPUä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- ç£ç›˜ä½¿ç”¨ç‡
- ç½‘ç»œI/O

2. **åº”ç”¨æŒ‡æ ‡**
- è¯·æ±‚é‡(RPS)
- å“åº”æ—¶é—´
- é”™è¯¯ç‡
- å¹¶å‘ç”¨æˆ·æ•°

3. **ä¸šåŠ¡æŒ‡æ ‡**
- ç”¨æˆ·æ³¨å†Œæ•°
- è®¢å•åˆ›å»ºæ•°
- æ”¯ä»˜æˆåŠŸç‡
- ç”¨æˆ·æ´»è·ƒåº¦

#### ç›‘æ§å·¥å…·

```typescript
// PrometheusæŒ‡æ ‡æ”¶é›†
import { Counter, Histogram, Gauge } from 'prom-client';

const requestCounter = new Counter({
  name: 'http_requests_total',
  help: 'Total number of HTTP requests',
  labelNames: ['method', 'route', 'status']
});

const responseTime = new Histogram({
  name: 'http_request_duration_seconds',
  help: 'HTTP request duration in seconds',
  labelNames: ['method', 'route']
});

// ä½¿ç”¨ä¸­é—´ä»¶è®°å½•æŒ‡æ ‡
app.use((req, res, next) => {
  const start = Date.now();
  
  res.on('finish', () => {
    const duration = (Date.now() - start) / 1000;
    requestCounter.inc({
      method: req.method,
      route: req.route?.path || req.path,
      status: res.statusCode
    });
    responseTime.observe({
      method: req.method,
      route: req.route?.path || req.path
    }, duration);
  });
  
  next();
});
```

#### å‘Šè­¦è§„åˆ™

```yaml
groups:
- name: api_alerts
  rules:
  - alert: HighErrorRate
    expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "APIé”™è¯¯ç‡è¿‡é«˜"
      description: "5åˆ†é’Ÿå†…é”™è¯¯ç‡è¶…è¿‡5%"
  
  - alert: HighResponseTime
    expr: histogram_quantile(0.95, http_request_duration_seconds) > 1
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "APIå“åº”æ—¶é—´è¿‡é•¿"
      description: "95%åˆ†ä½å“åº”æ—¶é—´è¶…è¿‡1ç§’"
```



## æœ€ä½³å®è·µ

### æœ€ä½³å®è·µ

#### ä»£ç è§„èŒƒ

1. **å‘½åè§„èŒƒ**
```typescript
// å˜é‡ï¼šcamelCase
const userName = 'John';

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;

// ç±»ï¼šPascalCase
class UserService { }

// æ¥å£ï¼šPascalCaseï¼Œå‰ç¼€Iï¼ˆå¯é€‰ï¼‰
interface IUserService { }
```

2. **æ³¨é‡Šè§„èŒƒ**
```typescript
/**
 * åˆ›å»ºç”¨æˆ·
 * @param email - ç”¨æˆ·é‚®ç®±
 * @param password - ç”¨æˆ·å¯†ç 
 * @returns åˆ›å»ºçš„ç”¨æˆ·å¯¹è±¡
 * @throws {Error} å½“é‚®ç®±å·²å­˜åœ¨æ—¶æŠ›å‡ºé”™è¯¯
 */
async function createUser(
  email: string, 
  password: string
): Promise<User> {
  // å®ç°
}
```

#### é”™è¯¯å¤„ç†

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
class AppError extends Error {
  constructor(
    public statusCode: number,
    public message: string,
    public isOperational = true
  ) {
    super(message);
    this.name = this.constructor.name;
    Error.captureStackTrace(this, this.constructor);
  }
}

// ä½¿ç”¨é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((err: Error, req: Request, res: Response, next: NextFunction) => {
  if (err instanceof AppError) {
    return res.status(err.statusCode).json({
      success: false,
      error: err.message
    });
  }
  
  // è®°å½•æœªé¢„æœŸçš„é”™è¯¯
  logger.error('Unexpected error:', err);
  
  return res.status(500).json({
    success: false,
    error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
  });
});
```

#### æ—¥å¿—è®°å½•

```typescript
// ç»“æ„åŒ–æ—¥å¿—
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

// ä½¿ç”¨æ—¥å¿—
logger.info('User created', { userId: user.id, email: user.email });
logger.error('Database connection failed', { error: error.message });
```


## ç›¸å…³æ–‡æ¡£

- [YYC3 åˆç°ç³»ç»Ÿè‰²](YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»/16-YYC3-Cater--æ¶æ„ç±»-ç³»ç»Ÿè‰²è®¾è®¡è§„èŒƒ.md) - YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»
- [ğŸ”– YYCÂ³ API æ¥å£è®¾è®¡æ–‡æ¡£](YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»/05-YYC3-Cater--æ¶æ„ç±»-APIæ¥å£è®¾è®¡æ–‡æ¡£.md) - YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»
- [ğŸ”– YYCÂ³ ç›‘æ§æ¶æ„è®¾è®¡æ–‡æ¡£](YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»/09-YYC3-Cater--æ¶æ„ç±»-ç›‘æ§æ¶æ„è®¾è®¡æ–‡æ¡£.md) - YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»
- [YYCÂ³æ™ºæ¢æœåŠ¡åŒ–å¹³å° - å¤šç»´åº¦é—­ç¯ç›‘æ§ä¸ä¼˜åŒ–æœºåˆ¶è®¾è®¡](YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»/15-YYC3-Cater--æ¶æ„ç±»-å¤šç»´åº¦é—­ç¯ç›‘æ§ä¸ä¼˜åŒ–æœºåˆ¶è®¾è®¡.md) - YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»
- [ğŸ”– YYCÂ³ æ™ºèƒ½æ¶æ„è®¾è®¡æ–‡æ¡£](YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»/08-YYC3-Cater--æ¶æ„ç±»-æ™ºèƒ½æ¶æ„è®¾è®¡æ–‡æ¡£.md) - YYC3-Cater-æ¶æ„è®¾è®¡/æ¶æ„ç±»
